<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>5 Dragons - 믿을 수 있는 먹튀검증 커뮤니티</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=Black+Han+Sans&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

       body {
    font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: #1a1a1a;
    min-height: 100vh;
    color: #e0e0e0;
    font-size: 14px;
    line-height: 1.6;
}

.container {
    max-width: 1500px;
    margin: 0 auto;
    background: #2d2d2d;
    min-height: 100vh;
   
    width: 100%;
    min-width: 280px;
}

/* 다크모드 통합 스타일 */
.header {
    background: linear-gradient(to bottom, #1f1f1f, #181818);
    border-bottom: 1px solid #333;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
}

.top-bar {
    background: #0d0d0d;
    border-bottom: 1px solid #2a2a2a;
}

.header-main {
    background: transparent;
}

.nav-bar {
    background: #1a1a1a;
    border-top: 1px solid #333;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.main-content, .sidebar, .right-sidebar {
    background: #242424;
    border: 1px solid #333;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
}

.board-table th {
    background: linear-gradient(to bottom, #2d2d2d, #252525);
    color: #f0f0f0;
    border-bottom: 2px solid #dc2626;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

.board-table td {
    color: #d4d4d4;
    border-bottom: 1px solid #333;
}

.board-table tr:hover {
    background: rgba(220, 38, 38, 0.08);
}

.board-table .title a {
    color: #e8e8e8;
    transition: all 0.2s ease;
}

.board-table .title a:hover {
    color: #ff4444;
    text-shadow: 0 0 8px rgba(255, 68, 68, 0.5);
}

.form-control, input[type="text"], input[type="password"], textarea, select {
    background: #1a1a1a;
    border: 1px solid #3a3a3a;
    color: #e0e0e0;
    transition: all 0.3s ease;
}

.form-control:focus, input[type="text"]:focus, input[type="password"]:focus, textarea:focus {
    background: #222;
    border-color: #dc2626;
    color: #f0f0f0;
    box-shadow: 0 0 0 2px rgba(220, 38, 38, 0.2);
}

.sidebar-section {
    border-bottom: 1px solid #333;
}

.sidebar-title {
    background: #3a3a3a !important;
    color: #e0e0e0 !important;
}

.sidebar-content {
    background: #2d2d2d !important;
}

.sidebar-list a {
    color: #b0b0b0 !important;
}

.sidebar-list a:hover {
    color: #dc2626 !important;
}

.login-box {
    background: #3a3a3a !important;
    border-bottom: 1px solid #404040 !important;
}

.login-box input {
    background: #404040 !important;
    border: 1px solid #555 !important;
    color: #e0e0e0 !important;
}

.write-form {
    background: #3a3a3a !important;
    border: 1px solid #404040 !important;
}

.section-title {
    color: #e0e0e0 !important;
}

.post-item {
    border-bottom: 1px solid #404040 !important;
}

.post-item:hover {
    background: #3a3a3a !important;
}

.post-title {
    color: #e0e0e0 !important;
}

.post-content {
    color: #b0b0b0 !important;
}

.comments-section {
    background: #3a3a3a !important;
    border: 1px solid #404040 !important;
}

.comment-item {
    background: #2d2d2d !important;
    border: 1px solid #404040 !important;
}

.comment-content {
    color: #b0b0b0 !important;
}

.comment-write-box {
    background: #2d2d2d !important;
    border: 1px solid #404040 !important;
}

.comment-textarea {
    background: #404040 !important;
    border: 1px solid #555 !important;
    color: #e0e0e0 !important;
}

.guarantee-card {
    background: #2d2d2d !important;
    border: 1px solid #404040 !important;
}

.guarantee-logo {
    background: #3a3a3a !important;
    border: 1px solid #404040 !important;
    color: #b0b0b0 !important;
}

.banner-ad {
    background: #3a3a3a !important;
    border: 1px solid #404040 !important;
}

.banner-title {
    color: #e0e0e0 !important;
}

.post-view-container {
    color: #e0e0e0 !important;
}

.post-view-title {
    color: #e0e0e0 !important;
}

.post-view-content {
    color: #b0b0b0 !important;
}

.search-box {
    background: #404040 !important;
    border: 1px solid #555 !important;
}

.search-box:focus-within {
    border-color: #dc2626 !important;
    background: #4a4a4a !important;
}

.search-box input {
    color: #e0e0e0 !important;
}

.nav-menu a {
    color: #b0b0b0 !important;
}

.nav-menu a:hover {
    color: #dc2626 !important;
    background: rgba(220, 38, 38, 0.1) !important;
}

.nav-menu a.active {
    color: #dc2626 !important;
    background: rgba(220, 38, 38, 0.1) !important;
}

.dropdown-menu {
    background: #2d2d2d !important;
    border: 1px solid #404040 !important;
}

.dropdown-menu a {
    color: #b0b0b0 !important;
}

.dropdown-menu a:hover {
    background: #3a3a3a !important;
    color: #dc2626 !important;
}

/* 모달 다크모드 */
#loginModal > div > div, #signupModal > div > div {
    background: #2d2d2d !important;
    color: #e0e0e0 !important;
}

/* 페이지네이션 */
.pagination-btn {
    background: #3a3a3a !important;
    border: 1px solid #555 !important;
    color: #e0e0e0 !important;
}

.pagination-btn:hover:not(.active):not(:disabled) {
    background: #4a4a4a !important;
    border-color: #dc2626 !important;
    color: #dc2626 !important;
}

.pagination-btn.active {
    background: #dc2626 !important;
    border-color: #dc2626 !important;
}

/* 알림 드롭다운 */
.notification-dropdown {
    background: #2d2d2d !important;
    border: 1px solid #404040 !important;
}

.notification-item {
    border-bottom: 1px solid #404040 !important;
}

.notification-item:hover {
    background: #3a3a3a !important;
}

/* 상점 모달 */
.shop-content, .attendances-content {
    background: #2d2d2d !important;
    color: #e0e0e0 !important;
}

.shop-item {
    background: #3a3a3a !important;
    border: 2px solid #404040 !important;
}

.shop-item:hover {
    border-color: #dc2626 !important;
}

/* 출석체크 달력 */
.calendar-day {
    border: 2px solid #404040 !important;
    color: #e0e0e0 !important;
}

.calendar-day.checked {
    background: #2d5a2d !important;
    border-color: #16a34a !important;
}

/* 게임 컨테이너 */
.game-container {
    background: linear-gradient(135deg, #0a2a0a 0%, #051a05 100%) !important;
}

.game-table {
    background: #030f03 !important;
    border: 2px solid #1a3a1a !important;
}

/* 링크 색상 */
a {
    color: #4db8ff !important;
}

.login-links a {
    color: #b0b0b0 !important;
}

.login-links a:hover {
    color: #4db8ff !important;
}

/* 텍스트 색상 조정 */
.stat-label, .post-meta, .comment-date, .notification-time {
    color: #909090 !important;
}

/* 버튼 호버 효과 */
.btn:hover {
    opacity: 0.9;
}

/* 스크롤바 스타일 */
::-webkit-scrollbar {
    width: 10px;
    height: 10px;
}

::-webkit-scrollbar-track {
    background: #1a1a1a;
}

::-webkit-scrollbar-thumb {
    background: #555;
    border-radius: 5px;
}

::-webkit-scrollbar-thumb:hover {
    background: #666;
}

img {
    max-width: 100%;
    height: auto;
}


     .header {
    background: linear-gradient(to bottom, #1f1f1f, #181818);
    border-bottom: 1px solid #333;
    position: sticky;
    top: 0;
    z-index: 1000;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
}

.top-bar {
    background: #0d0d0d;
    padding: 8px 0;
    border-bottom: 1px solid #2a2a2a;
}

        .top-bar-content {
            max-width: 1500px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .login-links {
            display: flex;
            gap: 16px;
            font-size: 13px;
        }

        .login-links a {
            color: #6c757d;
            text-decoration: none;
            transition: color 0.2s ease;
            font-weight: 400;
        }

        .login-links a:hover {
            color: #2563eb;
        }

        .header-main {
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1500px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
        }

        .logo-image {
      height: 120px;
    width: auto;
    max-width: 300px;
        }

        .logo-text {
            font-size: 32px;
            font-weight: 700;
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 50%, #f97316 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            letter-spacing: 1px;
            font-family: 'Black Han Sans', sans-serif;
        }

        .header-search {
            flex: 1;
            max-width: 500px;      
        }

      .search-box {
    display: flex;
    align-items: center;
    background: #1a1a1a;
    border: 1px solid #3a3a3a;
    border-radius: 8px;
    padding: 8px 16px;
    transition: all 0.2s ease;
}

.search-box:focus-within {
    border-color: #dc2626;
    background: #222;
    box-shadow: 0 0 0 2px rgba(220, 38, 38, 0.2);
}

        .search-box input {
            flex: 1;
            border: none;
            background: none;
            outline: none;
            font-size: 14px;
            color: #212529;
        }

        .search-box button {
            border: none;
            background: none;
            color: #6c757d;
            cursor: pointer;
            padding: 4px;
        }

.nav-bar {
    background: #1a1a1a;
    border-top: 1px solid #333;
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);
}
        .nav-menu {
            display: flex;
	    justify-content: center;
	    gap: 10px; 
            list-style: none;
            max-width: 1500px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .nav-menu li {
            position: relative;
        }

/* 드롭다운 메뉴 스타일 */
.nav-menu .dropdown {
    position: relative;
}

.nav-menu .dropdown-menu {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    background: #242424;
    min-width: 180px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.4);
    border: 1px solid #333;
    border-radius: 8px;
    overflow: hidden;
    z-index: 1000;
}
.nav-menu .dropdown:hover .dropdown-menu {
    display: block;
}

.nav-menu .dropdown-menu a {
    display: block;
    padding: 12px 20px;
    color: #495057;
    text-decoration: none;
    font-size: 14px;
    transition: all 0.2s ease;
}

.nav-menu .dropdown-menu a:hover {
    background: #f8f9fa;
    color: #dc2626;
}

/* 모바일 드롭다운 */
.mobile-dropdown {
    background: #1a1a1a;
    display: none;
}
.mobile-dropdown.active {
    display: block;
}

.mobile-dropdown a {
    padding-left: 40px !important;
    font-size: 14px;
    background: #222;
    border-top: 1px solid #333;
}
        .nav-menu a {
            display: block;
            color: #495057;
            text-decoration: none;
            padding: 16px 24px;
            font-size: 15px;
            font-weight: 500;
            transition: all 0.2s ease;
            position: relative;
        }

        .nav-menu a:hover {
            color: #dc2626;
            background: rgba(220, 38, 38, 0.05);
        }

        .nav-menu a.active {
            color: #dc2626;
            background: rgba(220, 38, 38, 0.05);
        }

        .nav-menu a.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 3px;
            background: #dc2626;
        }

        /* Main Layout */
        .main-wrapper {
            display: grid;
            grid-template-columns: 280px 1fr 320px;
            gap: 24px;
            max-width: 1500px;
            margin: 0 auto;
            padding: 24px 20px;
        }

        /* Sidebar Styles */
      .sidebar, .right-sidebar {
    background: #242424;
    border: 1px solid #333;
    border-radius: 12px;
    overflow: hidden;
    height: fit-content;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
}

        .sidebar-section {
            border-bottom: 1px solid #e9ecef;
        }

        .sidebar-section:last-child {
            border-bottom: none;
        }

     .sidebar-title {
    background: linear-gradient(to bottom, #2d2d2d, #252525);
    padding: 12px 16px;
    font-size: 14px;
    font-weight: 600;
    color: #f0f0f0;
    display: flex;
    align-items: center;
    gap: 8px;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

        .sidebar-content {
            padding: 16px;
        }

        .sidebar-list {
            list-style: none;
        }

        .sidebar-list li {
            padding: 8px 0;
        }

        .sidebar-list a {
            color: #495057;
            text-decoration: none;
            font-size: 14px;
            transition: color 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sidebar-list a:hover {
            color: #dc2626;
        }

        /* Login Box */
       .login-box {
    padding: 20px;
    background: #1a1a1a;
    border-bottom: 1px solid #333;
}

.login-box input {
    width: 100%;
    padding: 10px 12px;
    margin-bottom: 10px;
    border: 1px solid #3a3a3a;
    border-radius: 6px;
    background: #0d0d0d;
    font-size: 14px;
    transition: all 0.2s ease;
    color: #e0e0e0;
}

        .login-box input:focus {
            outline: none;
            border-color: #2563eb;
        }

        .login-btn {
            width: 100%;
            padding: 10px;
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            border: none;
            border-radius: 6px;
            color: #fff;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .login-btn:hover {
            background: linear-gradient(135deg, #b91c1c 0%, #dc2626 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
        }

        /* Main Content */
       .main-content {
    background: #242424;
    border: 1px solid #333;
    border-radius: 12px;
    padding: 24px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
}

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            color: #212529;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

/* Table Styles */
        .board-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 16px;
        }

        .board-table th {
            background: #f8f9fa;
            padding: 12px;
            text-align: left;
            font-size: 13px;
            font-weight: 600;
            color: #495057;
            border-bottom: 2px solid #e9ecef;
        }

        .board-table td {
            padding: 14px 12px;
            border-bottom: 1px solid #f1f3f5;
            font-size: 14px;
            color: #495057;
        }

        .board-table tr:hover {
            background: #f8f9fa;
        }

        .board-table .title a {
            color: #212529;
            text-decoration: none;
            font-weight: 400;
        }

        .board-table .title a:hover {
            color: #dc2626;
            text-decoration: underline;
        }

        .board-table .badge {
            display: inline-block;
            padding: 2px 8px;
            font-size: 11px;
            font-weight: 500;
            border-radius: 4px;
            margin-right: 6px;
        }

        .badge-new {
            background: #dcfce7;
            color: #16a34a;
        }

        .badge-hot {
            background: #fee2e2;
            color: #dc2626;
        }

        /* Banner Styles */
        .banner-section {
            margin: 24px 0;
        }

        .banner-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }

        /* Welcome Banner */
        .welcome-banner {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            padding: 40px;
            margin: -24px -20px 24px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .welcome-banner::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(220, 38, 38, 0.1) 0%, transparent 70%);
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        .welcome-content {
            position: relative;
            z-index: 1;
        }

        .welcome-title {
            font-size: 32px;
            font-weight: 700;
            color: #fff;
            margin-bottom: 12px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .welcome-subtitle {
            font-size: 18px;
            color: #ffd700;
            margin-bottom: 8px;
        }

        .welcome-description {
            font-size: 16px;
            color: rgba(255, 255, 255, 0.8);
            max-width: 800px;
            margin: 0 auto;
        }

        /* Vertical Side Banners */
        .vertical-banner {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            width: 120px;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            padding: 20px 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 999;
        }

        .vertical-banner:hover {
            transform: translateY(-50%) scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .vertical-banner.left {
            left: 20px;
            background: linear-gradient(135deg, #0088cc 0%, #0066aa 100%);
            color: white;
        }

        .vertical-banner.right {
            right: 20px;
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            color: white;
        }

        .vertical-banner-icon {
            font-size: 32px;
            margin-bottom: 12px;
        }

        .vertical-banner-title {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 8px;
            line-height: 1.2;
        }

        .vertical-banner-text {
            font-size: 12px;
            line-height: 1.4;
            opacity: 0.9;
        }

/* 반응형 텍스트 크기 조정 */
@media (max-width: 1400px) {
    html { font-size: 15px; }
    .logo-text { font-size: 28px; }
    .section-title { font-size: 18px; }
}

@media (max-width: 1200px) {
    html { font-size: 14px; }
    .logo-text { font-size: 26px; }
    .section-title { font-size: 17px; }
    .banner-grid { grid-template-columns: repeat(2, 1fr); }
}

@media (max-width: 992px) {
    html { font-size: 13px; }
    .logo-text { font-size: 24px; }
    .section-title { font-size: 16px; }
    .logo-image { width: 50px; height: 50px; }
}


        @media (max-width: 1400px) {
            .vertical-banner {
                display: none;
            }
        }

       .banner-ad {
    background: linear-gradient(to bottom, #2a2a2a, #1f1f1f);
    border: 1px solid #3a3a3a;
    border-radius: 8px;
    padding: 20px;
    text-align: center;
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.banner-ad:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(220, 38, 38, 0.3);
    border-color: #dc2626;
}

        .banner-title {
            font-size: 16px;
            font-weight: 600;
            color: #212529;
            margin-bottom: 4px;
        }

        .banner-bonus {
            font-size: 24px;
            font-weight: 700;
            color: #dc2626;
            margin-bottom: 8px;
        }

        .banner-code {
            display: inline-block;
            background: #e9ecef;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
            color: #495057;
        }

/* Vote Buttons */
        .vote-container {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-top: 8px;
        }

        .vote-btn {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 6px 12px;
            border: 1px solid #e9ecef;
            border-radius: 20px;
            background: #fff;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 13px;
            color: #6c757d;
        }

        .vote-btn:hover {
            background: #f8f9fa;
            border-color: #dee2e6;
        }

        .vote-btn.active.like {
            background: #dcfce7;
            border-color: #16a34a;
            color: #16a34a;
        }

        .vote-btn.active.dislike {
            background: #fee2e2;
            border-color: #dc2626;
            color: #dc2626;
        }

        .vote-icon {
            font-size: 14px;
        }

        .vote-count {
            font-weight: 500;
            min-width: 20px;
            text-align: center;
        }

        /* Post Item Styles */
        .post-item {
            padding: 16px 0;
            border-bottom: 1px solid #f1f3f5;
            transition: background 0.2s ease;
        }

        .post-item:hover {
            background: #f8f9fa;
        }

        .post-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }

        .post-title {
            font-size: 16px;
            font-weight: 500;
            color: #212529;
            text-decoration: none;
            margin-bottom: 4px;
        }

        .post-title:hover {
            color: #dc2626;
        }

        .post-meta {
            font-size: 12px;
            color: #6c757d;
            display: flex;
            gap: 8px;
        }

        .post-content {
            font-size: 14px;
            color: #495057;
            line-height: 1.5;
            margin-bottom: 8px;
        }

        .post-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Form Styles */
        .write-form {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            margin-bottom: 6px;
            font-size: 14px;
            font-weight: 500;
            color: #212529;
        }

        .form-control {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.2s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: #dc2626;
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
        }

        textarea.form-control {
            resize: vertical;
            min-height: 120px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            color: #fff;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, #b91c1c 0%, #dc2626 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
        }

        .btn-secondary {
            background: #e9ecef;
            color: #495057;
        }

        .btn-secondary:hover {
            background: #dee2e6;
        }

        .btn-write {
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            color: #fff;
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-write:hover {
            background: linear-gradient(135deg, #b91c1c 0%, #dc2626 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
        }

        /* Status Badges */
        .status-badge {
            display: inline-block;
            padding: 4px 8px;
            font-size: 12px;
            font-weight: 500;
            border-radius: 4px;
        }

        .status-confirmed {
            background: #fee2e2;
            color: #dc2626;
        }

        .status-checking {
            background: #fef3c7;
            color: #d97706;
        }

        .status-safe {
            background: #dcfce7;
            color: #16a34a;
        }

        /* Guarantee Site Cards */
        .guarantee-card {
            background: #fff;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 20px;
            display: flex;
            gap: 24px;
            align-items: center;
            transition: all 0.2s ease;
        }

        .guarantee-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .guarantee-logo {
            width: 200px;
            height: 100px;
            background: #f8f9fa;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: #6c757d;
            flex-shrink: 0;
            border: 1px solid #e9ecef;
        }

        .guarantee-info h3 {
            font-size: 18px;
            font-weight: 600;
            color: #212529;
            margin-bottom: 8px;
        }

        .guarantee-info p {
            color: #6c757d;
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 16px;
        }

        .guarantee-actions {
            display: flex;
            gap: 12px;
        }

/* Baccarat Game Styles */
        .game-container {
            background: linear-gradient(135deg, #1a5f1a 0%, #0f4a0f 100%);
            border-radius: 12px;
            padding: 24px;
            color: white;
            margin-bottom: 24px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding: 16px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }

        .user-points {
            font-size: 18px;
            font-weight: 600;
            color: #ffd700;
        }

        .game-table {
            background: #0a3d0a;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            border: 2px solid #2d5a2d;
        }

        .betting-area {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 16px;
            margin-bottom: 24px;
        }

        .bet-option {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #4a7c59;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .bet-option:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: #ffd700;
            transform: translateY(-2px);
        }

        .bet-option.selected {
            background: rgba(255, 215, 0, 0.2);
            border-color: #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
        }

        .bet-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .bet-payout {
            font-size: 14px;
            color: #90ee90;
        }

        .bet-amount {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ffd700;
            color: #000;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            display: none;
        }

        .bet-option.selected .bet-amount {
            display: block;
        }

        .betting-controls {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .bet-chip {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
        }

        .bet-chip:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(220, 38, 38, 0.4);
        }

        .bet-chip.selected {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #000;
        }

        .cards-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        .card-section {
            text-align: center;
        }

        .card-section h3 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 16px;
            color: #ffd700;
        }

        .cards {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 12px;
            min-height: 80px;
            align-items: center;
        }

        .card {
            width: 50px;
            height: 70px;
            background: white;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
            color: #000;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            border: 1px solid #ddd;
        }

        .card.red {
            color: #dc2626;
        }

        .card-back {
            background: linear-gradient(135deg, #1e40af 0%, #1d4ed8 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .total-score {
            font-size: 24px;
            font-weight: 700;
            color: #ffd700;
            margin-top: 8px;
        }

        .game-actions {
            display: flex;
            justify-content: center;
            gap: 16px;
        }

        .game-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .game-btn-primary {
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            color: white;
        }

        .game-btn-primary:hover {
            background: linear-gradient(135deg, #b91c1c 0%, #dc2626 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
        }

        .game-btn-secondary {
            background: #6c757d;
            color: white;
        }

        .game-btn-secondary:hover {
            background: #5a6268;
        }

        .game-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .game-result {
            text-align: center;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            display: none;
        }

        .result-win {
            background: rgba(34, 197, 94, 0.2);
            border: 2px solid #22c55e;
            color: #22c55e;
        }

        .result-lose {
            background: rgba(239, 68, 68, 0.2);
            border: 2px solid #ef4444;
            color: #ef4444;
        }

        .result-tie {
            background: rgba(251, 191, 36, 0.2);
            border: 2px solid #fbbf24;
            color: #fbbf24;
        }

        .game-history {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 16px;
            margin-top: 24px;
        }

        .history-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #ffd700;
        }

        .history-items {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .history-item {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }

        .history-player {
            background: #22c55e;
            color: white;
        }

        .history-banker {
            background: #dc2626;
            color: white;
        }

        .history-tie {
            background: #fbbf24;
            color: #000;
        }

        @media (max-width: 1024px) {
            .main-wrapper {
                grid-template-columns: 1fr;
            }
            
            .sidebar, .right-sidebar {
                display: none;
            }
            
            .header-search {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .nav-menu {
                flex-wrap: wrap;
            }
            
            .nav-menu a {
                padding: 12px 16px;
                font-size: 14px;
            }
            
            .banner-grid {
                grid-template-columns: 1fr;
            }
            
            .guarantee-card {
                flex-direction: column;
                text-align: center;
            }
        }
/* 댓글 시스템 스타일 */
.comments-section {
    margin-top: 30px;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 8px;
    border: 1px solid #e9ecef;
}

.comments-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 15px;
    border-bottom: 2px solid #e9ecef;
}

.comments-title {
    font-size: 18px;
    font-weight: 600;
    color: #212529;
}

.comment-write-box {
    background: white;
    padding: 15px;
    border-radius: 8px;
    border: 1px solid #dee2e6;
    margin-bottom: 20px;
}

.comment-textarea {
    width: 100%;
    min-height: 80px;
    padding: 10px;
    border: 1px solid #dee2e6;
    border-radius: 6px;
    resize: vertical;
    font-size: 14px;
    font-family: inherit;
}

.comment-submit-btn {
    margin-top: 10px;
    padding: 8px 20px;
    background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
}

.comment-item {
    padding: 15px;
    background: white;
    border-radius: 8px;
    margin-bottom: 10px;
    border: 1px solid #e9ecef;
}

.comment-item.deleted {
    opacity: 0.6;
}

.comment-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 8px;
}

.comment-author {
    font-weight: 600;
    color: #212529;
}

.comment-date {
    font-size: 12px;
    color: #6c757d;
}

.comment-delete-btn {
    margin-left: auto;
    padding: 2px 8px;
    background: #dc2626;
    color: white;
    border: none;
    border-radius: 4px;
    font-size: 12px;
    cursor: pointer;
}

.comment-content {
    color: #495057;
    line-height: 1.6;
    margin-bottom: 10px;
}

.comment-actions {
    display: flex;
    gap: 10px;
    align-items: center;
}

.comment-vote-btn {
    padding: 4px 12px;
    background: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 20px;
    cursor: pointer;
    font-size: 13px;
    transition: all 0.2s;
}

.comment-vote-btn.active {
    background: #e3f2fd;
    border-color: #2196f3;
    color: #1976d2;
}

.comment-reply-btn {
    padding: 4px 12px;
    background: transparent;
    border: 1px solid #dee2e6;
    border-radius: 6px;
    cursor: pointer;
    font-size: 13px;
    color: #495057;
}

.comment-replies {
    margin-left: 40px;
    margin-top: 10px;
    padding-left: 20px;
    border-left: 2px solid #e9ecef;
}

.reply-form {
    margin-top: 10px;
    padding: 10px;
    background: #f8f9fa;
    border-radius: 6px;
}

.reply-input {
    width: 100%;
    min-height: 60px;
    padding: 8px;
    border: 1px solid #dee2e6;
    border-radius: 4px;
    font-size: 13px;
    margin-bottom: 8px;
}

.comments-empty {
    text-align: center;
    padding: 40px;
    color: #6c757d;
}

/* 게시글 상세보기 페이지 스타일 */
.post-view-container {
    max-width: 900px;
    margin: 0 auto;
}

.post-view-header {
    border-bottom: 2px solid #e9ecef;
    padding-bottom: 20px;
    margin-bottom: 30px;
}

.post-view-title {
    font-size: 28px;
    font-weight: 700;
    color: #212529;
    margin: 20px 0;
}

.post-view-info {
    display: flex;
    gap: 20px;
    color: #6c757d;
    font-size: 14px;
}

.post-view-info strong {
    color: #495057;
}

.post-view-content {
    font-size: 16px;
    line-height: 1.8;
    color: #495057;
    min-height: 300px;
    padding: 30px 0;
    border-bottom: 1px solid #e9ecef;
}

.post-view-actions {
    padding: 20px 0;
    border-bottom: 2px solid #e9ecef;
}

/* 반응형 */
@media (max-width: 768px) {
    .post-view-container {
        padding: 0 15px;
    }
    
    .post-view-title {
        font-size: 22px;
    }
    
    .post-view-info {
        flex-wrap: wrap;
        gap: 10px;
    }
}

/* 마이페이지 스타일 */
.mypage-container {
    max-width: 1200px;
    margin: 0 auto;
}

.mypage-header {
    background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
    padding: 30px;
    border-radius: 12px;
    color: white;
    margin-bottom: 30px;
}

.mypage-user-info {
    display: flex;
    align-items: center;
    gap: 20px;
}

.mypage-avatar {
    width: 80px;
    height: 80px;
    background: #dc2626;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 36px;
    font-weight: bold;
}

.mypage-user-details h2 {
    margin: 0 0 10px 0;
    font-size: 28px;
}

.mypage-stats {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 15px;
    margin-top: 20px;
}

.stat-box {
    background: rgba(255,255,255,0.1);
    padding: 15px;
    border-radius: 8px;
    text-align: center;
}

.stat-box .stat-value {
    font-size: 24px;
    font-weight: bold;
    color: #ffd700;
}

.stat-box .stat-label {
    font-size: 14px;
    opacity: 0.8;
    margin-top: 5px;
}

.mypage-tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    border-bottom: 2px solid #e9ecef;
}

.mypage-tab {
    padding: 12px 24px;
    background: none;
    border: none;
    font-size: 16px;
    font-weight: 500;
    color: #6c757d;
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
}

.mypage-tab.active {
    color: #dc2626;
}

.mypage-tab.active::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    right: 0;
    height: 3px;
    background: #dc2626;
}

.mypage-tab-content {
    display: none;
}

.mypage-tab-content.active {
    display: block;
}

.mypage-empty {
    text-align: center;
    padding: 60px;
    color: #6c757d;
}

.mypage-post-item {
    padding: 16px;
    background: #f8f9fa;
    border-radius: 8px;
    margin-bottom: 12px;
    cursor: pointer;
    transition: all 0.2s;
}

.mypage-post-item:hover {
    background: #e9ecef;
    transform: translateX(5px);
}

.mypage-post-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.mypage-post-title {
    font-size: 16px;
    font-weight: 500;
    color: #212529;
}

.mypage-post-meta {
    font-size: 13px;
    color: #6c757d;
}

.mypage-post-stats {
    display: flex;
    gap: 15px;
    font-size: 13px;
    color: #6c757d;
}

.point-history-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px;
    border-bottom: 1px solid #e9ecef;
}

.point-history-item:last-child {
    border-bottom: none;
}

.point-history-info {
    flex: 1;
}

.point-history-reason {
    font-size: 15px;
    color: #212529;
    margin-bottom: 4px;
}

.point-history-date {
    font-size: 13px;
    color: #6c757d;
}

.point-history-amount {
    font-size: 18px;
    font-weight: 600;
}

.point-history-amount.plus {
    color: #22c55e;
}

.point-history-amount.minus {
    color: #dc2626;
}

.mypage-comment-item {
    padding: 16px;
    background: #f8f9fa;
    border-radius: 8px;
    margin-bottom: 12px;
}

.mypage-comment-post {
    font-size: 13px;
    color: #dc2626;
    margin-bottom: 8px;
}

.mypage-comment-content {
    font-size: 14px;
    color: #495057;
    margin-bottom: 8px;
}

.mypage-comment-meta {
    display: flex;
    justify-content: space-between;
    font-size: 13px;
    color: #6c757d;
}

/* 검색 기능 스타일 */
.search-result-item {
    padding: 16px;
    border: 1px solid #e9ecef;
    border-radius: 8px;
    margin-bottom: 12px;
    cursor: pointer;
    transition: all 0.2s;
}

.search-result-item:hover {
    background: #f8f9fa;
    border-color: #dc2626;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
}

.search-result-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.search-result-title {
    font-size: 16px;
    font-weight: 500;
    color: #212529;
}

.search-result-board {
    font-size: 12px;
    padding: 4px 8px;
    background: #e9ecef;
    border-radius: 4px;
    color: #495057;
}

.search-result-content {
    font-size: 14px;
    color: #6c757d;
    margin-bottom: 8px;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
}

.search-result-meta {
    display: flex;
    gap: 15px;
    font-size: 13px;
    color: #6c757d;
}

.search-highlight {
    background: #fff3cd;
    color: #856404;
    font-weight: 600;
    padding: 0 2px;
}

.search-empty {
    text-align: center;
    padding: 60px;
    color: #6c757d;
}

.search-stats {
    padding: 12px;
    background: #f8f9fa;
    border-radius: 6px;
    margin-bottom: 20px;
    font-size: 14px;
    color: #495057;
}

/* 파일 업로드 관련 스타일 */
.file-preview {
    margin-top: 10px;
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

.file-preview-item {
    position: relative;
    display: inline-block;
}

.file-preview-item img {
    width: 100px;
    height: 100px;
    object-fit: cover;
    border-radius: 8px;
    border: 1px solid #dee2e6;
}

.file-preview-item .file-info {
    padding: 10px;
    background: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 8px;
    font-size: 12px;
    max-width: 200px;
}

.file-preview-item .remove-file {
    position: absolute;
    top: -5px;
    right: -5px;
    background: #dc2626;
    color: white;
    border: none;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    cursor: pointer;
}

.post-attachments {
    margin-top: 20px;
    padding: 16px;
    background: #f8f9fa;
    border-radius: 8px;
}

.attachment-item {
    display: inline-block;
    margin: 5px;
    padding: 8px 12px;
    background: white;
    border: 1px solid #dee2e6;
    border-radius: 6px;
    cursor: pointer;
}

/* 페이지네이션 스타일 */
.pagination {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 5px;
    margin-top: 30px;
    padding: 20px 0;
}

.pagination-btn {
    padding: 8px 12px;
    border: 1px solid #dee2e6;
    background: #fff;
    color: #495057;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s;
    border-radius: 4px;
    min-width: 40px;
    text-align: center;
}

.pagination-btn:hover:not(.active):not(:disabled) {
    background: #f8f9fa;
    border-color: #dc2626;
    color: #dc2626;
}

.pagination-btn.active {
    background: #dc2626;
    color: white;
    border-color: #dc2626;
    font-weight: 600;
}

.pagination-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.pagination-dots {
    padding: 8px;
    color: #6c757d;
}

.pagination-info {
    font-size: 13px;
    color: #6c757d;
    margin-left: 15px;
}

/* 게시글 수정 스타일 */
.edit-btn {
    padding: 6px 12px;
    background: #28a745;
    color: white;
    border: none;
    border-radius: 4px;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.2s;
}

.edit-btn:hover {
    background: #218838;
}

.post-actions {
    display: flex;
    gap: 10px;
    margin-top: 15px;
}

.edit-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 10000;
    display: none;
}

.edit-modal-content {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    padding: 30px;
    border-radius: 12px;
    width: 600px;
    max-width: 90%;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
}

.edit-modal-header {
    margin-bottom: 20px;
}

.edit-modal-header h3 {
    margin: 0;
    color: #212529;
}

.edit-form-group {
    margin-bottom: 16px;
}

.edit-form-label {
    display: block;
    margin-bottom: 6px;
    font-size: 14px;
    font-weight: 500;
    color: #212529;
}

.edit-form-control {
    width: 100%;
    padding: 10px 12px;
    border: 1px solid #dee2e6;
    border-radius: 6px;
    font-size: 14px;
    transition: border-color 0.2s;
}

.edit-form-control:focus {
    outline: none;
    border-color: #28a745;
    box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.1);
}

.edit-form-textarea {
    resize: vertical;
    min-height: 150px;
}

.edit-modal-actions {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
    margin-top: 20px;
}

/* 알림 시스템 스타일 */
.notification-container {
    position: relative;
}

.notification-btn {
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    position: relative;
    padding: 8px;
    transition: transform 0.2s;
}

.notification-btn:hover {
    transform: scale(1.1);
}

.notification-badge {
    position: absolute;
    top: 0;
    right: 0;
    background: #dc2626;
    color: white;
    font-size: 11px;
    font-weight: 600;
    padding: 2px 6px;
    border-radius: 10px;
    min-width: 18px;
    text-align: center;
    animation: badgePulse 2s ease-in-out infinite;
}

@keyframes badgePulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

.notification-dropdown {
    position: absolute;
    top: 100%;
    right: -50px;
    width: 350px;
    background: white;
    border: 1px solid #e9ecef;
    border-radius: 12px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.15);
    z-index: 1001;
    margin-top: 10px;
}

.notification-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    border-bottom: 1px solid #e9ecef;
}

.notification-header h3 {
    margin: 0;
    font-size: 18px;
    font-weight: 600;
}

.mark-all-read {
    background: none;
    border: none;
    color: #2563eb;
    font-size: 13px;
    cursor: pointer;
    font-weight: 500;
}

.notification-list {
    max-height: 400px;
    overflow-y: auto;
}

.notification-item {
    padding: 16px 20px;
    border-bottom: 1px solid #f1f3f5;
    cursor: pointer;
    transition: background 0.2s;
}

.notification-item:hover {
    background: #f8f9fa;
}

.notification-item.unread {
    background: #f0f9ff;
    border-left: 3px solid #2563eb;
}

.notification-message {
    font-size: 14px;
    color: #212529;
    margin-bottom: 4px;
}

.notification-time {
    font-size: 12px;
    color: #6c757d;
}

.notification-empty {
    padding: 40px;
    text-align: center;
    color: #6c757d;
    font-size: 14px;
}

/* 스크롤바 스타일 */
.notification-list::-webkit-scrollbar {
    width: 6px;
}

.notification-list::-webkit-scrollbar-track {
    background: #f1f3f5;
}

.notification-list::-webkit-scrollbar-thumb {
    background: #dee2e6;
    border-radius: 3px;
}

/* 출석체크 스타일 */
.attendances-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.7);
    z-index: 10000;
}

.attendances-content {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    padding: 30px;
    border-radius: 16px;
    width: 600px;
    max-width: 90%;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
}

.attendances-header {
    text-align: center;
    margin-bottom: 25px;
}

.attendances-title {
    font-size: 28px;
    font-weight: 700;
    color: #212529;
    margin-bottom: 10px;
}

.attendances-subtitle {
    font-size: 16px;
    color: #6c757d;
}

.attendances-calendar {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 8px;
    margin-bottom: 25px;
}

.calendar-day {
    aspect-ratio: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid #e9ecef;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 600;
    position: relative;
    transition: all 0.2s;
}

.calendar-day.checked {
    background: #dcfce7;
    border-color: #16a34a;
    color: #16a34a;
}

.calendar-day.today {
    background: #fff3cd;
    border-color: #fbbf24;
    color: #92400e;
    cursor: pointer;
}

.calendar-day.today:hover {
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(251, 191, 36, 0.3);
}

.calendar-day.future {
    opacity: 0.4;
}

.attendances-streak {
    text-align: center;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 12px;
    margin-bottom: 20px;
}

.streak-number {
    font-size: 48px;
    font-weight: 700;
    color: #dc2626;
    margin-bottom: 5px;
}

.attendances-reward {
    text-align: center;
    padding: 15px;
    background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
    border-radius: 8px;
    color: #000;
    font-weight: 600;
    margin-bottom: 20px;
}

/* 포인트 상점 스타일 */
.shop-modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.7);
    z-index: 10000;
}

.shop-content {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    padding: 30px;
    border-radius: 16px;
    width: 800px;
    max-width: 90%;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
}

.shop-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 2px solid #e9ecef;
}

.shop-title {
    font-size: 24px;
    font-weight: 700;
    color: #212529;
}

.shop-balance {
    font-size: 20px;
    font-weight: 600;
    color: #ffd700;
}

.shop-tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
}

.shop-tab {
    padding: 10px 20px;
    background: #f8f9fa;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 500;
    transition: all 0.2s;
}

.shop-tab.active {
    background: #dc2626;
    color: white;
}

.shop-items {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 15px;
}

.shop-item {
    background: #f8f9fa;
    border: 2px solid #e9ecef;
    border-radius: 12px;
    padding: 20px;
    text-align: center;
    transition: all 0.2s;
    cursor: pointer;
}

.shop-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    border-color: #dc2626;
}

.shop-item.owned {
    background: #dcfce7;
    border-color: #16a34a;
    cursor: default;
}

.shop-item-icon {
    font-size: 48px;
    margin-bottom: 10px;
}

.shop-item-name {
    font-size: 16px;
    font-weight: 600;
    color: #212529;
    margin-bottom: 5px;
}

.shop-item-desc {
    font-size: 13px;
    color: #6c757d;
    margin-bottom: 10px;
}

.shop-item-price {
    font-size: 18px;
    font-weight: 700;
    color: #dc2626;
}

/* 레벨 시스템 스타일 */
.level-badge {
    display: inline-block;
    padding: 2px 8px;
    background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
    color: white;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 600;
    margin-left: 5px;
}

.level-progress {
    width: 100%;
    height: 8px;
    background: #e9ecef;
    border-radius: 4px;
    overflow: hidden;
    margin-top: 5px;
}

.level-progress-bar {
    height: 100%;
    background: linear-gradient(90deg, #8b5cf6 0%, #7c3aed 100%);
    transition: width 0.3s ease;
}

.level-info {
    display: flex;
    justify-content: space-between;
    font-size: 12px;
    color: #6c757d;
    margin-top: 5px;
}

/* 유저 프로필 뱃지 */
.user-badges {
    display: flex;
    gap: 5px;
    margin-top: 5px;
}

.badge-icon {
    font-size: 16px;
    filter: grayscale(0);
}

/* 퀵메뉴 스타일 */
.quick-menu {
    display: flex;
    gap: 10px;
    margin-top: 15px;
}

.quick-menu-btn {
    flex: 1;
    padding: 8px;
    background: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 6px;
    font-size: 12px;
    cursor: pointer;
    transition: all 0.2s;
    text-align: center;
}

.quick-menu-btn:hover {
    background: #e9ecef;
    transform: translateY(-1px);
}

.quick-menu-btn .icon {
    font-size: 20px;
    margin-bottom: 3px;
    display: block;
}

/* 상점에서 구매한 뱃지 표시 */
.badge-showcase {
    display: flex;
    gap: 8px;
    padding: 10px;
    background: #f8f9fa;
    border-radius: 8px;
    margin-bottom: 15px;
}

.badge-slot {
    width: 40px;
    height: 40px;
    border: 2px dashed #dee2e6;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    cursor: pointer;
    transition: all 0.2s;
}

.badge-slot:hover {
    background: #e9ecef;
    border-color: #adb5bd;
}

.badge-slot.filled {
    border-style: solid;
    background: white;
}

/* 모바일 메뉴 버튼 */
.mobile-menu-btn {
    display: none;
    background: none;
    border: none;
    font-size: 24px;
    cursor: pointer;
    padding: 10px;
}

/* 모바일 메뉴 */
.mobile-menu {
    display: block;
    position: fixed;
    top: 0;
    left: -100%;
    width: 80%;
    max-width: 300px;
    height: 100vh;
    background: #1a1a1a;
    box-shadow: 2px 0 20px rgba(0,0,0,0.8);
    transition: left 0.3s ease;
    z-index: 10001;
    overflow-y: auto;
}

.mobile-menu.active {
    left: 0;
}

.mobile-menu-header {
    background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
    color: white;
    padding: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid #333;
}

.mobile-menu-close {
    background: none;
    border: none;
    color: white;
    font-size: 24px;
    cursor: pointer;
    transition: transform 0.2s;
}

.mobile-menu-close:hover {
    transform: rotate(90deg);
}

.mobile-menu-list {
    list-style: none;
    padding: 0;
    margin: 0;
    background: #1a1a1a;
}

.mobile-menu-list li {
    border-bottom: 1px solid #333;
}

.mobile-menu-list li:first-child {
    background: #0d0d0d;
    border-bottom: 2px solid #dc2626;
}

.mobile-menu-list a {
    display: block;
    padding: 15px 20px;
    color: #d4d4d4;
    text-decoration: none;
    font-size: 16px;
    transition: all 0.2s ease;
}

.mobile-menu-list a:hover {
    background: rgba(220, 38, 38, 0.1);
    color: #ff4444;
    padding-left: 25px;
}
/* 모바일 오버레이 */
.mobile-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.8);
    z-index: 10000;
    backdrop-filter: blur(5px);
}

.mobile-overlay.active {
    display: block;
}

/* 모바일 반응형 수정 */
@media (max-width: 768px) {
    body {
        font-size: 12px; /* 기본 폰트 크기 줄임 */
    }
    
    .mobile-menu-btn {
        display: block;
    }
    
    .nav-bar {
        display: none;
    }
    
    .header-main {
        padding: 15px;
    }
    
    .logo-text {
        font-size: 20px; /* 로고 텍스트 크기 줄임 */
    }
    
    .main-wrapper {
        grid-template-columns: 1fr;
        padding: 15px;
        gap: 15px;
    }
    
    .vertical-banner {
        display: none !important;
    }
    
    /* 테이블 반응형 */
    .board-table {
        font-size: 11px; /* 테이블 폰트 크기 줄임 */
    }
    
    .board-table th,
    .board-table td {
        padding: 8px 4px; /* 패딩 줄임 */
        white-space: nowrap; /* 텍스트 줄바꿈 방지 */
        overflow: hidden;
        text-overflow: ellipsis;
    }
    
    .board-table .title {
        max-width: 150px; /* 제목 최대 너비 설정 */
    }
    
    /* 뱃지 크기 조정 */
    .badge,
    .status-badge {
        font-size: 10px;
        padding: 1px 4px;
    }
    
    /* 버튼 크기 조정 */
    .btn,
    .vote-btn {
        font-size: 11px;
        padding: 4px 8px;
    }
    
    /* 폼 요소 크기 조정 */
    .form-control {
        font-size: 12px;
        padding: 8px 10px;
    }
    
    /* 섹션 타이틀 크기 조정 */
    .section-title {
        font-size: 16px;
    }
    
    /* 게임 컨테이너 조정 */
    .game-container {
        padding: 16px;
    }
    
    .bet-option {
        padding: 12px;
    }
    
    .bet-title {
        font-size: 14px;
    }
    
    .bet-chip {
        width: 50px;
        height: 50px;
        font-size: 10px;
    }
    
    /* 카드 크기 조정 */
    .card {
        width: 40px;
        height: 56px;
        font-size: 12px;
    }
    
    /* 댓글 섹션 조정 */
    .comment-item {
        font-size: 12px;
        padding: 10px;
    }
    
    .comment-author {
        font-size: 12px;
    }
    
    .comment-date {
        font-size: 10px;
    }
    
    /* 페이지네이션 조정 */
    .pagination-btn {
        font-size: 12px;
        padding: 6px 10px;
        min-width: 32px;
    }
    
    /* 마이페이지 조정 */
    .mypage-avatar {
        width: 60px;
        height: 60px;
        font-size: 28px;
    }
    
    .mypage-stats {
        grid-template-columns: 1fr 1fr;
    }
    
    .stat-box {
        padding: 10px;
    }
    
    .stat-value {
        font-size: 18px;
    }
    
    .stat-label {
        font-size: 11px;
    }
    
    /* 보증사이트 카드 조정 */
    .guarantee-card {
        flex-direction: column;
        text-align: center;
        padding: 16px;
    }
    
    .guarantee-logo {
        width: 150px;
        height: 80px;
        margin: 0 auto 16px;
    }
    
    .guarantee-info h3 {
        font-size: 16px;
    }
    
    .guarantee-info p {
        font-size: 12px;
    }
    
    /* 웰컴 배너 조정 */
    .welcome-banner {
        padding: 24px 16px;
    }
    
    .welcome-title {
        font-size: 20px;
    }
    
    .welcome-subtitle {
        font-size: 14px;
    }
    
    .welcome-description {
        font-size: 12px;
    }
    
    /* 배너 광고 조정 */
    .banner-grid {
        grid-template-columns: 1fr;
    }
    
    .banner-ad {
        padding: 16px;
    }
    
    .banner-title {
        font-size: 16px;
    }
    
    .banner-bonus {
        font-size: 24px;
    }
    
    .banner-code {
        font-size: 12px;
    }
    
    /* 게시글 상세 조정 */
    .post-view-title {
        font-size: 20px;
    }
    
    .post-view-info {
        font-size: 12px;
        flex-wrap: wrap;
        gap: 8px;
    }
    
    .post-view-content {
        font-size: 14px;
    }
    
    /* 알림 드롭다운 조정 */
    .notification-dropdown {
        width: 280px;
        right: -20px;
    }
    
    .notification-header h3 {
        font-size: 16px;
    }
    
    .notification-message {
        font-size: 12px;
    }
    
    .notification-time {
        font-size: 10px;
    }
    
    /* 상점 모달 조정 */
    .shop-items {
        grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
        gap: 10px;
    }
    
    .shop-item {
        padding: 16px;
    }
    
    .shop-item-icon {
        font-size: 36px;
    }
    
    .shop-item-name {
        font-size: 14px;
    }
    
    .shop-item-desc {
        font-size: 11px;
    }
    
    .shop-item-price {
        font-size: 14px;
    }
}

/* 더 작은 화면 (360px 이하) */
@media (max-width: 360px) {
    body {
        font-size: 11px;
    }
    
    .logo-text {
        font-size: 18px;
    }
    
    .board-table {
        font-size: 10px;
    }
    
    .board-table th,
    .board-table td {
        padding: 6px 2px;
    }
    
    .section-title {
        font-size: 14px;
    }
    
    .welcome-title {
        font-size: 18px;
    }
    
    .welcome-subtitle {
        font-size: 12px;
    }
    
    .btn,
    .vote-btn {
        font-size: 10px;
        padding: 3px 6px;
    }
    
    /* 테이블 칼럼 숨기기 */
    .board-table th:nth-child(4),
    .board-table td:nth-child(4),
    .board-table th:nth-child(5),
    .board-table td:nth-child(5) {
        display: none; /* 날짜와 조회수 칼럼 숨김 */
    }
}

/* 태블릿 크기 (768px ~ 1024px) */
@media (min-width: 769px) and (max-width: 1024px) {
    body {
        font-size: 13px;
    }
    
    .main-wrapper {
        grid-template-columns: 220px 1fr 280px;
        gap: 16px;
        padding: 16px;
    }
    
    .section-title {
        font-size: 18px;
    }
    
    .board-table {
        font-size: 12px;
    }
    
    .board-table th,
    .board-table td {
        padding: 10px 8px;
    }
    
    .vertical-banner {
        width: 100px;
        padding: 16px 8px;
    }
    
    .vertical-banner-icon {
        font-size: 28px;
    }
    
    .vertical-banner-title {
        font-size: 12px;
    }
    
    .vertical-banner-text {
        font-size: 11px;
    }
}

/* 중간 크기 화면 조정 (1024px ~ 1400px) */
@media (min-width: 1025px) and (max-width: 1400px) {
    .container {
        max-width: 100%;
    }
    
    .main-wrapper {
        grid-template-columns: 250px 1fr 300px;
        max-width: 100%;
        padding: 20px 16px;
    }
    
    .header-main {
        padding: 16px;
    }
    
    .vertical-banner {
        display: none;
    }
}

/* 반응형 테이블 스크롤 */
@media (max-width: 600px) {
    .board-table {
        display: block;
        overflow-x: auto;
        white-space: nowrap;
        -webkit-overflow-scrolling: touch;
    }
    
    .board-table::-webkit-scrollbar {
        height: 6px;
    }
    
    .board-table::-webkit-scrollbar-track {
        background: #f1f3f5;
    }
    
    .board-table::-webkit-scrollbar-thumb {
        background: #dee2e6;
        border-radius: 3px;
    }
}

/* 글씨 크기 자동 조정을 위한 뷰포트 단위 사용 */
@media (max-width: 768px) {
    html {
        font-size: calc(10px + 0.5vw); /* 뷰포트 너비에 따라 글씨 크기 조정 */
    }
    
    .logo-text {
        font-size: calc(16px + 2vw);
    }
    
    .section-title {
        font-size: calc(14px + 1vw);
    }
    
    .board-table {
        font-size: calc(9px + 0.5vw);
    }
}

/* 작은 화면에서도 배너 유지하면서 크기 조정 */
@media (max-width: 480px) {
    /* 배너 그리드 유지하되 크기 조정 */
    .banner-grid {
        grid-template-columns: 1fr; /* 한 줄에 하나씩 */
        gap: 10px;
    }
    
    .banner-ad {
        padding: 12px;
        min-height: 80px;
    }
    
    .banner-title {
        font-size: 0.9rem;
    }
    
    .banner-bonus {
        font-size: 1.2rem;
    }
    
    .banner-code {
        font-size: 0.7rem;
        padding: 2px 6px;
    }
    
    /* 웰컴 배너도 유지하되 크기 조정 */
    .welcome-banner {
        padding: 20px 10px;
        margin: -10px -5px 15px;
    }
    
    .welcome-title {
        font-size: 1.2rem;
    }
    
    .welcome-subtitle {
        font-size: 0.9rem;
    }
    
    .welcome-description {
        font-size: 0.8rem;
        display: none; /* 설명은 숨김 */
    }
}

/* 극소형 화면 (320px 이하) */
@media (max-width: 320px) {
    /* 배너 최소 크기 보장 */
    .banner-ad {
        font-size: 10px;
        padding: 8px;
        min-height: 60px;
    }
    
    .banner-title {
        font-size: 11px;
    }
    
    .banner-bonus {
        font-size: 14px;
    }
    
    .banner-code {
        font-size: 9px;
    }
    
    /* 배너 이미지가 있을 경우 크기 조정 */
    .banner-ad img {
        max-height: 60px;
    }
}


/* 스크롤 방지 */
@media (max-width: 480px) {
    body {
        min-width: 280px;
    }
    
    /* 헤더 조정 */
    .header-main {
        padding: 10px 5px;
        justify-content: space-between;
    }
    
    .logo {
        flex: 0 0 auto;
    }
    
    .logo-text {
        font-size: clamp(14px, 4vw, 20px); /* 반응형 폰트 크기 */
    }
    
    .logo-image {
        width: clamp(25px, 8vw, 40px); /* 반응형 이미지 크기 */
        height: clamp(25px, 8vw, 40px);
    }
}





/* 모바일 배너 그리드 오버라이드 */
@media (max-width: 768px) {
    .banner-grid {
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 10px !important;
    }
}

@media (max-width: 480px) {
    .banner-grid {
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 8px !important;
    }
}

</style>


 
</head>

<body>

 <!-- 모바일 메뉴 -->
    <div class="mobile-overlay" onclick="closeMobileMenu()"></div>
    <div class="mobile-menu" id="mobileMenu">
        <div class="mobile-menu-header">
            <span style="font-size: 20px; font-weight: bold;">5 DRAGONS</span>
            <button class="mobile-menu-close" onclick="closeMobileMenu()">✕</button>
        </div>
       <ul class="mobile-menu-list">
<li id="mobileLoginStatus" style="background: #f8f9fa; padding: 15px 20px; font-weight: bold; text-align: center; border-bottom: 2px solid #dc2626;">
        <button onclick="openLoginModal()" style="padding: 8px 20px; background: #dc2626; color: white; border: none; border-radius: 4px;">로그인</button>
</li>

            <li><a href="#guarantee" onclick="showPage('guarantee', event); closeMobileMenu()">💎보증사이트💎</a></li>
            <li><a href="#verify" onclick="showPage('verify', event); closeMobileMenu()">먹튀검증</a></li>
            <li>
    <a href="#" onclick="toggleMobileDropdown3(event)">홍보센터 <span style="float: right;">▼</span></a>
    <div class="mobile-dropdown" id="promotionDropdown">
        <a href="#general-promo" onclick="showPage('general-promo', event); closeMobileMenu()">일반홍보</a>
        <a href="#free-money" onclick="showPage('free-money', event); closeMobileMenu()">꽁머니홍보</a>
    </div>
</li>
            <li>
                <a href="#" onclick="toggleMobileDropdown(event)">커뮤니티 <span style="float: right;">▼</span></a>
                <div class="mobile-dropdown" id="communityDropdown">
                    <a href="#onca" onclick="showPage('onca', event); closeMobileMenu()">온카후기</a>
                    <a href="#offca" onclick="showPage('offca', event); closeMobileMenu()">오프후기</a>
                    <a href="#entertainment" onclick="showPage('entertainment', event); closeMobileMenu()">유흥후기</a>
                    <a href="#freeboard" onclick="showPage('freeboard', event); closeMobileMenu()">자유게시판</a>
                    <a href="#blacklist" onclick="showPage('blacklist', event); closeMobileMenu()">블랙리스트</a>
                </div>
            </li>
            <li><a href="#minigame" onclick="showPage('minigame', event); closeMobileMenu()">미니게임</a></li>
<li>
    <a href="#" onclick="toggleMobileDropdown2(event)">고객센터 <span style="float: right;">▼</span></a>
    <div class="mobile-dropdown" id="supportDropdown">
        <a href="#notice" onclick="showPage('notice', event); closeMobileMenu()">공지사항</a>
        <a href="#inquiry" onclick="showPage('inquiry', event); closeMobileMenu()">1:1 문의</a>
    </div>
</li>
<li><a href="#mypage" onclick="showPage('mypage', event); closeMobileMenu()">마이페이지</a></li>
            <li><a href="#" onclick="openattendances(); closeMobileMenu()">📅 출석체크</a></li>
            <li><a href="#" onclick="openShop(); closeMobileMenu()">🛍️ 포인트상점</a></li>
        </ul>
    </div>

  


    <!-- 좌측 텔레그램 배너 -->
    <div class="vertical-banner left" onclick="window.open('https://t.me/5dragons', '_blank')">
        <div class="vertical-banner-icon">💬</div>
        <div class="vertical-banner-title">공식 텔레그램</div>
        <div class="vertical-banner-text">24시간 실시간<br>고객 상담</div>
    </div>

    <!-- 우측 제보 보상 배너 -->
    <div class="vertical-banner right" onclick="alert('먹튀 제보 페이지로 이동 - 데모용')">
        <div class="vertical-banner-icon">💰</div>
        <div class="vertical-banner-title">먹튀 제보</div>
        <div class="vertical-banner-text">최초 제보<br>현금 즉시지급!</div>
    </div>

    <div class="container">
        <header class="header">
            <div class="top-bar">
                <div class="top-bar-content">
                    <div style="color: #6c757d; font-size: 13px;">
                        믿을 수 있는 먹튀검증 커뮤니티
                    </div>
                    <div class="login-links">
                        <a href="#" onclick="openLoginModal()">로그인</a>
                        <a href="#" onclick="openSignupModal()">회원가입</a>
                    </div>
                </div>
            </div>
            
            <div class="header-main">
    <button class="mobile-menu-btn" onclick="openMobileMenu()">☰</button>
<a href="#home" class="logo" onclick="showPage('home', event)">
    <img src="https://imgur.com/vtb29QZ.png" alt="5 Dragons" class="logo-image">
</a>
    <div style="display: flex; align-items: center; gap: 10px; flex: 1; margin: 0 40px;">
        <div class="header-search" style="flex: 1; margin: 0;">
            <div class="search-box">
                <input type="text" id="headerSearchInput" placeholder="사이트명, 게시글을 검색하세요" onkeypress="if(event.key==='Enter') openSearchModal()">
                <button onclick="openSearchModal()">
                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- 알림 시스템 -->
        <div class="notification-container">
            <button class="notification-btn" onclick="toggleNotifications()">
                🔔
                <span class="notification-badge" id="notificationBadge" style="display: none;">0</span>
            </button>
            
            <div class="notification-dropdown" id="notificationDropdown" style="display: none;">
                <div class="notification-header">
                    <h3>알림</h3>
                    <button onclick="markAllNotificationsAsRead()" class="mark-all-read">모두 읽음</button>
                </div>
                <div class="notification-list" id="notificationList">
                    <div class="notification-empty">새로운 알림이 없습니다</div>
                </div>
            </div>
        </div>
    </div>

    <div style="width: 120px;"></div>
</div>
            
            <nav class="nav-bar">
             <ul class="nav-menu">
    <li><a href="#guarantee" onclick="showPage('guarantee', event)">💎보증사이트💎</a></li>
    <li><a href="#verify" onclick="showPage('verify', event)">먹튀검증</a></li>
    <li class="dropdown">
    <a href="#" onclick="event.preventDefault()">홍보센터</a>
    <div class="dropdown-menu">
        <a href="#general-promo" onclick="showPage('general-promo', event)">일반홍보</a>
        <a href="#free-money" onclick="showPage('free-money', event)">꽁머니홍보</a>
    </div>
</li>
    <li class="dropdown">
        <a href="#" onclick="event.preventDefault()">커뮤니티</a>
        <div class="dropdown-menu">
            <a href="#onca" onclick="showPage('onca', event)">온카후기</a>
            <a href="#offca" onclick="showPage('offca', event)">오프후기</a>
            <a href="#entertainment" onclick="showPage('entertainment', event)">유흥후기</a>
            <a href="#freeboard" onclick="showPage('freeboard', event)">자유게시판</a>
            <a href="#blacklist" onclick="showPage('blacklist', event)">블랙리스트</a>
        </div>
    </li>
    <li><a href="#minigame" onclick="showPage('minigame', event)">미니게임</a></li>
   <li class="dropdown">
    <a href="#" onclick="event.preventDefault()">고객센터</a>
    <div class="dropdown-menu">
        <a href="#notice" onclick="showPage('notice', event)">공지사항</a>
        <a href="#inquiry" onclick="showPage('inquiry', event)">1:1 문의</a>
    </div>
</li>



    <li><a href="#mypage" onclick="showPage('mypage', event)">마이페이지</a></li>
    <li id="adminMenuItem" style="display: none;"><a href="#admin" onclick="showPage('admin', event)">👑 관리자</a></li>
</ul>
            </nav>
        </header>

        <div class="main-wrapper">
            <aside class="sidebar">
                <div class="login-box">
                    <input type="text" placeholder="아이디" id="quickLoginId">
                    <input type="password" placeholder="비밀번호" id="quickLoginPw">
                    <button class="login-btn" onclick="handleQuickLogin()">로그인</button>
                </div>
                
                <div class="sidebar-section">
                    <div class="sidebar-title">
                        <span>👑</span> 회원 랭킹
                    </div>
                    <div class="sidebar-content">
                        <ul class="sidebar-list">
                            <li>
                                <a href="#">
                                    <span style="color: #dc2626; font-weight: 600;">1</span> 
                                    <span style="color: #f59e0b;">★★★</span> 베팅마스터
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <span style="color: #6c757d;">2</span> 
                                    <span style="color: #8b5cf6;">★★☆</span> 토토킹
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <span style="color: #6c757d;">3</span> 
                                    <span style="color: #8b5cf6;">★★☆</span> 럭키가이
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <span style="color: #6c757d;">4</span> 
                                    <span style="color: #10b981;">★☆☆</span> 카지노프로
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </aside>

            <main class="main-content">

<div id="home" class="page active">
                    <div class="welcome-banner">
                        <div class="welcome-content">
                            <h2 class="welcome-title">🐉 5 DRAGONS에 오신 것을 환영합니다! 🐉</h2>
                            <p class="welcome-subtitle">국내 최고가 되고싶은 먹튀검증 커뮤니티</p>
                            <p class="welcome-description">
                                24시간 실시간 먹튀검증, 15억원 보증금 예치, 피해 발생시 100% 보상!<br>
                                믿을 수 있는 안전놀이터만을 선별하여 회원님들께 추천드립니다.
                            </p>
                        </div>
                    </div>

<div class="banner-section">
    <div class="section-title">
        <span>💎</span> 프리미엄 파트너
    </div>
    <div class="banner-grid" id="mainBanners">
        <!-- 동적으로 생성됨 -->
    </div>
</div>

		 </div>
              <div id="guarantee" class="page">
    <div id="guaranteeHeader">
        <!-- 이 부분은 JavaScript로 동적으로 생성됩니다 -->
    </div>
    
    <div id="writeForm-guarantee" class="write-form" style="display: none;">
        <h3 style="margin-bottom: 20px;">보증사이트 등록</h3>
        
        <div class="form-group">
            <label class="form-label">사이트명</label>
            <input type="text" class="form-control" id="guaranteeName" placeholder="예: 베팅왕">
        </div>
        
        <div class="form-group">
            <label class="form-label">보증금</label>
            <input type="text" class="form-control" id="guaranteeDeposit" placeholder="예: 15억원">
        </div>
        
        <div class="form-group">
            <label class="form-label">가입코드</label>
            <input type="text" class="form-control" id="guaranteeCode" placeholder="예: WIN100">
        </div>
        
        <div class="form-group">
            <label class="form-label">보너스</label>
            <input type="text" class="form-control" id="guaranteeBonus" placeholder="예: 첫충 100%">
        </div>
        
        <div class="form-group">
            <label class="form-label">설명</label>
            <textarea class="form-control" id="guaranteeDescription" rows="6" placeholder="보증사이트 설명을 입력하세요"></textarea>
        </div>

<div class="form-group">
    <label class="form-label">로고 GIF URL</label>
    <input type="text" class="form-control" id="guaranteeLogoUrl" placeholder="예: https://example.com/logo.gif">
    <small style="color: #6c757d;">움직이는 GIF 이미지 URL을 입력하세요</small>
</div>

<div class="form-group">
    <label class="form-label">랜딩 이미지 URL</label>
    <input type="text" class="form-control" id="guaranteeLandingImage" placeholder="예: https://example.com/landing.jpg">
    <small style="color: #6c757d;">상세보기 페이지에 표시될 이미지 URL</small>
</div>

<div class="form-group">
    <label class="form-label">사이트 URL</label>
    <input type="text" class="form-control" id="guaranteeSiteUrl" placeholder="예: https://example.com">
</div>
        
        <div style="text-align: right;">
            <button onclick="cancelWrite('guarantee')" class="btn btn-secondary" style="margin-right: 8px;">취소</button>
            <button onclick="submitGuarantee()" class="btn btn-primary">등록</button>
        </div>
    </div>
    
    <div id="guaranteeList">
        <!-- 보증사이트 목록이 여기에 렌더링됩니다 -->
    </div>
</div>

<div id="verify" class="page">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <div class="section-title">
                            <span>🚨</span> 먹튀검증 게시판
                        </div>
                        <button onclick="toggleWriteForm('verify')" class="btn-write">📝 먹튀신고 작성</button>
                    </div>
                    
                    <div id="writeForm-verify" class="write-form" style="display: none;">
                        <h3 style="margin-bottom: 20px;">먹튀신고 작성</h3>
                        
                        <div class="form-group">
                            <label class="form-label">제목</label>
                            <input type="text" class="form-control" id="verifyTitle" placeholder="예: [먹튀신고] XX토토 출금거부 사건">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">사이트명</label>
                            <input type="text" class="form-control" id="verifySite" placeholder="문제가 된 사이트명을 입력하세요">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">피해금액</label>
                            <input type="number" class="form-control" id="verifyAmount" placeholder="피해금액을 입력하세요 (원)">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">신고내용</label>
                            <textarea class="form-control" id="verifyContent" rows="6" placeholder="먹튀 상황을 자세히 설명해주세요. 증거자료가 있다면 함께 기재해주세요."></textarea>
                        </div>

<div class="form-group">
                            <label class="form-label">파일 첨부</label>
                            <input type="file" class="form-control" id="verifyFiles" multiple accept="image/*,.pdf,.doc,.docx" onchange="previewFiles('verify')">
                            <small style="color: #6c757d; font-size: 12px;">증거 스크린샷 등을 첨부하세요 (최대 5개, 각 10MB 이하)</small>
                            <div id="verifyFilePreview" class="file-preview"></div>
                        </div>
                        
                        <div style="text-align: right;">
                            <button onclick="cancelWrite('verify')" class="btn btn-secondary" style="margin-right: 8px;">취소</button>
                            <button onclick="submitPost('verify')" class="btn btn-primary">등록</button>
                        </div>
                    </div>
                    
                    <table class="board-table">
                        <thead>
                            <tr>
                                <th width="60">번호</th>
                                <th>제목</th>
                                <th width="100">신고자</th>
                                <th width="100">날짜</th>
                                <th width="80">상태</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>105</td>
                                <td class="title"><a href="#">[먹튀확정] XX토토 출금 거부</a></td>
                                <td>피해자1</td>
                                <td>2025.06.25</td>
                                <td><span class="status-badge status-confirmed">확정</span></td>
                            </tr>
                            <tr>
                                <td>104</td>
                                <td class="title"><a href="#">[검증요청] YY카지노 이상 결과</a></td>
                                <td>신고자2</td>
                                <td>2025.06.24</td>
                                <td><span class="status-badge status-checking">검증중</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- 일반홍보 페이지 -->
<div id="general-promo" class="page">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <div class="section-title">
            <span>📢</span> 일반홍보 게시판
        </div>
        <button onclick="toggleWriteForm('generalPromo')" class="btn-write">📝 홍보글 작성</button>
    </div>
    
    <div id="writeForm-generalPromo" class="write-form" style="display: none;">
        <h3 style="margin-bottom: 20px;">일반홍보 작성</h3>
        
        <div class="form-group">
            <label class="form-label">제목</label>
            <input type="text" class="form-control" id="generalPromoTitle" placeholder="예: [홍보] OO카지노 신규 이벤트">
        </div>
        
        <div class="form-group">
            <label class="form-label">사이트명</label>
            <input type="text" class="form-control" id="generalPromoSite" placeholder="홍보할 사이트명">
        </div>
        
        <div class="form-group">
            <label class="form-label">내용</label>
            <textarea class="form-control" id="generalPromoContent" rows="8" placeholder="홍보 내용을 자세히 작성해주세요."></textarea>
        </div>
        
        <div class="form-group">
            <label class="form-label">파일 첨부</label>
            <input type="file" class="form-control" id="generalPromoFiles" multiple accept="image/*,.pdf,.doc,.docx" onchange="previewFiles('generalPromo')">
            <small style="color: #6c757d; font-size: 12px;">최대 5개, 각 10MB 이하</small>
            <div id="generalPromoFilePreview" class="file-preview"></div>
        </div>
        
        <div style="text-align: right;">
            <button onclick="cancelWrite('generalPromo')" class="btn btn-secondary" style="margin-right: 8px;">취소</button>
            <button onclick="submitPost('generalPromo')" class="btn btn-primary">등록</button>
        </div>
    </div>
    
    <table class="board-table">
        <thead>
            <tr>
                <th width="60">번호</th>
                <th>제목</th>
                <th width="100">글쓴이</th>
                <th width="100">날짜</th>
                <th width="60">조회</th>
            </tr>
        </thead>
        <tbody id="generalPromo-tbody">
            <!-- 게시글이 여기에 렌더링됩니다 -->
        </tbody>
    </table>
</div>

<!-- 꽁머니홍보 페이지 -->
<div id="free-money" class="page">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <div class="section-title">
            <span>💰</span> 꽁머니홍보 게시판
        </div>
        <button onclick="toggleWriteForm('freeMoney')" class="btn-write">📝 꽁머니 홍보글 작성</button>
    </div>
    
    <div id="writeForm-freeMoney" class="write-form" style="display: none;">
        <h3 style="margin-bottom: 20px;">꽁머니홍보 작성</h3>
        
        <div class="form-group">
            <label class="form-label">제목</label>
            <input type="text" class="form-control" id="freeMoneyTitle" placeholder="예: [꽁머니] OO토토 신규 3만원 지급">
        </div>
        
        <div class="form-group">
            <label class="form-label">사이트명</label>
            <input type="text" class="form-control" id="freeMoneySite" placeholder="꽁머니 제공 사이트명">
        </div>
        
        <div class="form-group">
            <label class="form-label">꽁머니 금액</label>
            <input type="text" class="form-control" id="freeMoneyAmount" placeholder="예: 30,000원">
        </div>
        
        <div class="form-group">
            <label class="form-label">지급 조건</label>
            <input type="text" class="form-control" id="freeMoneyCondition" placeholder="예: 신규가입, 첫충전 등">
        </div>
        
        <div class="form-group">
            <label class="form-label">내용</label>
            <textarea class="form-control" id="freeMoneyContent" rows="8" placeholder="꽁머니 이벤트 상세 내용을 작성해주세요."></textarea>
        </div>
        
        <div class="form-group">
            <label class="form-label">파일 첨부</label>
            <input type="file" class="form-control" id="freeMoneyFiles" multiple accept="image/*,.pdf,.doc,.docx" onchange="previewFiles('freeMoney')">
            <small style="color: #6c757d; font-size: 12px;">최대 5개, 각 10MB 이하</small>
            <div id="freeMoneyFilePreview" class="file-preview"></div>
        </div>
        
        <div style="text-align: right;">
            <button onclick="cancelWrite('freeMoney')" class="btn btn-secondary" style="margin-right: 8px;">취소</button>
            <button onclick="submitPost('freeMoney')" class="btn btn-primary">등록</button>
        </div>
    </div>
    
    <table class="board-table">
        <thead>
            <tr>
                <th width="60">번호</th>
                <th>제목</th>
                <th width="100">꽁머니</th>
                <th width="100">글쓴이</th>
                <th width="100">날짜</th>
                <th width="60">조회</th>
            </tr>
        </thead>
        <tbody id="freeMoney-tbody">
            <!-- 게시글이 여기에 렌더링됩니다 -->
        </tbody>
    </table>
</div>

                <div id="onca" class="page">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <div class="section-title">
                            <span>🎰</span> 온라인카지노 후기
                        </div>
                        <button onclick="toggleWriteForm('onca')" class="btn-write">📝 온카후기 작성</button>
                    </div>
                    
                    <div id="writeForm-onca" class="write-form" style="display: none;">
                        <h3 style="margin-bottom: 20px;">온라인카지노 후기 작성</h3>
                        
                        <div class="form-group">
                            <label class="form-label">제목</label>
                            <input type="text" class="form-control" id="oncaTitle" placeholder="예: [바카라] 에볼루션 10연승 후기">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">사이트명</label>
                            <input type="text" class="form-control" id="oncaSite" placeholder="이용한 온라인카지노 사이트명">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">게임종류</label>
                            <select class="form-control" id="oncaGame">
                                <option value="">게임을 선택하세요</option>
                                <option value="바카라">바카라</option>
                                <option value="블랙잭">블랙잭</option>
                                <option value="룰렛">룰렛</option>
                                <option value="슬롯">슬롯</option>
                                <option value="포커">포커</option>
                                <option value="기타">기타</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">후기내용</label>
                            <textarea class="form-control" id="oncaContent" rows="6" placeholder="온라인카지노 이용 경험을 자세히 써주세요."></textarea>
                        </div>

<div class="form-group">
                            <label class="form-label">파일 첨부</label>
                            <input type="file" class="form-control" id="oncaFiles" multiple accept="image/*,.pdf,.doc,.docx" onchange="previewFiles('onca')">
                            <small style="color: #6c757d; font-size: 12px;">게임 스크린샷 등을 첨부하세요 (최대 5개, 각 10MB 이하)</small>
                            <div id="oncaFilePreview" class="file-preview"></div>
                        </div>
                        
                        <div style="text-align: right;">
                            <button onclick="cancelWrite('onca')" class="btn btn-secondary" style="margin-right: 8px;">취소</button>
                            <button onclick="submitPost('onca')" class="btn btn-primary">등록</button>
                        </div>
                    </div>
                    
                    <table class="board-table">
                        <thead>
                            <tr>
                                <th width="60">번호</th>
                                <th>제목</th>
                                <th width="100">글쓴이</th>
                                <th width="100">날짜</th>
                                <th width="60">조회</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>89</td>
                                <td class="title"><a href="#">[바카라] 에볼루션 10연승!</a></td>
                                <td>lucky_man</td>
                                <td>2025.06.25</td>
                                <td>234</td>
                            </tr>
                            <tr>
                                <td>88</td>
                                <td class="title"><a href="#">[룰렛] 마틴게일 전략 성공</a></td>
                                <td>roulette_king</td>
                                <td>2025.06.24</td>
                                <td>156</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
<div id="offca" class="page">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <div class="section-title">
                            <span>🏢</span> 오프라인카지노 후기
                        </div>
                        <button onclick="toggleWriteForm('offca')" class="btn-write">📝 오프후기 작성</button>
                    </div>
                    
                    <div id="writeForm-offca" class="write-form" style="display: none;">
                        <h3 style="margin-bottom: 20px;">오프라인카지노 후기 작성</h3>
                        
                        <div class="form-group">
                            <label class="form-label">제목</label>
                            <input type="text" class="form-control" id="offcaTitle" placeholder="예: [강원랜드] 블랙잭 후기">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">카지노명</label>
                            <select class="form-control" id="offcaCasino">
                                <option value="">카지노를 선택하세요</option>
                                <option value="강원랜드">강원랜드 (한국)</option>
                                <option value="마카오">마카오 카지노</option>
                                <option value="라스베가스">라스베가스 카지노</option>
                                <option value="싱가포르">싱가포르 카지노</option>
                                <option value="필리핀">필리핀 카지노</option>
                                <option value="캄보디아">캄보디아 카지노</option>
                                <option value="기타">기타</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">게임종류</label>
                            <select class="form-control" id="offcaGame">
                                <option value="">게임을 선택하세요</option>
                                <option value="바카라">바카라</option>
                                <option value="블랙잭">블랙잭</option>
                                <option value="룰렛">룰렛</option>
                                <option value="슬롯머신">슬롯머신</option>
                                <option value="포커">포커</option>
                                <option value="크랩스">크랩스</option>
                                <option value="기타">기타</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">후기내용</label>
                            <textarea class="form-control" id="offcaContent" rows="6" placeholder="오프라인카지노 방문 경험을 자세히 써주세요."></textarea>
                        </div>
                        
<div class="form-group">
                            <label class="form-label">파일 첨부</label>
                            <input type="file" class="form-control" id="offcaFiles" multiple accept="image/*,.pdf,.doc,.docx" onchange="previewFiles('offca')">
                            <small style="color: #6c757d; font-size: 12px;">카지노 사진 등을 첨부하세요 (최대 5개, 각 10MB 이하)</small>
                            <div id="offcaFilePreview" class="file-preview"></div>
                        </div>

                        <div style="text-align: right;">
                            <button onclick="cancelWrite('offca')" class="btn btn-secondary" style="margin-right: 8px;">취소</button>
                            <button onclick="submitPost('offca')" class="btn btn-primary">등록</button>
                        </div>
                    </div>
                    
                    <table class="board-table">
                        <thead>
                            <tr>
                                <th width="60">번호</th>
                                <th>제목</th>
                                <th width="100">글쓴이</th>
                                <th width="100">날짜</th>
                                <th width="60">조회</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>34</td>
                                <td class="title"><a href="#">[강원랜드] 블랙잭 후기</a></td>
                                <td>casino_lover</td>
                                <td>2025.06.23</td>
                                <td>189</td>
                            </tr>
                            <tr>
                                <td>33</td>
                                <td class="title"><a href="#">[마카오] 여행 카지노 후기</a></td>
                                <td>traveler99</td>
                                <td>2025.06.22</td>
                                <td>145</td>
                            </tr>
                        </tbody>
                    </table>
                </div>




                <div id="entertainment" class="page">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <div class="section-title">
                            <span>🌃</span> 유흥후기 게시판
                        </div>
                        <button onclick="toggleWriteForm('entertainment')" class="btn-write">📝 유흥후기 작성</button>
                    </div>
                    
                    <div id="writeForm-entertainment" class="write-form" style="display: none;">
                        <h3 style="margin-bottom: 20px;">유흥후기 작성</h3>
                        
                        <div class="form-group">
                            <label class="form-label">제목</label>
                            <input type="text" class="form-control" id="entertainmentTitle" placeholder="예: [강남] 텐프로 방문 후기">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">업소명</label>
                            <input type="text" class="form-control" id="entertainmentShop" placeholder="방문한 업소명을 입력하세요">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">업소테마</label>
                            <select class="form-control" id="entertainmentTheme">
                                <option value="">업소 테마를 선택하세요</option>
                                <option value="텐프로">텐프로</option>
                                <option value="가라오케">가라오케</option>
                                <option value="룸살롱">룸살롱</option>
                                <option value="클럽">클럽</option>
                                <option value="바/라운지">바/라운지</option>
                                <option value="마사지">마사지</option>
                                <option value="기타">기타</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">지역</label>
                            <select class="form-control" id="entertainmentArea">
                                <option value="">지역을 선택하세요</option>
                                <option value="강남">강남</option>
                                <option value="강북">강북</option>
                                <option value="홍대/신촌">홍대/신촌</option>
                                <option value="건대/성수">건대/성수</option>
                                <option value="이태원">이태원</option>
                                <option value="압구정/청담">압구정/청담</option>
                                <option value="기타서울">기타서울</option>
                                <option value="경기">경기</option>
                                <option value="부산">부산</option>
                                <option value="기타지역">기타지역</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">파트너 예명</label>
                            <input type="text" class="form-control" id="entertainmentPartner" placeholder="파트너 예명 (선택사항)">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">평점</label>
                            <select class="form-control" id="entertainmentRating">
                                <option value="">평점을 선택하세요</option>
                                <option value="5">⭐⭐⭐⭐⭐ (5점) - 매우 만족</option>
                                <option value="4">⭐⭐⭐⭐ (4점) - 만족</option>
                                <option value="3">⭐⭐⭐ (3점) - 보통</option>
                                <option value="2">⭐⭐ (2점) - 불만족</option>
                                <option value="1">⭐ (1점) - 매우 불만족</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">후기내용</label>
                            <textarea class="form-control" id="entertainmentContent" rows="8" placeholder="방문 경험을 자세히 써주세요. (서비스, 가격, 분위기 등)"></textarea>
                        </div>


                        
                        <div style="text-align: right;">
                            <button onclick="cancelWrite('entertainment')" class="btn btn-secondary" style="margin-right: 8px;">취소</button>
                            <button onclick="submitPost('entertainment')" class="btn btn-primary">등록</button>
                        </div>
                    </div>
                    
                    <table class="board-table">
                        <thead>
                            <tr>
                                <th width="60">번호</th>
                                <th width="80">지역</th>
                                <th width="100">업소테마</th>
                                <th>제목</th>
                                <th width="100">글쓴이</th>
                                <th width="100">날짜</th>
                                <th width="60">조회</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>87</td>
                                <td><span class="status-badge" style="background: #fff3cd; color: #856404;">강남</span></td>
                                <td>텐프로</td>
                                <td class="title"><a href="#">[강남] 레X스 방문 후기 (만족)</a></td>
                                <td>night_owl</td>
                                <td>2025.06.26</td>
                                <td>523</td>
                            </tr>
                            <tr>
                                <td>86</td>
                                <td><span class="status-badge" style="background: #d1ecf1; color: #0c5460;">홍대</span></td>
                                <td>가라오케</td>
                                <td class="title"><a href="#">[홍대] 퍼X트 가라오케 솔직후기</a></td>
                                <td>party_king</td>
                                <td>2025.06.25</td>
                                <td>412</td>
                            </tr>
                            <tr>
                                <td>85</td>
                                <td><span class="status-badge" style="background: #f8d7da; color: #721c24;">이태원</span></td>
                                <td>클럽</td>
                                <td class="title"><a href="#">[이태원] 주말 클럽 투어 후기</a></td>
                                <td>clubber</td>
                                <td>2025.06.24</td>
                                <td>356</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div id="freeboard" class="page">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <div class="section-title">
                            <span>💬</span> 자유게시판
                        </div>
                        <button onclick="toggleWriteForm('freeboard')" class="btn-write">📝 글 작성</button>
                    </div>
                    
                    <div id="writeForm-freeboard" class="write-form" style="display: none;">
                        <h3 style="margin-bottom: 20px;">자유게시판 글 작성</h3>
                        
                        <div class="form-group">
                            <label class="form-label">제목</label>
                            <input type="text" class="form-control" id="freeboardTitle" placeholder="제목을 입력하세요">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">카테고리</label>
                            <select class="form-control" id="freeboardCategory">
                                <option value="">카테고리를 선택하세요</option>
                                <option value="일반">일반</option>
                                <option value="질문">질문</option>
                                <option value="정보공유">정보공유</option>
                                <option value="잡담">잡담</option>
                                <option value="기타">기타</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">내용</label>
                            <textarea class="form-control" id="freeboardContent" rows="8" placeholder="자유롭게 글을 작성해주세요."></textarea>
                        </div>

<div class="form-group">
                            <label class="form-label">파일 첨부</label>
                            <input type="file" class="form-control" id="freeboardFiles" multiple accept="image/*,.pdf,.doc,.docx" onchange="previewFiles('freeboard')">
                            <small style="color: #6c757d; font-size: 12px;">최대 5개, 각 10MB 이하</small>
                            <div id="freeboardFilePreview" class="file-preview"></div>
                        </div>
                        
                        <div style="text-align: right;">
                            <button onclick="cancelWrite('freeboard')" class="btn btn-secondary" style="margin-right: 8px;">취소</button>
                            <button onclick="submitPost('freeboard')" class="btn btn-primary">등록</button>
                        </div>
                    </div>
                    
                    <table class="board-table">
                        <thead>
                            <tr>
                                <th width="60">번호</th>
                                <th width="80">카테고리</th>
                                <th>제목</th>
                                <th width="100">글쓴이</th>
                                <th width="100">날짜</th>
                                <th width="60">조회</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>156</td>
                                <td><span class="status-badge" style="background: #e0f2fe; color: #0277bd;">질문</span></td>
                                <td class="title"><a href="#">신규 회원인데 궁금한게 있어요</a></td>
                                <td>newbie123</td>
                                <td>2025.06.27</td>
                                <td>45</td>
                            </tr>
                            <tr>
                                <td>155</td>
                                <td><span class="status-badge" style="background: #f3e5f5; color: #7b1fa2;">잡담</span></td>
                                <td class="title"><a href="#">오늘 운이 정말 좋았네요!</a></td>
                                <td>lucky_day</td>
                                <td>2025.06.26</td>
                                <td>123</td>
                            </tr>
                            <tr>
                                <td>154</td>
                                <td><span class="status-badge" style="background: #e8f5e8; color: #2e7d32;">정보공유</span></td>
                                <td class="title"><a href="#">안전한 사이트 구분법 공유</a></td>
                                <td>info_master</td>
                                <td>2025.06.25</td>
                                <td>287</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

<!-- 블랙리스트 페이지 -->
<div id="blacklist" class="page">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <div class="section-title">
            <span>🚫</span> 블랙리스트
        </div>
        <button onclick="toggleWriteForm('blacklist')" class="btn-write" id="blacklistWriteBtn" style="display: none;">📝 블랙리스트 등록</button>
    </div>
    
    <div id="writeForm-blacklist" class="write-form" style="display: none;">
        <h3 style="margin-bottom: 20px;">블랙리스트 등록</h3>
        
        <div class="form-group">
            <label class="form-label">회원 닉네임</label>
            <input type="text" class="form-control" id="blacklistNickname" placeholder="차단할 회원의 닉네임">
        </div>
        
        <div class="form-group">
            <label class="form-label">블랙 사유</label>
            <textarea class="form-control" id="blacklistReason" rows="4" placeholder="블랙리스트 등록 사유를 자세히 작성해주세요"></textarea>
        </div>
        
        <div style="text-align: right;">
            <button onclick="cancelWrite('blacklist')" class="btn btn-secondary" style="margin-right: 8px;">취소</button>
            <button onclick="submitBlacklist()" class="btn btn-primary">등록</button>
        </div>
    </div>
    
    <table class="board-table">
        <thead>
            <tr>
                <th width="60">번호</th>
                <th width="150">닉네임</th>
                <th>블랙사유</th>
                <th width="120">등록일</th>
                <th width="80">관리</th>
            </tr>
        </thead>
        <tbody id="blacklist-tbody">
            <!-- 블랙리스트가 여기에 렌더링됩니다 -->
        </tbody>
    </table>
</div>


                <div id="minigame" class="page">
                    <div class="section-title">
                        <span>🎮</span> 미니게임 - 바카라
                    </div>
                    
                    <div class="game-container">
                        <div class="game-header">
                            <div>
                                <h3 style="margin: 0; font-size: 24px;">🃏 바카라 게임</h3>
                                <p style="margin: 8px 0 0 0; opacity: 0.8;">포인트로 즐기는 미니 바카라</p>
                            </div>
                            <div class="user-points">
                                💰 보유 포인트: <span id="userPoints">1000</span>P
                            </div>
                        </div>
                        
                        <div class="game-table">
                            <div class="betting-area">
                                <div class="bet-option" data-bet="player" onclick="selectBet('player')">
                                    <div class="bet-title">PLAYER</div>
                                    <div class="bet-payout">1:1 배당</div>
                                    <div class="bet-amount" id="playerBetAmount">0P</div>
                                </div>
                                <div class="bet-option" data-bet="tie" onclick="selectBet('tie')">
                                    <div class="bet-title">TIE</div>
                                    <div class="bet-payout">8:1 배당</div>
                                    <div class="bet-amount" id="tieBetAmount">0P</div>
                                </div>
                                <div class="bet-option" data-bet="banker" onclick="selectBet('banker')">
                                    <div class="bet-title">BANKER</div>
                                    <div class="bet-payout">1:1 배당 (5% 수수료)</div>
                                    <div class="bet-amount" id="bankerBetAmount">0P</div>
                                </div>
                            </div>
                            
                            <div class="betting-controls">
                                <button class="bet-chip" data-amount="10" onclick="selectChip(10)">10P</button>
                                <button class="bet-chip" data-amount="50" onclick="selectChip(50)">50P</button>
                                <button class="bet-chip" data-amount="100" onclick="selectChip(100)">100P</button>
                                <button class="bet-chip" data-amount="500" onclick="selectChip(500)">500P</button>
                                <button onclick="clearBets()" class="game-btn game-btn-secondary">배팅 초기화</button>
                            </div>
                            
                            <div class="cards-area">
                                <div class="card-section">
                                    <h3>PLAYER</h3>
                                    <div class="cards" id="playerCards">
                                        <div class="card card-back">🂠</div>
                                        <div class="card card-back">🂠</div>
                                    </div>
                                    <div class="total-score" id="playerTotal">?</div>
                                </div>
                                <div class="card-section">
                                    <h3>BANKER</h3>
                                    <div class="cards" id="bankerCards">
                                        <div class="card card-back">🂠</div>
                                        <div class="card card-back">🂠</div>
                                    </div>
                                    <div class="total-score" id="bankerTotal">?</div>
                                </div>
                            </div>
                            
                            <div class="game-result" id="gameResult"></div>
                            
                            <div class="game-actions">
                                <button onclick="dealCards()" class="game-btn game-btn-primary" id="dealBtn">카드 딜</button>
                                <button onclick="newGame()" class="game-btn game-btn-secondary" id="newGameBtn" style="display: none;">새 게임</button>
                            </div>
                        </div>
                        
                        <div class="game-history">
                            <div class="history-title">🏆 최근 게임 결과</div>
                            <div class="history-items" id="gameHistory">
                                <span class="history-item history-player">P</span>
                                <span class="history-item history-banker">B</span>
                                <span class="history-item history-player">P</span>
                                <span class="history-item history-tie">T</span>
                                <span class="history-item history-banker">B</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="notice" class="page">
                    <div class="section-title">
                        <span>📢</span> 공지사항
                    </div>
                    <table class="board-table">
                        <thead>
                            <tr>
                                <th width="60">번호</th>
                                <th>제목</th>
                                <th width="100">작성자</th>
                                <th width="100">날짜</th>
                                <th width="60">조회</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>공지</td>
                                <td class="title">
                                    <span class="badge badge-hot">중요</span>
                                    <a href="#">[필독] 5 Dragons 이용 규칙 및 가이드</a>
                                </td>
                                <td>관리자</td>
                                <td>2025.06.01</td>
                                <td>12,345</td>
                            </tr>
                            <tr>
                                <td>공지</td>
                                <td class="title">
                                    <a href="#">보증사이트 신청 방법 안내</a>
                                </td>
                                <td>관리자</td>
                                <td>2025.05.15</td>
                                <td>8,234</td>
                            </tr>
                       </tbody>
                    </table>
                </div>

<!-- 1:1 문의 페이지 -->
<div id="inquiry" class="page">
    <div class="section-title">
        <span>💬</span> 1:1 문의
    </div>
    
    <div id="inquiryContent">
        <!-- 동적으로 생성됨 -->
    </div>
</div>

<div id="mypage" class="page">
    <div class="section-title">
        <span>👤</span> 마이페이지
    </div> 
    <div id="mypageContent">
        <!-- 로그인 상태에 따라 동적으로 생성됨 -->
    </div>
</div>

<!-- 관리자 페이지 -->
<div id="admin" class="page">
    <div class="section-title">
        <span>👑</span> 관리자 대시보드
    </div>
    
    <div id="adminContent">
        <!-- 동적으로 생성됨 -->
    </div>
</div>

<!-- 게시글 상세보기 페이지 -->
<div id="postView" class="page">
    <div class="post-view-container">
        <div class="post-view-header">
            <button onclick="goBackToList()" class="btn btn-secondary" style="margin-bottom: 20px;">
                ← 목록으로
            </button>
            <h2 id="postViewTitle" class="post-view-title"></h2>
            <div class="post-view-info">
                <span>작성자: <strong id="postViewAuthor"></strong></span>
                <span>작성일: <span id="postViewDate"></span></span>
                <span>조회수: <span id="postViewCount">0</span></span>
            </div>
        </div>
        
        <div class="post-view-content" id="postViewContent">
            <!-- 게시글 내용 -->
        </div>
        
        <div class="post-view-actions">
            <div class="vote-container" style="justify-content: center; margin: 20px 0;">
                <button class="vote-btn" id="postLikeBtn" onclick="votePost()">
                    <span class="vote-icon">👍</span>
                    <span class="vote-count" id="postLikeCount">0</span>
                </button>
                <button class="vote-btn" id="postDislikeBtn" onclick="votePost()">
                    <span class="vote-icon">👎</span>
                    <span class="vote-count" id="postDislikeCount">0</span>
                </button>
            </div>
        </div>
        
        <!-- 댓글 섹션 -->
        <div class="comments-section">
            <div class="comments-header">
                <div class="comments-title">💬 댓글 <span id="commentCount">0</span>개</div>
            </div>
            
            <div id="commentWriteBox">
                <!-- 로그인 상태에 따라 동적으로 생성 -->
            </div>
            
            <div id="commentsList">
                <!-- 댓글 목록 -->
            </div>
        </div>
    </div>
</div>
            
 <div class="bottom-banner-section" id="bottomBannerSection" style="margin-top: 40px; display: none;">
                <div class="section-title">
                    <span>💎</span> 프리미엄 파트너
                </div>
                <div class="banner-grid" id="bottomBanners">
                    <!-- 동적으로 생성됨 -->
                </div>
            </div>

</main>

            <aside class="right-sidebar">
                <div class="sidebar-section">
    <div class="sidebar-title">
        <span>🎯</span> 추천 사이트
    </div>
    <div class="sidebar-content" id="sidebarBanners">
        <!-- 동적으로 생성됨 -->
    </div>
</div>

                <div class="sidebar-section">
                    <div class="sidebar-title">
                        <span>📈</span> 실시간 인기글 TOP3
                    </div>
                    <div class="sidebar-content">
                        <ul class="sidebar-list">
                            <li><a href="#"><span style="color: #dc2626;">1</span> 베팅왕</a></li>
                            <li><a href="#"><span style="color: #ea580c;">2</span> 먹튀검증</a></li>
                            <li><a href="#"><span style="color: #d97706;">3</span> 바카라</a></li>
                            <li><a href="#"><span style="color: #6c757d;">4</span> 출금인증</a></li>
                            <li><a href="#"><span style="color: #6c757d;">5</span> 신규사이트</a></li>
                        </ul>
                    </div>
                </div>
            </aside>
        </div>
    </div>

<script>

// 모바일 메뉴 함수
function openMobileMenu() {
    document.getElementById('mobileMenu').classList.add('active');
    document.querySelector('.mobile-overlay').classList.add('active');
    document.body.style.overflow = 'hidden'; // 스크롤 방지
}

function closeMobileMenu() {
    document.getElementById('mobileMenu').classList.remove('active');
    document.querySelector('.mobile-overlay').classList.remove('active');
    document.body.style.overflow = ''; // 스크롤 복원

window.scrollTo(0, 0);
    document.documentElement.scrollTop = 0;
    document.body.scrollTop = 0;

}

// 모바일 드롭다운 토글
function toggleMobileDropdown(event) {
    event.preventDefault();
    const dropdown = document.getElementById('communityDropdown');
    dropdown.classList.toggle('active');
    
    // 화살표 회전
    const arrow = event.target.querySelector('span');
    if (arrow) {
      arrow.textContent = dropdown.classList.contains('active') ? '▲' : '▼';
    }
}



// 고객센터 모바일 드롭다운 토글
function toggleMobileDropdown2(event) {
    event.preventDefault();
    const dropdown = document.getElementById('supportDropdown');
    dropdown.classList.toggle('active');
    
    // 화살표 회전
    const arrow = event.target.querySelector('span');
    if (arrow) {
        arrow.textContent = dropdown.classList.contains('active') ? '▲' : '▼';
    }
}

// 홍보센터 모바일 드롭다운 토글
function toggleMobileDropdown3(event) {
    event.preventDefault();
    const dropdown = document.getElementById('promotionDropdown');
    dropdown.classList.toggle('active');
    
    // 화살표 회전
    const arrow = event.target.querySelector('span');
    if (arrow) {
        arrow.textContent = dropdown.classList.contains('active') ? '▲' : '▼';
    }
}

// 출석체크 데이터
let attendancesData = {
    lastCheck: null,
    streak: 0,
    history: [],
    monthlyChecks: {}
};

// 레벨 시스템 데이터
const levelSystem = {
    levels: [
        { level: 1, exp: 0, title: '토린이' },
        { level: 2, exp: 100, title: '국밥배터' },
        { level: 3, exp: 300, title: '대출보유자' },
        { level: 4, exp: 600, title: '생도' },
        { level: 5, exp: 1000, title: '분석충' },
        { level: 6, exp: 1500, title: '패턴연구소장' },
        { level: 7, exp: 2200, title: '소총판' },
        { level: 8, exp: 3000, title: '대총판' },
        { level: 9, exp: 4000, title: '토사장' },
        { level: 10, exp: 5000, title: '회장님' }

    ]
};

// 상점 아이템 데이터
const shopItems = {
    badges: [
       { id: 'badge_fire', name: '비상금대출', icon: '🔥', price: 500000, desc: '입문자의 상징' },
        { id: 'badge_star', name: '맥스윈', icon: '⭐', price: 800000, desc: '10충 100마감의 증표' },
        { id: 'badge_crown', name: '왕모자', icon: '👑', price: 1000000, desc: '환자의 상징' },
        { id: 'badge_diamond', name: '3부다이아', icon: '💎', price: 1100000, desc: '맥스먹고 삼' },
        { id: 'badge_rocket', name: '우주선', icon: '🚀', price: 1200000, desc: '1억 마감의 증표' },
        { id: 'badge_trophy', name: '바롱도르', icon: '🏆', price: 1800000, desc: '그저 GOAT' }
    ],
    effects: [
        { id: 'effect_glow', name: '야옹이', icon: '✨', price: 1000000, desc: '인사되는 반짝이 효과' },
        { id: 'effect_rainbow', name: '수수깡 깻잎', icon: '🌈', price: 1500000, desc: '진짜 인사되는 무지개 효과' },
        { id: 'effect_gold', name: '대장님', icon: '🌟', price: 20000000, desc: '전국구의 황금색 닉네임 효과' }
    ],
    titles: [
        { id: 'title_legend', name: '전설의', icon: '🏅', price: 30000000, desc: '닉네임 앞에 [누적1억] 칭호 추가' },
        { id: 'title_master', name: '마스터', icon: '🎖️', price: 25000000, desc: '닉네임 앞에 [누적10억] 칭호 추가' },
        { id: 'title_vip', name: 'VIP', icon: '💳', price: 200000000, desc: '닉네임 앞에 [VVVVIP] 칭호 추가' }
    ]

};

// 사용자별 데이터 저장
let userData = {};
let usersDB = [
    { 
        id: 'admin', 
        password: 'admin123', 
        nickname: '관리자', 
        points: 9999999, 
        isAdmin: true, 
        joinDate: '2025.01.01',
        level: 10,
        exp: 5000,
        ownedItems: ['badge_crown', 'effect_gold', 'title_vip'],
        equippedBadges: ['badge_crown'],
        equippedEffect: 'effect_gold',
        equippedTitle: 'title_vip'
    },
    { 
        id: 'test', 
        password: 'test123', 
        nickname: '테스트유저', 
        points: 1000, 
        isAdmin: false, 
        joinDate: '2025.06.01',
        level: 1,
        exp: 0,
        ownedItems: [],
        equippedBadges: [],
        equippedEffect: null,
        equippedTitle: null
    },
    // 랭킹용 추가 사용자들
    { id: 'dragon1', password: 'pass1', nickname: '불타는용', points: 850000, isAdmin: false, joinDate: '2024.12.01', level: 9 },
    { id: 'lucky777', password: 'pass2', nickname: '럭키세븐', points: 723000, isAdmin: false, joinDate: '2024.11.15', level: 8 },
    { id: 'betking', password: 'pass3', nickname: '베팅황제', points: 690000, isAdmin: false, joinDate: '2024.10.20', level: 8 },
    { id: 'casinopro', password: 'pass4', nickname: '카지노달인', points: 580000, isAdmin: false, joinDate: '2024.09.10', level: 7 },
    { id: 'winner2025', password: 'pass5', nickname: '승리의여신', points: 455000, isAdmin: false, joinDate: '2024.08.05', level: 7 },
    { id: 'goldhand', password: 'pass6', nickname: '황금손', points: 420000, isAdmin: false, joinDate: '2024.07.20', level: 6 },
    { id: 'shark99', password: 'pass7', nickname: '상어99', points: 380000, isAdmin: false, joinDate: '2024.06.15', level: 6 },
    { id: 'master7', password: 'pass8', nickname: '마스터7', points: 325000, isAdmin: false, joinDate: '2024.05.10', level: 5 },
    { id: 'rookie123', password: 'pass9', nickname: '신입이다', points: 280000, isAdmin: false, joinDate: '2024.04.01', level: 5 },
    { id: 'player88', password: 'pass10', nickname: '플레이어88', points: 245000, isAdmin: false, joinDate: '2024.03.15', level: 4 }
];


// 1:1 문의 데이터
let inquiryData = [];

// 1:1 문의 페이지 렌더링
function renderInquiryPage() {
    const container = document.getElementById('inquiryContent');
    
    if (!currentUser) {
        container.innerHTML = `
            <div style="text-align: center; padding: 60px;">
                <h3 style="margin-bottom: 20px;">로그인이 필요합니다</h3>
                <button onclick="openLoginModal()" class="btn btn-primary">로그인하기</button>
            </div>
        `;
        return;
    }
    
    // 사용자의 문의글만 필터링 (관리자는 모든 글 보기)
    const myInquiries = isAdmin ? inquiryData : inquiryData.filter(item => item.author === currentUser);
    
    container.innerHTML = `
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <p style="color: #6c757d; font-size: 14px;">
                ${isAdmin ? '모든 문의를 확인할 수 있습니다.' : '본인이 작성한 문의만 확인할 수 있습니다.'}
            </p>
            ${!isAdmin ? '<button onclick="toggleInquiryForm()" class="btn-write">📝 문의하기</button>' : ''}
        </div>
        
        <div id="inquiryForm" class="write-form" style="display: none;">
            <h3 style="margin-bottom: 20px;">1:1 문의 작성</h3>
            
            <div class="form-group">
                <label class="form-label">제목</label>
                <input type="text" class="form-control" id="inquiryTitle" placeholder="문의 제목을 입력하세요">
            </div>
            
            <div class="form-group">
                <label class="form-label">문의 유형</label>
                <select class="form-control" id="inquiryType">
                    <option value="">선택하세요</option>
                    <option value="계정">계정 문의</option>
                    <option value="포인트">포인트 문의</option>
                    <option value="게시글">게시글 문의</option>
                    <option value="신고">신고/건의</option>
                    <option value="기타">기타</option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="form-label">내용</label>
               <textarea class="form-control" id="inquiryContentText" rows="6" placeholder="문의 내용을 자세히 작성해주세요"></textarea>
            </div>
            
            <div style="text-align: right;">
                <button onclick="cancelInquiry()" class="btn btn-secondary" style="margin-right: 8px;">취소</button>
                <button onclick="submitInquiry()" class="btn btn-primary">등록</button>
            </div>
        </div>
        
        <div id="inquiryList">
            ${myInquiries.length === 0 ? 
                '<div style="text-align: center; padding: 60px; color: #6c757d;">문의 내역이 없습니다.</div>' :
                myInquiries.map(inquiry => createInquiryHTML(inquiry)).join('')
            }
        </div>
    `;
}

// 문의글 HTML 생성
function createInquiryHTML(inquiry) {
    const isAuthor = inquiry.author === currentUser;
    const hasReply = inquiry.replies && inquiry.replies.length > 0;
    
    return `
        <div class="inquiry-item" style="background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px; margin-bottom: 16px;">
            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 12px;">
                <div>
                    <span class="status-badge" style="background: ${inquiry.type === '계정' ? '#e3f2fd' : inquiry.type === '포인트' ? '#fff3cd' : '#e8f5e9'}; color: ${inquiry.type === '계정' ? '#1976d2' : inquiry.type === '포인트' ? '#856404' : '#2e7d32'}; padding: 4px 8px; border-radius: 4px; font-size: 12px; margin-right: 8px;">${inquiry.type}</span>
                    <span style="font-size: 18px; font-weight: 600;">${inquiry.title}</span>
                </div>
                <div style="text-align: right;">
                    <div style="font-size: 12px; color: #6c757d;">${inquiry.date}</div>
                    <div style="font-size: 12px; color: #6c757d;">작성자: ${inquiry.author}</div>
                </div>
            </div>
            
            <div style="color: #495057; line-height: 1.6; margin-bottom: 16px;">${inquiry.content}</div>
            
            ${hasReply ? `
                <div style="background: white; border: 1px solid #dee2e6; border-radius: 6px; padding: 16px; margin-top: 16px;">
                    <div style="font-size: 14px; font-weight: 600; color: #dc2626; margin-bottom: 8px;">🛡️ 관리자 답변</div>
                    <div style="color: #495057; line-height: 1.6;">${inquiry.replies[0].content}</div>
                    <div style="font-size: 12px; color: #6c757d; margin-top: 8px;">${inquiry.replies[0].date}</div>
                </div>
            ` : isAdmin ? `
                <div style="margin-top: 16px;">
                    <textarea id="reply-${inquiry.id}" class="form-control" placeholder="답변을 작성하세요" rows="3"></textarea>
                    <button onclick="submitInquiryReply('${inquiry.id}')" class="btn btn-primary" style="margin-top: 8px;">답변 등록</button>
                </div>
            ` : '<div style="color: #6c757d; font-size: 14px; margin-top: 12px;">⏳ 답변 대기중</div>'}
            
            ${isAuthor && !hasReply ? `
                <button onclick="deleteInquiry(${inquiry.id})" class="btn btn-secondary" style="margin-top: 12px;">삭제</button>
            ` : ''}
        </div>
    `;
}

// 문의 폼 토글
function toggleInquiryForm() {
    const form = document.getElementById('inquiryForm');
    form.style.display = form.style.display === 'none' ? 'block' : 'none';
}

// 문의 작성 취소
function cancelInquiry() {
    document.getElementById('inquiryForm').style.display = 'none';
    document.getElementById('inquiryTitle').value = '';
    document.getElementById('inquiryType').value = '';
   document.getElementById('inquiryContentText').value = '';
}

// 문의 제출
function submitInquiry() {
    // 각 요소 확인
    const titleEl = document.getElementById('inquiryTitle');
    const typeEl = document.getElementById('inquiryType');
   const contentEl = document.getElementById('inquiryContentText');
    
    console.log('요소들:', {
        titleEl: titleEl,
        typeEl: typeEl,
        contentEl: contentEl
    });
    
    // Optional chaining으로 안전하게 값 가져오기
    const title = titleEl?.value?.trim() || '';
    const type = typeEl?.value || '';
    const content = contentEl?.value?.trim() || '';
    
    console.log('입력값:', { title, type, content });
    console.log('textarea 직접 확인:', contentEl?.value);
    
    if (!title || !type || !content) {
        alert('모든 항목을 입력해주세요.');
        return;
    }
    
   const newInquiry = {
    id: Date.now(), // 숫자 타입으로 생성
    title: title,
    type: type,
    content: content,
    author: currentUser,
    date: new Date().toLocaleDateString('ko-KR'),
    replies: []
};
    
    inquiryData.unshift(newInquiry);
    
    alert('문의가 등록되었습니다. 빠른 시일 내에 답변드리겠습니다.');
    cancelInquiry();
    renderInquiryPage();
}
// 답변 등록 (관리자용) - 함수명 변경!
function submitInquiryReply(inquiryId) {
    if (!isAdmin) return;
    
    // 안전하게 요소 찾기
    const replyElement = document.getElementById(`reply-${inquiryId}`);
    
    if (!replyElement) {
        console.error('답변 입력창을 찾을 수 없습니다:', `reply-${inquiryId}`);
        alert('답변 입력창을 찾을 수 없습니다.');
        return;
    }
    
    const replyContent = replyElement.value?.trim() || '';
    
    if (!replyContent) {
        alert('답변을 입력해주세요.');
        return;
    }
    
    const inquiry = inquiryData.find(item => item.id == inquiryId);
    if (inquiry) {
        inquiry.replies = [{
            content: replyContent,
            date: new Date().toLocaleDateString('ko-KR'),
            author: '관리자'
        }];
        
        alert('답변이 등록되었습니다.');
        renderInquiryPage();
    } else {
        alert('해당 문의를 찾을 수 없습니다.');
    }
}
// 문의 삭제
function deleteInquiry(inquiryId) {
    if (confirm('문의를 삭제하시겠습니까?')) {
        inquiryData = inquiryData.filter(item => item.id !== inquiryId);
        renderInquiryPage();
    }
}



// 사용자 데이터 초기화
function initUserData(userId) {
    // DB에서 사용자 찾기
    const dbUser = usersDB.find(u => u.nickname === userId);
    
    if (!userData[userId]) {
        if (dbUser) {
            // DB에 있는 사용자면 DB 데이터 사용
            userData[userId] = {
                level: dbUser.level || 1,
                exp: dbUser.exp || 0,
                ownedItems: dbUser.ownedItems || [],
                equippedBadges: dbUser.equippedBadges || [],
                equippedTitle: dbUser.equippedTitle || null,
                equippedEffect: dbUser.equippedEffect || null,
                attendances: {
                    lastCheck: null,
                    streak: 0,
                    history: [],
                    monthlyChecks: {}
                }
            };
        } else {
            // DB에 없는 사용자면 기본값 사용
            userData[userId] = {
                level: 1,
                exp: 0,
                ownedItems: [],
                equippedBadges: [],
                equippedTitle: null,
                equippedEffect: null,
                attendances: {
                    lastCheck: null,
                    streak: 0,
                    history: [],
                    monthlyChecks: {}
                }
            };
        }
    }
}

// 경험치 추가 함수
function addExp(amount, reason) {
    if (!currentUser) return;
    
    const user = userData[currentUser];
    if (!user) return;
    
    user.exp += amount;
    
    // 레벨업 체크
    const currentLevel = getUserLevel(user.exp);
    if (currentLevel.level > user.level) {
        user.level = currentLevel.level;
        const bonus = currentLevel.level * 100;
        gameState.userPoints += bonus;
        
        showFloatingText(`레벨업! Lv.${currentLevel.level} ${currentLevel.title}`, '#8b5cf6');
        showFloatingText(`+${bonus}P 레벨업 보너스!`, '#ffd700');
        
        createNotification(NOTIFICATION_TYPES.SYSTEM, {
            message: `축하합니다! 레벨 ${currentLevel.level}이 되었습니다!`
        });
    }
    
    updateDisplay();
}

// 사용자 레벨 계산
function getUserLevel(exp) {
    let currentLevel = levelSystem.levels[0];
    for (let i = levelSystem.levels.length - 1; i >= 0; i--) {
        if (exp >= levelSystem.levels[i].exp) {
            currentLevel = levelSystem.levels[i];
            break;
        }
    }
    return currentLevel;
}

// loadattendancesData 함수 전체 (4973번째 줄부터)
async function loadattendancesData(userId, token) {
    if (!currentUser) return;
    
    try {
        const attendancesResponse = await fetch(
            `http://localhost:1337/api/attendances?populate=*&sort=date:desc`,
            {
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            }
        );
        
        if (attendancesResponse.ok) {
            const attendancesData = await attendancesResponse.json();
            
            // Strapi v5는 attributes가 없으므로 직접 접근
            const myAttendances = attendancesData.data.filter(record => {
    // 전체 구조 확인을 위한 로그 (나중에 삭제)
    console.log('출석 레코드 전체:', record);
    
    // 여러 가능한 필드명 확인
    const userField = record.user || record.users_permissions_user || record.userId;
    
    if (!userField) {
        console.log('User 필드를 찾을 수 없음:', record);
        return false;
    }
    
    // user가 객체인지 ID인지 확인
    const userIdFromRecord = typeof userField === 'object' ? userField.id : userField;
    return userIdFromRecord == userId;
});
            
            if (myAttendances.length > 0) {
                initUserData(currentUser);
                const user = userData[currentUser];
                
                const recentAttendances = myAttendances.slice(0, 30);
                const latestAttendance = recentAttendances[0];
                
                // v5에서는 직접 접근
                const attendanceDate = new Date(latestAttendance.date);
                const koreanOffset = 9 * 60 * 60 * 1000;
                const koreanDate = new Date(attendanceDate.getTime() + koreanOffset);
                const dateStr = koreanDate.toISOString().split('T')[0];
                
                user.attendances.lastCheck = dateStr;
                user.attendances.streak = latestAttendance.streak || 0;
                
                // 이번 달 출석 기록 적용
                recentAttendances.forEach(record => {
                    const recordDate = new Date(record.date);
                    const koreanRecordDate = new Date(recordDate.getTime() + koreanOffset);
                    const recordDateStr = koreanRecordDate.toISOString().split('T')[0];
                    user.attendances.monthlyChecks[recordDateStr] = true;
                    user.attendances.history.push(recordDateStr);
                });
                
                console.log('✅ 출석 기록 불러오기 성공:', user.attendances.streak, '일 연속');
            }
        }
    } catch (error) {
        console.error('출석 기록 불러오기 오류:', error);
        initUserData(currentUser);
    }
}
// 출석체크 모달 열기
function openattendances() {
    if (!currentUser) {
        alert('로그인 후 이용 가능합니다.');
        return;
    }
    
    initUserData(currentUser);
    document.getElementById('attendancesModal').style.display = 'block';
    renderattendancesCalendar();
}

// 출석체크 닫기
function closeattendances() {
    document.getElementById('attendancesModal').style.display = 'none';
}

// 출석 달력 렌더링
function renderattendancesCalendar() {
    const user = userData[currentUser];
    const today = new Date();
    const year = today.getFullYear();
    const month = today.getMonth();
    const firstDay = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month + 1, 0).getDate();
    
    let calendarHTML = '';
    
    // 요일 헤더
    const weekDays = ['일', '월', '화', '수', '목', '금', '토'];
    weekDays.forEach(day => {
        calendarHTML += `<div style="font-weight: bold; font-size: 12px; color: #6c757d;">${day}</div>`;
    });
    
    // 빈 칸
    for (let i = 0; i < firstDay; i++) {
        calendarHTML += '<div></div>';
    }
    
    // 날짜
    for (let day = 1; day <= daysInMonth; day++) {
        const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
       const isChecked = user.attendances.monthlyChecks[dateStr];
const isToday = day === today.getDate() && 
                new Date().getMonth() === month && 
                new Date().getFullYear() === year;


        const isFuture = day > today.getDate();
        
        let className = 'calendar-day';
        if (isChecked) className += ' checked';
        if (isToday && !isChecked) className += ' today';
        if (isFuture) className += ' future';
        
        calendarHTML += `<div class="${className}" ${isToday && !isChecked ? `onclick="doAttendance()"` : ''}>${day}</div>`;
    }
    
    document.getElementById('attendancesCalendar').innerHTML = calendarHTML;
    document.getElementById('streakCount').textContent = user.attendances.streak;
}

// 출석체크 실행
async function doAttendance() {
    // userData 초기화 확인
    if (!userData[currentUser]) {
        initUserData(currentUser);
    }
    const user = userData[currentUser];


 if (!user.attendance) {
        user.attendance = {
            lastCheck: null,
            streak: 0,
            history: [],
            monthlyChecks: {}
        };
    }
    
    // 한국 시간 기준으로 날짜 계산
    const now = new Date();    const koreanOffset = 9 * 60 * 60 * 1000; // 9시간을 밀리초로
    const koreanTime = new Date(now.getTime() + koreanOffset);
    const dateStr = koreanTime.toISOString().split('T')[0];
    
    // 이미 출석체크 했는지 확인
    if (user.attendances.lastCheck === dateStr) {
        alert('오늘은 이미 출석체크를 하셨습니다!');
        renderattendancesCalendar();
        return;
    }
    
    // Strapi에서 오늘 출석했는지 다시 확인
    try {
        const token = localStorage.getItem('token');
        const strapiUser = JSON.parse(localStorage.getItem('user') || '{}');
        
        if (token && strapiUser.id) {
            // 한국 시간 오늘 00:00 ~ 23:59:59를 UTC로 변환
            const todayStartKST = new Date(dateStr + 'T00:00:00+09:00');
            const todayEndKST = new Date(dateStr + 'T23:59:59+09:00');
            
            const checkResponse = await fetch(
              `http://localhost:1337/api/attendances?filters[date][$gte]=${todayStartKST.toISOString()}&filters[date][$lte]=${todayEndKST.toISOString()}`,
                {
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                }
            );
            
            if (checkResponse.ok) {
                const checkData = await checkResponse.json();
              if (checkData.data && checkData.data.length > 0) {
    // 이미 서버에 오늘 출석 기록이 있음
    alert('오늘은 이미 출석체크를 하셨습니다!');
    
    // 로컬 데이터 업데이트
    user.attendance.lastCheck = dateStr;
    user.attendance.monthlyChecks[dateStr] = true;
    user.attendance.streak = checkData.data[0].attributes?.streak || checkData.data[0].streak || 1;
                    
                    renderattendancesCalendar();
                    return;
                }
            }
        }
    } catch (error) {
        console.error('출석 중복 체크 오류:', error);
    }
    
    // 연속 출석 체크
    const yesterday = new Date(koreanTime);
    yesterday.setDate(yesterday.getDate() - 1);
    const yesterdayStr = yesterday.toISOString().split('T')[0];
    
    if (user.attendances.lastCheck === yesterdayStr) {
        user.attendances.streak++;
    } else {
        user.attendances.streak = 1;
    }
    
    // 출석 기록
    user.attendances.lastCheck = dateStr;
    user.attendances.monthlyChecks[dateStr] = true;
    user.attendances.history.push(dateStr);
    
    // 보상 계산
    let baseReward = 100;
    let streakBonus = Math.min(user.attendances.streak * 10, 200);
    let totalReward = baseReward + streakBonus;
    
    // 7일, 30일 연속 출석 특별 보상
    if (user.attendances.streak === 7) {
        totalReward += 500;
        showFloatingText('7일 연속 출석 달성! +500P', '#ffd700');
    } else if (user.attendances.streak === 30) {
        totalReward += 2000;
        showFloatingText('30일 연속 출석 달성! +2000P', '#ffd700');
    }
    
    // 포인트 지급
    gameState.userPoints += totalReward;
    addExp(50, '출석체크');
    
    // 알림
    createNotification(NOTIFICATION_TYPES.POINT, {
        points: totalReward,
        reason: `출석체크 (${user.attendances.streak}일 연속)`
    });
    
    // 화면 업데이트
    updateDisplay();
    renderattendancesCalendar();
    
    // 성공 메시지
    alert(`출석체크 완료!\n${totalReward}P를 획득했습니다!\n(${user.attendances.streak}일 연속 출석)`);

    // Strapi에 출석 기록 저장
    try {
        const token = localStorage.getItem('token');
        const strapiUser = JSON.parse(localStorage.getItem('user') || '{}');
        
        if (token && strapiUser.id) {

 console.log('strapiUser 전체:', strapiUser);
        console.log('strapiUser.id 값:', strapiUser.id);
        console.log('strapiUser.id 타입:', typeof strapiUser.id);

           const attendanceData = {
    data: {
        date: new Date(dateStr + 'T12:00:00+09:00').toISOString(),
        streak: user.attendance.streak,
        points: totalReward,
        user: {
            connect: [strapiUser.id]
        }
    }
};
            
            const response = await fetch('http://localhost:1337/api/attendances', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify(attendancesData)
            });
            
            if (response.ok) {
                console.log('✅ 출석체크 저장 성공!');
            } else {
                console.error('❌ 출석체크 저장 실패');
            }
        }
    } catch (error) {
        console.error('출석체크 API 오류:', error);
    }
}

// 포인트 상점 열기
function openShop() {
    if (!currentUser) {
        alert('로그인 후 이용 가능합니다.');
        return;
    }
    
    initUserData(currentUser);
    document.getElementById('shopModal').style.display = 'block';
    document.getElementById('shopPoints').textContent = gameState.userPoints;
    renderShopItems('badges');
}

// 상점 닫기
function closeShop() {
    document.getElementById('shopModal').style.display = 'none';
}

// 상점 탭 전환
function switchShopTab(tab) {
    document.querySelectorAll('.shop-tab').forEach(t => t.classList.remove('active'));
    event.target.classList.add('active');
    
    document.querySelectorAll('.shop-items').forEach(items => {
        items.style.display = 'none';
    });
    
    document.getElementById(`shop-${tab}`).style.display = 'grid';
    renderShopItems(tab);
}

// 가격 포맷팅 함수
function formatPrice(price) {
    if (price >= 100000000) {
        return (price / 100000000).toFixed(1) + '억P';
    } else if (price >= 10000000) {
        return (price / 10000000).toFixed(1) + '천만P';
    } else if (price >= 10000) {
        return (price / 10000).toFixed(0) + '만P';
    } else {
        return price.toLocaleString() + 'P';
    }
}



// 상점 아이템 렌더링
function renderShopItems(category) {
    const container = document.getElementById(`shop-${category}`);
    const user = userData[currentUser];
    const items = shopItems[category];
    
    let html = '';
    items.forEach(item => {
        const isOwned = user.ownedItems.includes(item.id);
        html += `
            <div class="shop-item ${isOwned ? 'owned' : ''}" onclick="${isOwned ? `equipItem('${category}', '${item.id}')` : `buyItem('${category}', '${item.id}')`}">
                <div class="shop-item-icon">${item.icon}</div>
                <div class="shop-item-name">${item.name}</div>
                <div class="shop-item-desc">${item.desc}</div>
                <div class="shop-item-price">${isOwned ? '보유중 (클릭하여 장착/해제)' : formatPrice(item.price)}</div>
            </div>
        `;
    });
    
    container.innerHTML = html;
}

// 아이템 구매


async function buyItem(category, itemId) {
    const user = userData[currentUser];
    const item = shopItems[category].find(i => i.id === itemId);
    const dbUser = usersDB.find(u => u.nickname === currentUser);  // DB 유저 찾기 추가
    
    if (!item) return;
    
    if (gameState.userPoints < item.price) {
        alert('포인트가 부족합니다!');
        return;
    }
    
    if (confirm(`${item.name}을(를) ${item.price}P에 구매하시겠습니까?`)) {
        gameState.userPoints -= item.price;
        user.ownedItems.push(itemId);
        
        // DB에도 추가 (새로 추가된 부분)
        if (dbUser) {
            if (!dbUser.ownedItems) dbUser.ownedItems = [];
            dbUser.ownedItems.push(itemId);
            dbUser.points = gameState.userPoints;
            dbUser.level = user.level;  // 레벨도 동기화
            dbUser.exp = user.exp;      // 경험치도 동기화
        }
        
        addExp(100, '아이템 구매');
        
// Strapi에 아이템 정보 저장
const token = localStorage.getItem('token');
const strapiUser = JSON.parse(localStorage.getItem('user') || '{}');

if (token && strapiUser.id) {
    try {
        await fetch(`http://localhost:1337/api/users/${strapiUser.id}`, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${token}`
            },
            body: JSON.stringify({
                ownedItems: user.ownedItems.join(','), // 배열을 문자열로 변환
                equippedBadges: user.equippedBadges.join(','),
                equippedEffect: user.equippedEffect || '',
                equippedTitle: user.equippedTitle || ''
            })
        });
        console.log('✅ 아이템 정보 서버 저장 성공');
    } catch (error) {
        console.error('아이템 저장 오류:', error);
    }
}


        alert(`${item.name}을(를) 구매했습니다!`);
        
        document.getElementById('shopPoints').textContent = gameState.userPoints;
        renderShopItems(category);
        updateDisplay();
        
        createNotification(NOTIFICATION_TYPES.SYSTEM, {
            message: `${item.name}을(를) 구매했습니다!`
        });
    }
}

// 유저 표시 함수 (뱃지, 칭호, 효과 포함)
function getUserDisplay(username) {
    const user = usersDB.find(u => u.nickname === username);
    if (!user) return username;
    
    let display = '';
    
    // 칭호 표시
    if (user.equippedTitle) {
        const title = shopItems.titles.find(t => t.id === user.equippedTitle);
        if (title) {
            display += `<span style="color: #8b5cf6; font-weight: bold;">[${title.name}]</span> `;
        }
    }
    
    // 이름 표시 (효과 적용)
    let nameStyle = '';
    if (user.equippedEffect === 'effect_gold') {
        nameStyle = 'color: #ffd700; font-weight: bold; text-shadow: 0 0 3px #ffd700;';
    } else if (user.equippedEffect === 'effect_rainbow') {
        nameStyle = 'background: linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: bold;';
    } else if (user.equippedEffect === 'effect_glow') {
        nameStyle = 'color: #fff; font-weight: bold; text-shadow: 0 0 5px #ff00ff, 0 0 10px #ff00ff;';
    }
    display += `<span style="${nameStyle}">${username}</span>`;
    
    // 뱃지 표시 (최대 3개)
    if (user.equippedBadges && user.equippedBadges.length > 0) {
        user.equippedBadges.forEach(badgeId => {
            const badge = shopItems.badges.find(b => b.id === badgeId);
            if (badge) {
                display += ` ${badge.icon}`;
            }
        });
    }
    
    // 레벨 표시
    if (user.level) {
        display += ` <span class="level-badge">Lv.${user.level}</span>`;
    }
    
    return display;
}


// 아이템 장착/해제 함수
async function equipItem(category, itemId) {
    const user = userData[currentUser];
    const dbUser = usersDB.find(u => u.nickname === currentUser);
    
    if (!user.ownedItems.includes(itemId)) {
        showFloatingText('보유하지 않은 아이템입니다!', '#dc2626');
return;
    }
    
    if (category === 'badges') {
        // 뱃지는 여러 개 장착 가능 (최대 3개)
        if (user.equippedBadges.includes(itemId)) {
            // 이미 장착중이면 해제
            user.equippedBadges = user.equippedBadges.filter(id => id !== itemId);
            if (dbUser) dbUser.equippedBadges = user.equippedBadges;
            showFloatingText('뱃지를 해제했습니다!', '#22c55e');
        } else {
            // 장착
            if (user.equippedBadges.length >= 3) {
                showFloatingText('뱃지는 최대 3개까지 장착 가능합니다!', '#dc2626');
                return;
            }
            user.equippedBadges.push(itemId);
            if (dbUser) dbUser.equippedBadges = user.equippedBadges;
           showFloatingText('뱃지를 장착했습니다!', '#22c55e');
        }
   } else if (category === 'effects') {
    // 효과는 1개만 장착 가능
    if (user.equippedEffect === itemId) {
        user.equippedEffect = null;
        if (dbUser) dbUser.equippedEffect = null;
        showFloatingText('효과를 해제했습니다!', '#22c55e');
    } else {
        user.equippedEffect = itemId;
        if (dbUser) dbUser.equippedEffect = itemId;
        showFloatingText('효과를 장착했습니다!', '#22c55e');
    }
   } else if (category === 'titles') {
    // 칭호는 1개만 장착 가능
    if (user.equippedTitle === itemId) {
        user.equippedTitle = null;
        if (dbUser) dbUser.equippedTitle = null;
        showFloatingText('칭호를 해제했습니다!', '#22c55e');
    } else {
        user.equippedTitle = itemId;
        if (dbUser) dbUser.equippedTitle = itemId;
        showFloatingText('칭호를 장착했습니다!', '#22c55e');
    }
}
    
// Strapi에 장착 정보 저장
const token = localStorage.getItem('token');
const strapiUser = JSON.parse(localStorage.getItem('user') || '{}');

if (token && strapiUser.id) {
    try {
        await fetch(`http://localhost:1337/api/users/${strapiUser.id}`, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${token}`
            },
            body: JSON.stringify({
                equippedBadges: user.equippedBadges.join(','),
                equippedEffect: user.equippedEffect || '',
                equippedTitle: user.equippedTitle || ''
            })
        });
        console.log('✅ 장착 정보 서버 저장 성공');
    } catch (error) {
        console.error('장착 정보 저장 오류:', error);
    }
}


    // 상점 아이템 다시 렌더링
    renderShopItems(category);
    // 모든 게시글 새로고침
    renderAllPosts();
}











// 모달 HTML 생성 함수
function createModals() {
    // 로그인 모달
    const loginModalHTML = `
        <div id="loginModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999;">
            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 12px; width: 400px; box-shadow: 0 10px 40px rgba(0,0,0,0.2);">
                <h2 style="margin-bottom: 20px; color: #212529;">로그인</h2>
                <div style="margin-bottom: 16px;">
                    <label style="display: block; margin-bottom: 6px; font-size: 14px; font-weight: 500;">아이디</label>
                    <input type="text" id="modalLoginId" style="width: 100%; padding: 10px 12px; border: 1px solid #dee2e6; border-radius: 6px; font-size: 14px;">
                </div>
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 6px; font-size: 14px; font-weight: 500;">비밀번호</label>
                    <input type="password" id="modalLoginPw" style="width: 100%; padding: 10px 12px; border: 1px solid #dee2e6; border-radius: 6px; font-size: 14px;">
                </div>
                <div style="display: flex; gap: 10px;">
                    <button onclick="doLogin()" style="flex: 1; padding: 12px; background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%); color: white; border: none; border-radius: 6px; font-size: 14px; font-weight: 500; cursor: pointer;">로그인</button>
                    <button onclick="closeLoginModal()" style="flex: 1; padding: 12px; background: #e9ecef; color: #495057; border: none; border-radius: 6px; font-size: 14px; font-weight: 500; cursor: pointer;">취소</button>
                </div>
                <div style="text-align: center; margin-top: 16px;">
                    <a href="#" onclick="switchToSignup()" style="color: #dc2626; text-decoration: none; font-size: 14px;">아직 회원이 아니신가요? 회원가입</a>
                </div>
            </div>
        </div>
    `;

    // 회원가입 모달
    const signupModalHTML = `
        <div id="signupModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999;">
            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 12px; width: 450px; max-height: 80vh; overflow-y: auto; box-shadow: 0 10px 40px rgba(0,0,0,0.2);">
                <h2 style="margin-bottom: 20px; color: #212529;">회원가입</h2>
                <div style="margin-bottom: 16px;">
                    <label style="display: block; margin-bottom: 6px; font-size: 14px; font-weight: 500;">아이디 <span style="color: #dc2626;">*</span></label>
                    <input type="text" id="signupId" style="width: 100%; padding: 10px 12px; border: 1px solid #dee2e6; border-radius: 6px; font-size: 14px;" placeholder="4~16자 영문, 숫자">
                    <div id="idCheckMsg" style="font-size: 12px; margin-top: 4px;"></div>
                </div>
                <div style="margin-bottom: 16px;">
                    <label style="display: block; margin-bottom: 6px; font-size: 14px; font-weight: 500;">비밀번호 <span style="color: #dc2626;">*</span></label>
                    <input type="password" id="signupPw" style="width: 100%; padding: 10px 12px; border: 1px solid #dee2e6; border-radius: 6px; font-size: 14px;" placeholder="6자 이상">
                </div>
                <div style="margin-bottom: 16px;">
                    <label style="display: block; margin-bottom: 6px; font-size: 14px; font-weight: 500;">비밀번호 확인 <span style="color: #dc2626;">*</span></label>
                    <input type="password" id="signupPwConfirm" style="width: 100%; padding: 10px 12px; border: 1px solid #dee2e6; border-radius: 6px; font-size: 14px;">
                    <div id="pwCheckMsg" style="font-size: 12px; margin-top: 4px;"></div>
                </div>
                <div style="margin-bottom: 16px;">
                    <label style="display: block; margin-bottom: 6px; font-size: 14px; font-weight: 500;">닉네임 <span style="color: #dc2626;">*</span></label>
                    <input type="text" id="signupNickname" style="width: 100%; padding: 10px 12px; border: 1px solid #dee2e6; border-radius: 6px; font-size: 14px;" placeholder="2~10자">
                </div>
                <div style="margin-bottom: 20px;">
                    <label style="display: flex; align-items: center; font-size: 14px;">
                        <input type="checkbox" id="agreeTerms" style="margin-right: 8px;">
                        <span>이용약관 및 개인정보처리방침에 동의합니다</span>
                    </label>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button onclick="doSignup()" style="flex: 1; padding: 12px; background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%); color: white; border: none; border-radius: 6px; font-size: 14px; font-weight: 500; cursor: pointer;">가입하기</button>
                    <button onclick="closeSignupModal()" style="flex: 1; padding: 12px; background: #e9ecef; color: #495057; border: none; border-radius: 6px; font-size: 14px; font-weight: 500; cursor: pointer;">취소</button>
                </div>
                <div style="text-align: center; margin-top: 16px;">
                    <a href="#" onclick="switchToLogin()" style="color: #dc2626; text-decoration: none; font-size: 14px;">이미 회원이신가요? 로그인</a>
                </div>
            </div>
        </div>
    `;

    // body에 모달 추가
    document.body.insertAdjacentHTML('beforeend', loginModalHTML);
    document.body.insertAdjacentHTML('beforeend', signupModalHTML);
}

// 모달 열기/닫기 함수들
function openLoginModal() {
    document.getElementById('loginModal').style.display = 'block';
}

function closeLoginModal() {
    document.getElementById('loginModal').style.display = 'none';
    document.getElementById('modalLoginId').value = '';
    document.getElementById('modalLoginPw').value = '';
}

function openSignupModal() {
    document.getElementById('signupModal').style.display = 'block';
}

function closeSignupModal() {
    document.getElementById('signupModal').style.display = 'none';
    document.getElementById('signupId').value = '';
    document.getElementById('signupPw').value = '';
    document.getElementById('signupPwConfirm').value = '';
    document.getElementById('signupNickname').value = '';
    document.getElementById('agreeTerms').checked = false;
    document.getElementById('idCheckMsg').innerHTML = '';
    document.getElementById('pwCheckMsg').innerHTML = '';
}

function switchToSignup() {
    closeLoginModal();
    openSignupModal();
}

function switchToLogin() {
    closeSignupModal();
    openLoginModal();
}

// 아이디 중복 체크
async function checkIdAvailable(id) {
    try {
        const response = await fetch(`http://localhost:1337/api/users?filters[username][$eq]=${id}`);
        const data = await response.json();
        return data.length === 0;
    } catch (error) {
        console.error('중복 체크 오류:', error);
        return false;
    }
}

// 아이디 유효성 검사
document.addEventListener('DOMContentLoaded', function() {
    // 모달 생성
    createModals();
    
    // 아이디 입력 시 실시간 체크
    const signupIdInput = document.getElementById('signupId');
    if (signupIdInput) {
        signupIdInput.addEventListener('input', function() {
            const id = this.value;
            const msg = document.getElementById('idCheckMsg');
            
            if (id.length < 4) {
                msg.innerHTML = '<span style="color: #dc2626;">아이디는 4자 이상이어야 합니다.</span>';
            } else if (!/^[a-zA-Z0-9]+$/.test(id)) {
                msg.innerHTML = '<span style="color: #dc2626;">영문과 숫자만 사용 가능합니다.</span>';
            } else if (!checkIdAvailable(id)) {
                msg.innerHTML = '<span style="color: #dc2626;">이미 사용중인 아이디입니다.</span>';
            } else {
                msg.innerHTML = '<span style="color: #16a34a;">사용 가능한 아이디입니다.</span>';
            }
        });
    }
    
    // 비밀번호 확인 실시간 체크
    const pwConfirmInput = document.getElementById('signupPwConfirm');
    if (pwConfirmInput) {
        pwConfirmInput.addEventListener('input', function() {
            const pw = document.getElementById('signupPw').value;
            const pwConfirm = this.value;
            const msg = document.getElementById('pwCheckMsg');
            
            if (pwConfirm && pw !== pwConfirm) {
                msg.innerHTML = '<span style="color: #dc2626;">비밀번호가 일치하지 않습니다.</span>';
            } else if (pwConfirm && pw === pwConfirm) {
                msg.innerHTML = '<span style="color: #16a34a;">비밀번호가 일치합니다.</span>';
            }
        });
    }
});

// 회원가입 처리
async function doSignup() {
    const id = document.getElementById('signupId').value;
    const pw = document.getElementById('signupPw').value;
    const pwConfirm = document.getElementById('signupPwConfirm').value;
    const nickname = document.getElementById('signupNickname').value;
    const agreeTerms = document.getElementById('agreeTerms').checked;
    
    // 유효성 검사
    if (!id || !pw || !nickname) {
        alert('모든 필수 항목을 입력해주세요.');
        return;
    }
    
    if (id.length < 4 || !/^[a-zA-Z0-9]+$/.test(id)) {
        alert('아이디는 4자 이상의 영문, 숫자만 사용 가능합니다.');
        return;
    }
    
    if (pw.length < 6) {
        alert('비밀번호는 6자 이상이어야 합니다.');
        return;
    }
    
    if (pw !== pwConfirm) {
        alert('비밀번호가 일치하지 않습니다.');
        return;
    }
    
    if (nickname.length < 2 || nickname.length > 10) {
        alert('닉네임은 2~10자여야 합니다.');
        return;
    }
    
    if (!agreeTerms) {
        alert('이용약관에 동의해주세요.');
        return;
    }
    
   try {
    const response = await fetch('http://localhost:1337/api/auth/local/register', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            username: id,
            email: `${id}@5dragons.com`,
            password: pw
        })
    });
    
    const data = await response.json();
    
    if (response.ok) {
        // 프로필 업데이트
        await fetch(`http://localhost:1337/api/users/${data.user.id}`, {
            method: 'PUT',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${data.jwt}`
            },
            body: JSON.stringify({
                nickname: nickname,
                points: 1000,
                level: 1
            })
        });
        
        alert(`회원가입이 완료되었습니다!\n가입 축하 포인트 1000P가 지급되었습니다.`);
        closeSignupModal();
        openLoginModal();
    } else {
        if (data.error.message.includes('already taken')) {
            alert('이미 사용중인 아이디입니다.');
        } else {
            alert('회원가입에 실패했습니다: ' + data.error.message);
        }
    }
    } catch (error) {
        console.error('회원가입 오류:', error);
        alert('서버 연결에 실패했습니다.');
    }
}

// 로그인 처리
async function doLogin() {
    const id = document.getElementById('modalLoginId').value;
    const pw = document.getElementById('modalLoginPw').value;
    
    if (!id || !pw) {
        alert('아이디와 비밀번호를 입력해주세요.');
        return;
    }
    
    try {
        const response = await fetch('http://localhost:1337/api/auth/local', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                identifier: id,
                password: pw
            })
        });
        
        const data = await response.json();
        
        if (response.ok) {
            // 토큰 저장
            localStorage.setItem('token', data.jwt);
            localStorage.setItem('user', JSON.stringify(data.user));
            
            // 기존 로직 유지
            isAdmin = data.user.role?.type === 'uptownnguyen';
            currentUser = data.user.nickname || data.user.username;
            gameState.userPoints = data.user.points || 1000;
  

	await loadattendancesData(data.user.id, data.jwt);

          
            alert(`${currentUser}님 환영합니다!`);
            
            // 상단 로그인 링크 업데이트
            const loginLinks = document.querySelector('.login-links');
            if (loginLinks) {
                loginLinks.innerHTML = `
                    <span style="color: #495057;">${currentUser}님</span>
                    <a href="#" onclick="logout()">로그아웃</a>
                `;
            }
            
            closeLoginModal();
            updateLoginBox();
            updateMobileLoginStatus();
            startNotificationCheck();
            
            if (isAdmin) {
                renderAllPosts();
            }
        } else {
            alert('아이디 또는 비밀번호가 일치하지 않습니다.');
        }
    } catch (error) {
        console.error('로그인 오류:', error);
        alert('서버 연결에 실패했습니다.');
    }
}

// 모바일 로그인 상태 업데이트
function updateMobileLoginStatus() {
    const mobileStatus = document.getElementById('mobileLoginStatus');
    if (mobileStatus) {
        if (currentUser) {
            mobileStatus.innerHTML = `
                <div style="color: ${isAdmin ? '#dc2626' : '#495057'};">${isAdmin ? '👑 ' : ''}${currentUser}님</div>
                <button onclick="logout()" style="margin-top: 10px; padding: 5px 15px; background: #6c757d; color: white; border: none; border-radius: 4px; font-size: 12px;">로그아웃</button>
            `;
        } else {
            mobileStatus.innerHTML = `
                <button onclick="openLoginModal()" style="padding: 8px 20px; background: #dc2626; color: white; border: none; border-radius: 4px;">로그인</button>
            `;
        }
    }
}

// 빠른 로그인 수정 (기존 handleQuickLogin 함수 대체)
async function handleQuickLogin() {
    const id = document.getElementById('quickLoginId').value;
    const pw = document.getElementById('quickLoginPw').value;
    
    if (!id || !pw) {
        alert('아이디와 비밀번호를 입력해주세요.');
        return;
    }
    
    try {
        const response = await fetch('http://localhost:1337/api/auth/local', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                identifier: id,
                password: pw
            })
        });
        
        const data = await response.json();
        
        if (response.ok) {
            localStorage.setItem('token', data.jwt);
            localStorage.setItem('user', JSON.stringify(data.user));
            
            isAdmin = data.user.nickname === '관리자';
            currentUser = data.user.nickname || data.user.username;
            gameState.userPoints = data.user.points || 1000;
            
            // userData 초기화 (출석 기록 불러오기 전에)
            if (!userData[currentUser]) {
                userData[currentUser] = {
                    level: 1,
                    exp: 0,
                    ownedItems: [],
                    equippedBadges: [],
                    equippedTitle: null,
                    equippedEffect: null,
                    attendances: {
                        lastCheck: null,
                        streak: 0,
                        history: [],
                        monthlyChecks: {}
                    }
                };
            }
         await loadattendancesData(data.user.id, data.jwt);
          
            // 포인트 이력 불러오기
            try {
               const pointResponse = await fetch(
   `http://localhost:1337/api/point-histories?populate=*&filters[users_permissions_user][id][$eq]=${data.user.id}&sort=createdAt:desc&pagination[limit]=50`,
    {
        headers: {
            'Authorization': `Bearer ${data.jwt}`
        }
    }
);
                
                if (pointResponse.ok) {
                    const pointData = await pointResponse.json();
                    
                    if (pointData.data && pointData.data.length > 0) {
                        pointHistory = [];
                        
                        pointData.data.forEach(record => {
                            pointHistory.push({
                                id: record.id,
                                amount: record.amount,
                                reason: record.description,
                                date: new Date(record.createdAt),
                                balance: record.balance
                            });
                        });
                        
                        console.log('✅ 포인트 이력 불러오기 성공:', pointHistory.length, '개');
                    }
                }
            } catch (error) {
                console.error('포인트 이력 불러오기 오류:', error);
            }

            alert(`${currentUser}님 환영합니다!`);
            
            const loginLinks = document.querySelector('.login-links');
            if (loginLinks) {
                loginLinks.innerHTML = `
                    <span style="color: #495057;">${currentUser}님</span>
                    <a href="#" onclick="logout()">로그아웃</a>
                `;
            }
            
            updateLoginBox();
            updateMobileLoginStatus();
            startNotificationCheck();
            
            if (isAdmin) {
                renderAllPosts();
            }
        } else {
            alert('아이디 또는 비밀번호가 일치하지 않습니다.');
        }
    } catch (error) {
        console.error('로그인 오류:', error);
        alert('서버 연결에 실패했습니다.');
    }
}
  // 관리자 상태 변수 (맨 위에 추가)
let isAdmin = false;
let currentUser = null; 
let blockedUsers = []; // 이것도 추가하세요  

// 로그인 박스 업데이트 함수 (1465번 줄 근처)
function updateLoginBox() {
    const loginBox = document.querySelector('.login-box');
    if (!loginBox) return;
    
    if (currentUser) {
        // 사용자 데이터 초기화
        initUserData(currentUser);
        const user = userData[currentUser];
        const levelInfo = getUserLevel(user.exp);
        const nextLevel = levelSystem.levels.find(l => l.level === levelInfo.level + 1);
        const expPercent = nextLevel ? 
            ((user.exp - levelInfo.exp) / (nextLevel.exp - levelInfo.exp) * 100) : 100;
        
        loginBox.innerHTML = `
            <div style="text-align: center; padding: 10px;">
                <p style="margin: 0; color: ${isAdmin ? '#dc2626' : '#495057'}; font-weight: 600;">
                    ${isAdmin ? '👑 ' : ''}${currentUser}님
                </p>
                <button onclick="logout()" class="login-btn" style="margin-top: 10px;">로그아웃</button>
                ${isAdmin ? '<button onclick="showAdminPanel()" class="btn btn-secondary" style="width: 100%; margin-top: 5px;">관리자 패널</button>' : ''}
            </div>
            <div style="margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 8px;">
                <div style="display: flex; align-items: center; gap: 5px; margin-bottom: 5px;">
                    <span style="font-size: 14px; font-weight: 600;">Lv.${levelInfo.level}</span>
                    <span style="font-size: 12px; color: #6c757d;">${levelInfo.title}</span>
                </div>
                <div class="level-progress">
                    <div class="level-progress-bar" style="width: ${expPercent}%"></div>
                </div>
                <div class="level-info">
                    <span>EXP: ${user.exp}</span>
                    <span>${nextLevel ? nextLevel.exp : 'MAX'}</span>
                </div>
            </div>
            <div class="quick-menu">
                <button class="quick-menu-btn" onclick="openattendances()">
                    <span class="icon">📅</span>
                    출석체크
                </button>
                <button class="quick-menu-btn" onclick="openShop()">
                    <span class="icon">🛍️</span>
                    포인트상점
                </button>
            </div>
        `;
    } else {
        loginBox.innerHTML = `
            <input type="text" placeholder="아이디" id="quickLoginId">
            <input type="password" placeholder="비밀번호" id="quickLoginPw">
            <button class="login-btn" onclick="handleQuickLogin()">로그인</button>
        `;
    }
    
    // 관리자 메뉴 표시/숨김
    const adminMenuItem = document.getElementById('adminMenuItem');
    if (adminMenuItem) {
        adminMenuItem.style.display = isAdmin ? 'block' : 'none';
    }
    
    // 공지사항 렌더링 (모든 사용자)
setTimeout(() => {
    if (isAdmin) {
        createNoticeWriteForm(); // 작성 폼은 관리자만
    }
    renderNotices(); // 공지사항 목록은 모두 볼 수 있게
}, 100);
    }



function logout() {
    // 포인트 저장
    if (currentUser) {
        const user = usersDB.find(u => u.nickname === currentUser);
        if (user) {
            user.points = gameState.userPoints;
        }
    }
    
    // 전역 변수 초기화 (userData는 유지!)
    isAdmin = false;
    currentUser = null;
    
    // localStorage 정리
    localStorage.removeItem('token');
    localStorage.removeItem('user');
    
    // 로그인 박스 초기화
    const loginBox = document.querySelector('.login-box');
    if (loginBox) {
        loginBox.innerHTML = `
            <input type="text" placeholder="아이디" id="quickLoginId">
            <input type="password" placeholder="비밀번호" id="quickLoginPw">
            <button class="login-btn" onclick="handleQuickLogin()">로그인</button>
        `;
    }
    
    // 상단 로그인 링크 초기화
    const loginLinks = document.querySelector('.login-links');
    if (loginLinks) {
        loginLinks.innerHTML = `
            <a href="#" onclick="openLoginModal()">로그인</a>
            <a href="#" onclick="openSignupModal()">회원가입</a>
        `;
    }
    
    // 관리자 메뉴 숨기기
    const adminMenuItem = document.getElementById('adminMenuItem');
    if (adminMenuItem) {
        adminMenuItem.style.display = 'none';
    }
    
    // 알림 시스템 정리
    if (notificationInterval) {
        clearInterval(notificationInterval);
        notificationInterval = null;
    }
    
    updateMobileLoginStatus();
    renderAllPosts();
    
    alert('로그아웃되었습니다.');
    
    // 홈으로 이동
    showPage('home');
    
    // 네비게이션 active 상태 초기화
    const navLinks = document.querySelectorAll('.nav-menu a');
    navLinks.forEach(link => link.classList.remove('active'));
}

function deletePost(postType, postId) {
    if (!isAdmin) {
        alert('관리자만 삭제할 수 있습니다.');
        return;
    }
    
    if (confirm('정말로 이 게시글을 삭제하시겠습니까?')) {
        const index = postsData[postType].findIndex(p => p.id === postId);
        if (index !== -1) {
            postsData[postType].splice(index, 1);
            renderPosts(postType);
            alert('게시글이 삭제되었습니다.');
        }
    }
}



function blockUser(username) {
    if (!isAdmin) return;
    
    if (confirm(`${username}님을 차단하시겠습니까?`)) {
        blockedUsers.push(username);
        alert(`${username}님이 차단되었습니다.`);
        
        // 차단된 사용자의 모든 게시글 숨기기
        Object.keys(postsData).forEach(postType => {
            postsData[postType] = postsData[postType].filter(post => post.author !== username);
        });
        renderAllPosts();
    }
}

function pinPost(postType, postId) {
    if (!isAdmin) return;
    
    const post = postsData[postType].find(p => p.id === postId);
    if (post) {
        post.isPinned = !post.isPinned;
        post.title = post.isPinned ? `📌 ${post.title}` : post.title.replace('📌 ', '');
        renderPosts(postType);
        alert(post.isPinned ? '게시글이 고정되었습니다.' : '고정이 해제되었습니다.');
    }
}

function showAdminPanel() {
    const totalPosts = Object.values(postsData).reduce((sum, posts) => sum + posts.length, 0);
    const totalVotes = Object.values(postsData).flat().reduce((sum, post) => sum + post.likes + post.dislikes, 0);
    
    alert(`📊 관리자 통계
    
총 게시글: ${totalPosts}개
총 투표수: ${totalVotes}개
차단된 사용자: ${blockedUsers.length}명
현재 포인트: ${gameState.userPoints}P

🛠 관리 기능:
- 게시글 옆 [삭제] 버튼으로 삭제
- 작성자명 클릭으로 사용자 차단
- [📌] 버튼으로 공지 고정`);
}

function renderAllPosts() {
    ['verify', 'onca', 'offca', 'freeboard', 'entertainment'].forEach(postType => {
        renderPosts(postType);
    });
}

// 실시간 인기글 계산 함수
function getPopularPosts() {
    let allPosts = [];
    
    // 모든 게시판의 글을 모음
    Object.keys(postsData).forEach(boardType => {
        postsData[boardType].forEach(post => {
            allPosts.push({
                ...post,
                boardType: boardType,
                boardName: getBoardName(boardType),
                score: (post.likes || 0) * 2 + (post.views || 0) + (commentsData[boardType][post.id]?.length || 0) * 3
            });
        });
    });
    
    // 점수 기준으로 정렬하여 상위 3개 반환
    return allPosts.sort((a, b) => b.score - a.score).slice(0, 3);
}

// 실시간 인기글 렌더링
function renderPopularPosts() {
    const popularPosts = getPopularPosts();
    const container = document.querySelector('.right-sidebar .sidebar-content .sidebar-list');
    if (!container) return;
    
    let html = '';
    popularPosts.forEach((post, index) => {
        const rankColors = ['#dc2626', '#ea580c', '#d97706'];
        const rankIcons = ['🥇', '🥈', '🥉'];
        
        html += `
            <li style="margin-bottom: 12px; cursor: pointer;" onclick="showPostDetail('${post.boardType}', ${post.id})">
                <div style="display: flex; align-items: start; gap: 8px;">
                    <span style="font-size: 20px;">${rankIcons[index]}</span>
                    <div style="flex: 1;">
                        <div style="font-size: 13px; font-weight: 600; color: #212529; margin-bottom: 2px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                            ${post.title}
                        </div>
                        <div style="font-size: 11px; color: #6c757d;">
                            ${post.boardName} · 👍${post.likes || 0} · 💬${commentsData[post.boardType][post.id]?.length || 0}
                        </div>
                    </div>
                </div>
            </li>
        `;
    });
    
    container.innerHTML = html;
}


// 게시글 데이터 (실제로는 서버에서 가져올 데이터)
        let postsData = {
            verify: [
                {
                    id: 105,
                    title: "[먹튀확정] XX토토 출금 거부",
                    author: "피해자1",
                    date: "2025.06.25",
                    status: "확정",
                    content: "XX토토에서 300만원 출금 신청했는데 3일째 처리되지 않고 있습니다. 고객센터 문의해도 답변이 없네요.",
                    likes: 24,
                    dislikes: 2,
                    userVote: null
                },
                {
                    id: 104,
                    title: "[검증요청] YY카지노 이상 결과",
                    author: "신고자2",
                    date: "2025.06.24",
                    status: "검증중",
                    content: "YY카지노에서 바카라 게임 중 이상한 패턴이 지속적으로 나타나고 있습니다. 검증 부탁드립니다.",
                    likes: 12,
                    dislikes: 1,
                    userVote: null
                }
            ],
            onca: [
                {
                    id: 89,
                    title: "[바카라] 에볼루션 10연승!",
                    author: "lucky_man",
                    date: "2025.06.25",
                    content: "에볼루션 바카라에서 10연승 달성했습니다! 마틴게일 전략으로 성공했네요.",
                    likes: 45,
                    dislikes: 3,
                    userVote: null
                },
                {
                    id: 88,
                    title: "[룰렛] 마틴게일 전략 성공",
                    author: "roulette_king",
                    date: "2025.06.24",
                    content: "라이브 룰렛에서 마틴게일로 50만원 수익 올렸습니다. 자본 관리가 핵심이네요.",
                    likes: 32,
                    dislikes: 8,
                    userVote: null
                }
            ],
            offca: [
                {
                    id: 34,
                    title: "[강원랜드] 블랙잭 후기",
                    author: "casino_lover",
                    date: "2025.06.23",
                    content: "강원랜드 다녀왔습니다. 블랙잭 테이블 분위기 좋았고 딜러들도 친절했어요.",
                    likes: 28,
                    dislikes: 1,
                    userVote: null
                },
                {
                    id: 33,
                    title: "[마카오] 여행 카지노 후기",
                    author: "traveler99",
                    date: "2025.06.22",
                    content: "마카오 베네시안 카지노 다녀온 후기입니다. 규모가 정말 어마어마하네요.",
                    likes: 41,
                    dislikes: 2,
                    userVote: null
                }
            ],
            freeboard: [
                {
                    id: 156,
                    title: "신규 회원인데 궁금한게 있어요",
                    author: "newbie123",
                    date: "2025.06.27",
                    category: "질문",
                    content: "안전한 사이트 구분하는 방법이 있을까요? 초보자라 잘 모르겠어요.",
                    likes: 18,
                    dislikes: 0,
                    userVote: null
                },
                {
                    id: 155,
                    title: "오늘 운이 정말 좋았네요!",
                    author: "lucky_day",
                    date: "2025.06.26",
                    category: "잡담",
                    content: "오늘 바카라에서 대박났습니다! 여러분도 좋은 하루 되세요~",
                    likes: 67,
                    dislikes: 3,
                    userVote: null
                }
            ],
            entertainment: [
                {
                    id: 87,
                    title: "[강남] 레X스 방문 후기 (만족)",
                    author: "night_owl",
                    date: "2025.06.26",
                    area: "강남",
                    theme: "텐프로",
                    content: "강남 레X스 다녀왔습니다. 서비스나 분위기 모두 만족스러웠어요.",
                    likes: 89,
                    dislikes: 12,
                    userVote: null
                },
                {
                    id: 86,
                    title: "[홍대] 퍼X트 가라오케 솔직후기",
                    author: "party_king",
                    date: "2025.06.25",
                    area: "홍대",
                    theme: "가라오케",
                    content: "홍대 퍼X트 가라오케 후기입니다. 시설은 괜찮은데 가격이 좀 비싸네요.",
                    likes: 34,
                    dislikes: 7,
                    userVote: null
                }
            ],
guarantee: [], 
generalPromo: [],    
freeMoney: [],
blacklist: []

        };

// 댓글 데이터 구조
let commentsData = {
    verify: {},
    onca: {},
    offca: {},
    freeboard: {},
    entertainment: {},
    notice: {},
    generalPromo: {},    
    freeMoney: {},
    blacklist: {} 
};

// 알림 시스템 데이터
let notificationsData = {
    notifications: [],
    unreadCount: 0,
    lastCheck: new Date()
};

// 알림 타입 정의
const NOTIFICATION_TYPES = {
    COMMENT: 'comment',
    REPLY: 'reply',
    NOTICE: 'notice',
    POINT: 'point',
    SYSTEM: 'system'
};

// 알림 생성 함수
function createNotification(type, data) {
    const notification = {
        id: Date.now() + '_' + Math.random().toString(36).substr(2, 9),
        type: type,
        data: data,
        isRead: false,
        createdAt: new Date(),
        message: generateNotificationMessage(type, data)
    };
    
    notificationsData.notifications.unshift(notification);
    notificationsData.unreadCount++;
    
    // 최대 50개까지만 보관
    if (notificationsData.notifications.length > 50) {
        notificationsData.notifications = notificationsData.notifications.slice(0, 50);
    }
    
    updateNotificationUI();
    
    return notification;
}

// 알림 메시지 생성
function generateNotificationMessage(type, data) {
    switch(type) {
        case NOTIFICATION_TYPES.COMMENT:
            return `💬 ${data.author}님이 "${data.postTitle}"에 댓글을 남겼습니다`;
        case NOTIFICATION_TYPES.REPLY:
            return `↩️ ${data.author}님이 회원님의 댓글에 답글을 남겼습니다`;
        case NOTIFICATION_TYPES.NOTICE:
            return `📢 새로운 공지사항: "${data.title}"`;
        case NOTIFICATION_TYPES.POINT:
            return `💰 ${data.points}P를 획득했습니다! (${data.reason})`;
        case NOTIFICATION_TYPES.SYSTEM:
            return `🔔 ${data.message}`;
        default:
            return '새로운 알림이 있습니다';
    }
}

// 알림 읽음 처리
function markNotificationAsRead(notificationId) {
    const notification = notificationsData.notifications.find(n => n.id === notificationId);
    if (notification && !notification.isRead) {
        notification.isRead = true;
        notificationsData.unreadCount--;
        updateNotificationUI();
    }
}

// 모든 알림 읽음 처리
function markAllNotificationsAsRead() {
    notificationsData.notifications.forEach(n => n.isRead = true);
    notificationsData.unreadCount = 0;
    updateNotificationUI();
}

// 시간 표시 형식
function getTimeAgo(date) {
    const now = new Date();
    const diff = now - date;
    const minutes = Math.floor(diff / 60000);
    const hours = Math.floor(diff / 3600000);
    const days = Math.floor(diff / 86400000);
    
    if (minutes < 1) return '방금 전';
    if (minutes < 60) return `${minutes}분 전`;
    if (hours < 24) return `${hours}시간 전`;
    if (days < 7) return `${days}일 전`;
    return date.toLocaleDateString('ko-KR');
}

// 알림 UI 업데이트
function updateNotificationUI() {
    const badge = document.getElementById('notificationBadge');
    const list = document.getElementById('notificationList');
    
    // 뱃지 업데이트
    if (notificationsData.unreadCount > 0) {
        badge.style.display = 'block';
        badge.textContent = notificationsData.unreadCount > 99 ? '99+' : notificationsData.unreadCount;
    } else {
        badge.style.display = 'none';
    }
    
    // 알림 목록 렌더링
    if (notificationsData.notifications.length === 0) {
        list.innerHTML = '<div class="notification-empty">새로운 알림이 없습니다</div>';
        return;
    }
    
    let html = '';
    notificationsData.notifications.forEach(notification => {
        html += `
            <div class="notification-item ${notification.isRead ? '' : 'unread'}" 
                 onclick="handleNotificationClick('${notification.id}')">
                <div class="notification-message">${notification.message}</div>
                <div class="notification-time">${getTimeAgo(notification.createdAt)}</div>
            </div>
        `;
    });
    
    list.innerHTML = html;
}

// 알림 드롭다운 토글
function toggleNotifications() {
    const dropdown = document.getElementById('notificationDropdown');
    const isOpen = dropdown.style.display === 'block';
    
    if (isOpen) {
        dropdown.style.display = 'none';
    } else {
        dropdown.style.display = 'block';
    }
}

// 알림 클릭 처리
function handleNotificationClick(notificationId) {
    markNotificationAsRead(notificationId);
    
    const notification = notificationsData.notifications.find(n => n.id === notificationId);
    if (!notification) return;
    
    // 타입별 처리
    switch(notification.type) {
        case NOTIFICATION_TYPES.COMMENT:
        case NOTIFICATION_TYPES.REPLY:
            // 해당 게시글로 이동
            if (notification.data.postType && notification.data.postId) {
                toggleNotifications();
                showPostDetail(notification.data.postType, notification.data.postId);
            }
            break;
        case NOTIFICATION_TYPES.NOTICE:
            // 공지사항 페이지로 이동
            toggleNotifications();
            showPage('notice');
            break;
    }
}

// 외부 클릭 시 드롭다운 닫기
document.addEventListener('click', function(event) {
    const container = document.querySelector('.notification-container');
    const dropdown = document.getElementById('notificationDropdown');
    
    if (!container.contains(event.target) && dropdown.style.display === 'block') {
        dropdown.style.display = 'none';
    }
});

// 실시간 체크 (5초마다)
let notificationInterval;

function startNotificationCheck() {
    // 초기 UI 업데이트
    updateNotificationUI();
    
    // 5초마다 체크 (실제로는 서버에서 새 알림을 가져오는 로직)
    notificationInterval = setInterval(() => {
        checkForNewNotifications();
    }, 5000);
}

function checkForNewNotifications() {
    // 여기서는 데모용으로 현재 댓글 수 체크 등을 할 수 있음
    // 실제로는 서버 API 호출
}

// 페이지 로드 시 알림 시스템 시작
document.addEventListener('DOMContentLoaded', function() {
    if (currentUser) {
        startNotificationCheck();
    }
});

// 댓글 ID 생성 함수
function generateCommentId() {
    return Date.now() + '_' + Math.random().toString(36).substr(2, 9);
}

// 댓글 추가 함수
function addComment(postType, postId, content, parentId = null) {
    if (!currentUser) {
        alert('로그인 후 댓글을 작성할 수 있습니다.');
        return;
    }
    
    if (!content.trim()) {
        alert('댓글 내용을 입력해주세요.');
        return;
    }
    
    // 게시글별 댓글 배열 초기화
    if (!commentsData[postType][postId]) {
        commentsData[postType][postId] = [];
    }
    
    const newComment = {
        id: generateCommentId(),
        postId: postId,
        author: currentUser,
        content: content.trim(),
        date: new Date().toLocaleDateString('ko-KR', {
            year: 'numeric',
            month: '2-digit',
            day: '2-digit'
        }).replace(/\//g, '.'),
        time: new Date().toLocaleTimeString('ko-KR', {
            hour: '2-digit',
            minute: '2-digit'
        }),
        parentId: parentId,
        likes: 0,
        dislikes: 0,
        userVote: null,
        isDeleted: false
    };
    
    commentsData[postType][postId].push(newComment);

// 알림 생성 (게시글 작성자에게)
    if (currentUser && window.currentPost) {
        const post = window.currentPost.post;
        if (post.author !== currentUser) {  // 자기 글이 아닐 때만
            createNotification(
                parentId ? NOTIFICATION_TYPES.REPLY : NOTIFICATION_TYPES.COMMENT,
                {
                    author: currentUser,
                    postTitle: post.title,
                    postType: postType,
                    postId: postId
                }
            );
        }
    }
    
    // 댓글 작성 포인트 지급 (10~30P)
    const points = Math.floor(Math.random() * 21) + 10;
    gameState.userPoints += points;
    updateDisplay();
    showFloatingText(`+${points}P 댓글 작성 보상!`, '#22c55e');


// 경험치 추가
if (currentUser) {
    addExp(10, '댓글 작성');
}

    
// 포인트 알림 생성
createNotification(NOTIFICATION_TYPES.POINT, {
    points: points,
    reason: '댓글 작성 보상'
});

// Strapi에 댓글 저장
(async () => {
    try {
        const token = localStorage.getItem('token');
        const userData = JSON.parse(localStorage.getItem('user') || '{}');
        
        if (token && userData.id) {
            const commentData = {
                data: {
                    content: content,
                     user: userData.id,
                    post: parseInt(postId) || postId,
                    parent: parentId ? parseInt(parentId) : null 
                }
            };
            
            const response = await fetch('http://localhost:1337/api/comments', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify(commentData)
            });
            
           if (response.ok) {
    const savedComment = await response.json();
    // 생성된 댓글의 Strapi ID 저장
    newComment.strapiId = savedComment.data.id;
    console.log('✅ Strapi 댓글 저장 성공, ID:', savedComment.data.id);
          
  } else {
                console.error('❌ 댓글 저장 실패:', response.status);
                try {
                    const errorData = await response.json();
                    console.error('오류 상세:', errorData);
                    console.error('보낸 데이터:', commentData);
                } catch (e) {
                    console.error('오류 파싱 실패:', e);
                }
            }
        }
    } catch (error) {
        console.error('댓글 API 오류:', error);
    }
})();  // ← 여기가 중요! 

return newComment;
}  // addComment 함수 끝

// 댓글 삭제 함수
async function deleteComment(postType, postId, commentId) {
    const comments = commentsData[postType][postId];
    if (!comments) return;
    
    const comment = comments.find(c => c.id === commentId);
    if (!comment) return;
    
    // 작성자 또는 관리자만 삭제 가능
    if (comment.author !== currentUser && !isAdmin) {
        alert('본인의 댓글만 삭제할 수 있습니다.');
        return;
    }
    
    if (confirm('댓글을 삭제하시겠습니까?')) {
        // Strapi에서 삭제 (실제 ID가 있는 경우만)
        try {
            const token = localStorage.getItem('token');
            if (token && comment.strapiId) {
                const deleteResponse = await fetch(
                    `http://localhost:1337/api/comments/${comment.strapiId}`,
                    {
                        method: 'DELETE',
                        headers: {
                            'Authorization': `Bearer ${token}`
                        }
                    }
                );
                
                if (deleteResponse.ok) {
                    console.log('✅ Strapi 댓글 삭제 성공');
                } else {
                    console.error('❌ Strapi 댓글 삭제 실패');
                }
            }
        } catch (error) {
            console.error('댓글 삭제 API 오류:', error);
        }
        
        // 로컬에서는 삭제 표시만
        comment.isDeleted = true;
        comment.content = '삭제된 댓글입니다.';
        renderComments(postType, postId);
    }
}

function renderPosts(postType) {
    // 단계별 API 테스트
    (async () => {
        try {
            const cleanPostType = postType.toString().trim();
            console.log('🔍 API 호출 시작:', cleanPostType);
            
            // 기본 조회 (populate 제거하여 오류 방지)
          const url = `http://localhost:1337/api/posts?filters[board][slug][$eq]=${cleanPostType}&sort=createdAt:desc&populate=*`;
            console.log('📡 요청 URL:', url);

            
            const response = await fetch(url);
            
            if (!response.ok) {
                console.error('❌ API 오류:', response.status);
                const errorText = await response.text();
                console.error('오류 내용:', errorText);
                return;
            }
            
            const data = await response.json();
            
           if (data.data && data.data.length > 0) {
    console.log(`✅ ${cleanPostType} 게시판:`, data.data.length, '개 조회 성공');
    console.log('📄 첫 번째 게시글 구조:', data.data[0]);



const convertedPosts = data.data.map(post => ({
        id: post.id,
        title: post.title,
        content: post.content || '',
        author: post.users_permissions_user?.nickname || post.users_permissions_user?.username || '익명',
        date: new Date(post.createdAt).toLocaleDateString('ko-KR').replace(/\//g, '.'),
        likes: post.likes || 0,
        dislikes: post.dislikes || 0,
        views: post.views || 0,
        userVote: null
    }));
    
    // 기존 데이터와 병합 (Strapi 데이터를 앞에 배치)
    // 중복 제거 후 병합
const existingIds = postsData[cleanPostType].map(p => p.id);
const newPosts = convertedPosts.filter(post => !existingIds.includes(post.id));
postsData[cleanPostType] = [...newPosts, ...postsData[cleanPostType]];
    console.log('🔄 데이터 병합 완료:', postsData[cleanPostType].length, '개');




            } else {
                console.log(`ℹ️ ${cleanPostType} 게시판: 데이터 없음`);
            }
            
        } catch (error) {
            console.error('💥 API 호출 실패:', error.message);
        }
    })();
    
  // 기존 함수 실행
    const allPosts = postsData[postType];
    if (!allPosts) return;

    const posts = getPagedPosts(postType);  // 페이지네이션 적용
    
    let tableBody = '';
    
    // 각 게시판별로 테이블 렌더링
    if (postType === 'verify') {
        posts.forEach(post => {
            tableBody += `
                <tr>
                    <td>${post.id}</td>
                    <td class="title"><a href="#" onclick="showPostDetail('${postType}', ${post.id})">${post.title}</a></td>
                    <td>${post.author}</td>
                    <td>${post.date}</td>
                    <td><span class="status-badge status-${post.status === '확정' ? 'confirmed' : 'checking'}">${post.status || '검증중'}</span></td>
                </tr>
            `;
        });
    } else if (postType === 'freeboard') {
        posts.forEach(post => {
            tableBody += `
                <tr>
                    <td>${post.id}</td>
                    <td><span class="status-badge" style="background: #e0f2fe; color: #0277bd;">${post.category || '일반'}</span></td>
                    <td class="title"><a href="#" onclick="showPostDetail('${postType}', ${post.id})">${post.title}</a></td>
                    <td>${post.author}</td>
                    <td>${post.date}</td>
                    <td>${post.views || 0}</td>
                </tr>
            `;
        });
    } else {
        posts.forEach(post => {
            tableBody += `
                <tr>
                    <td>${post.id}</td>
                    <td class="title"><a href="#" onclick="showPostDetail('${postType}', ${post.id})">${post.title}</a></td>
                    <td>${post.author}</td>
                    <td>${post.date}</td>
                    <td>${post.views || 0}</td>
                </tr>
            `;
        });
    }
    
    // 테이블에 렌더링
    const tbody = document.querySelector(`#${postType} .board-table tbody, #${postType}-tbody`);
    if (tbody) {
        tbody.innerHTML = tableBody;
    }
    
    // 페이지네이션 추가
    const tableContainer = document.querySelector(`#${postType} .board-table`);
    if (tableContainer) {
        const existingPagination = tableContainer.parentElement.querySelector('.pagination');
        if (existingPagination) {
            existingPagination.remove();
        }
        
        const paginationHTML = createPagination(postType, allPosts.length);
        tableContainer.insertAdjacentHTML('afterend', paginationHTML);
    }
}



// 댓글 좋아요/싫어요
function voteComment(postType, postId, commentId, voteType) {
    const comments = commentsData[postType][postId];
    if (!comments) return;
    
    const comment = comments.find(c => c.id === commentId);
    if (!comment) return;
    
    // 이전 투표 취소
    if (comment.userVote === 'like') {
        comment.likes--;
    } else if (comment.userVote === 'dislike') {
        comment.dislikes--;
    }
    
    // 새 투표 적용
    if (comment.userVote === voteType) {
        comment.userVote = null;
    } else {
        comment.userVote = voteType;
        if (voteType === 'like') {
            comment.likes++;
        } else {
            comment.dislikes++;
        }
    }
    
    renderComments(postType, postId);
}

   // 댓글 렌더링 함수
function renderComments(postType, postId) {
    const comments = commentsData[postType][postId] || [];
 
  // 페이지 방식과 모달 방식 둘 다 지원
let container = document.getElementById(`comments-${postType}-${postId}`);
if (!container) {
    container = document.getElementById('commentsList');
}
if (!container) return;
    
    // 댓글을 부모/자식 구조로 정리
    const parentComments = comments.filter(c => !c.parentId);
    
    let html = '';
    parentComments.forEach(comment => {
        html += createCommentHTML(comment, comments);
    });
    
    container.innerHTML = html;
}

// 댓글 HTML 생성
function createCommentHTML(comment, allComments) {
    const replies = allComments.filter(c => c.parentId === comment.id);
    const isAuthor = comment.author === currentUser;
    const canDelete = isAuthor || isAdmin;
    
    let html = `
        <div class="comment-item ${comment.isDeleted ? 'deleted' : ''}" data-comment-id="${comment.id}">
            <div class="comment-header">
                <span class="comment-author">${getUserDisplay(comment.author)}</span>
                <span class="comment-date">${comment.date} ${comment.time}</span>
                ${canDelete && !comment.isDeleted ? `
                    <button class="comment-delete-btn" onclick="deleteComment('${comment.postType}', '${comment.postId}', '${comment.id}')">삭제</button>
                ` : ''}
            </div>
            <div class="comment-content">${comment.content}</div>
            ${!comment.isDeleted ? `
                <div class="comment-actions">
                    <button class="comment-vote-btn ${comment.userVote === 'like' ? 'active' : ''}" 
                            onclick="voteComment('${comment.postType}', '${comment.postId}', '${comment.id}', 'like')">
                        👍 ${comment.likes}
                    </button>
                    <button class="comment-vote-btn ${comment.userVote === 'dislike' ? 'active' : ''}" 
                            onclick="voteComment('${comment.postType}', '${comment.postId}', '${comment.id}', 'dislike')">
                        👎 ${comment.dislikes}
                    </button>
                    <button class="comment-reply-btn" onclick="toggleReplyForm('${comment.id}')">답글</button>
                </div>
                <div class="reply-form" id="reply-form-${comment.id}" style="display: none;">
                    <textarea class="reply-input" placeholder="답글을 입력하세요..."></textarea>
                    <button onclick="submitReply('${comment.postType}', '${comment.postId}', '${comment.id}')">등록</button>
                    <button onclick="toggleReplyForm('${comment.id}')">취소</button>
                </div>
            ` : ''}
    `;
    
    // 답글 표시
    if (replies.length > 0) {
        html += '<div class="comment-replies">';
        replies.forEach(reply => {
            html += createCommentHTML(reply, allComments);
        });
        html += '</div>';
    }
    
    html += '</div>';
    return html;
}

// 답글 폼 토글
function toggleReplyForm(commentId) {
    const form = document.getElementById(`reply-form-${commentId}`);
    if (form) {
        form.style.display = form.style.display === 'none' ? 'block' : 'none';
    }
}

// 답글 제출
function submitReply(postType, postId, parentId) {
    const form = document.getElementById(`reply-form-${parentId}`);
    const input = form.querySelector('.reply-input');
    const content = input.value.trim();
    
    if (content) {
        const comment = addComment(postType, postId, content, parentId);
        if (comment) {
            comment.postType = postType;
            comment.postId = postId;
            renderComments(postType, postId);
            input.value = '';
            toggleReplyForm(parentId);
        }
    }
}

// 파일 업로드 관련 변수
let uploadedFiles = {
    verify: [],
    onca: [],
    offca: [],
    entertainment: [],
    freeboard: [],
    notice: [],
    generalPromo: [],    
    freeMoney: [] 
};

// 파일 미리보기
function previewFiles(boardType) {
    const input = document.getElementById(`${boardType}Files`);
    const preview = document.getElementById(`${boardType}FilePreview`);
    const files = Array.from(input.files);
    
    if (files.length > 5) {
        alert('최대 5개까지만 첨부 가능합니다.');
        input.value = '';
        return;
    }
    
    preview.innerHTML = '';
    uploadedFiles[boardType] = [];
    
    files.forEach((file, index) => {
        if (file.size > 10 * 1024 * 1024) {
            alert(`${file.name}은 10MB를 초과합니다.`);
            return;
        }
        
        uploadedFiles[boardType].push(file);
        
        const item = document.createElement('div');
        item.className = 'file-preview-item';
        
        if (file.type.startsWith('image/')) {
            const reader = new FileReader();
            reader.onload = (e) => {
                item.innerHTML = `
                    <img src="${e.target.result}" alt="${file.name}">
                    <button class="remove-file" onclick="removeFile('${boardType}', ${index})">×</button>
                `;
            };
            reader.readAsDataURL(file);
        } else {
            item.innerHTML = `
                <div class="file-info">📄 ${file.name}</div>
                <button class="remove-file" onclick="removeFile('${boardType}', ${index})">×</button>
            `;
        }
        
        preview.appendChild(item);
    });
}

// 파일 제거
function removeFile(boardType, index) {
    uploadedFiles[boardType].splice(index, 1);
    previewFiles(boardType);
}

  // 바카라 게임 변수
        let gameState = {
            userPoints: 1000,
            selectedBet: null,
            selectedChip: 10,
            bets: {
                player: 0,
                banker: 0,
                tie: 0
            },
            gameInProgress: false,
            gameHistory: ['P', 'B', 'P', 'T', 'B'],
	    lastAutoChargeDate: null
        };

// 배너 데이터
let bannerData = {
    main: [
        { id: 1, title: '베팅왕', bonus: '100%', code: 'WIN100', link: '#', image: '', active: true },
        { id: 2, title: '스포츠토토', bonus: '50만원', code: 'SPORT50', link: '#', image: '', active: true },
        { id: 3, title: '카지노킹', bonus: '30만원', code: 'KING30', link: '#', image: '', active: true },
        { id: 4, title: '원엑스벳', bonus: '200%', code: '1XBET200', link: '#', image: '', active: true },
        { id: 5, title: '피나클', bonus: '무제한', code: 'PINNACLE', link: '#', image: '', active: true },
        { id: 6, title: '맥스벳', bonus: '80만원', code: 'MAX80', link: '#', image: '', active: true },
        { id: 7, title: '에볼루션', bonus: '첫충 300%', code: 'EVO300', link: '#', image: '', active: true },
        { id: 8, title: '프라그마틱', bonus: '매일 보너스', code: 'PRAGMATIC', link: '#', image: '', active: true },
        { id: 9, title: '아시아게이밍', bonus: '150%', code: 'ASIA150', link: '#', image: '', active: true },
        { id: 10, title: '마이크로게이밍', bonus: '70만원', code: 'MICRO70', link: '#', image: '', active: true },
        { id: 11, title: '플레이테크', bonus: '무료 스핀', code: 'PLAYTECH', link: '#', image: '', active: true },
        { id: 12, title: '넷엔트', bonus: '120%', code: 'NETENT120', link: '#', image: '', active: true }
    ],
    sidebar: [
        { id: 1, title: '프리미어벳', bonus: '신규 300%', code: 'PREMIER300', link: '#', image: '', active: true },
        { id: 2, title: '슈퍼벳', bonus: '매일 보너스', code: 'SUPER42', link: '#', image: '', active: true }
    ]
};

       // 투표 기능
function vote(postType, postId, voteType) {
    const post = postsData[postType].find(p => p.id === postId);
    if (!post) return;
    
    // 이전 투표 취소
    if (post.userVote === 'like') {
        post.likes--;
    } else if (post.userVote === 'dislike') {
        post.dislikes--;
    }
    
    // 새 투표 적용 (같은 버튼 클릭시 취소)
    if (post.userVote === voteType) {
        post.userVote = null;
    } else {
        post.userVote = voteType;
        if (voteType === 'like') {
            post.likes++;
        } else {
            post.dislikes++;
        }
    }
    
    // 화면 업데이트
    renderPosts(postType);
    
    // 경험치 추가 (30% 확률)
    if (currentUser && Math.random() < 0.3) {
        addExp(5, '투표 참여');
    }
    
    // 투표 시 포인트 지급 (5% 확률)
    if (Math.random() < 0.05) {
        const bonusPoints = Math.floor(Math.random() * 20) + 5;
        gameState.userPoints += bonusPoints;
        updateDisplay();
        showFloatingText(`+${bonusPoints}P 참여 보상!`, '#ffd700');
        // 포인트 알림 생성
        createNotification(NOTIFICATION_TYPES.POINT, {
            points: bonusPoints,
            reason: '참여 보상'
        });
    }

    renderPopularPosts();

    // Strapi에 좋아요/싫어요 업데이트
    (async () => {
        try {
            const token = localStorage.getItem('token');
            if (token) {
                // 게시글 검색하여 documentId 찾기
               const searchResponse = await fetch(`http://localhost:1337/api/posts?filters[id][$eq]=${parseInt(postId) || postId}`);
                
                if (searchResponse.ok) {
                    const searchData = await searchResponse.json();
                    
                    if (searchData.data && searchData.data.length > 0) {
                        const targetPost = searchData.data[0];
                        const documentId = targetPost.documentId;
                        
                        console.log('찾은 documentId:', documentId);
                        
                        // documentId로 업데이트
                        const updateResponse = await fetch(`http://localhost:1337/api/posts/${documentId}`, {
                            method: 'PUT',
                            headers: {
                                'Content-Type': 'application/json',
                                'Authorization': `Bearer ${token}`
                            },
                            body: JSON.stringify({
                                data: {
                                    likes: post.likes,
                                    dislikes: post.dislikes
                                }
                            })
                        });
                        
                        if (updateResponse.ok) {
                            console.log('✅ 투표 업데이트 성공!');

                            // 여기에 투표 기록 코드 추가
                            const userData = JSON.parse(localStorage.getItem('user') || '{}');
                            if (userData.id) {
                                const voteData = {
                                    data: {
                                        type: voteType,
                                        post: targetPost.id,
                           //             users_permissions_user: userData.id //
                                    }
                                };
                                
                                const voteResponse = await fetch('http://localhost:1337/api/votes', {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json',
                                        'Authorization': `Bearer ${token}`
                                    },
                                    body: JSON.stringify(voteData)
                                });
                                
                                if (voteResponse.ok) {
                                    console.log('✅ 투표 기록 저장 성공!');
                                } else {
                                    console.error('❌ 투표 기록 실패:', voteResponse.status);
                                    try {
                                        const errorData = await voteResponse.json();
                                        console.error('투표 오류 상세:', errorData);
                                        console.error('보낸 데이터:', voteData);
                                    } catch (e) {
                                        console.error('오류 파싱 실패:', e);
                                    }
                                }
                            }
                        } else {
                            console.error('❌ 업데이트 실패:', updateResponse.status);
                            const errorData = await updateResponse.json();
                            console.error('오류 상세:', errorData);
                        }
                    } else {
                        // Strapi에 게시글이 없는 경우 - 로컬만 업데이트
                        console.log('⚠️ Strapi에 게시글 없음 - 로컬만 업데이트');
                        
                        // Vote 기록은 건너뛰기
                        console.log('투표 기록은 Strapi 게시글이 있을 때만 저장됩니다.');
                    }
                } else {
                    console.error('검색 실패:', searchResponse.status);
                }
            }
        } catch (error) {
            console.error('투표 API 오류:', error);
        }
    })();
}  // vote 함수 끝

      
     // 게시글 상세보기 (페이지 방식)
function showPostDetail(postType, postId) {
    // postId를 숫자로 변환 시도
    postId = parseInt(postId) || postId;
    const post = postsData[postType].find(p => p.id == postId);  // === 를 == 로 변경
    if (!post) return;    
   
 // 조회수 증가
    if (!post.views) post.views = 0;
    post.views++;

	renderPopularPosts();
    
    // 현재 게시글 정보 저장
    window.currentPost = {
        type: postType,
        id: postId,
        post: post
    };
    
    // 페이지 전환
    showPage('postView');
    
    // 게시글 정보 표시
    document.getElementById('postViewTitle').textContent = post.title;
    document.getElementById('postViewAuthor').textContent = post.author;
    document.getElementById('postViewDate').textContent = post.date;
    document.getElementById('postViewCount').textContent = post.views;
    document.getElementById('postViewContent').innerHTML = post.content.replace(/\n/g, '<br>');


   // 첨부파일 표시 (Strapi에서 가져온 파일)
    if (post.attachments && post.attachments.length > 0) {
        // 로컬 파일만 표시 (Strapi 연동 전)
        let attachmentHTML = `
            <div class="post-attachments">
                <div class="post-attachments-title">📎 첨부파일 (${post.attachments.length}개)</div>
                <div class="attachment-list">
        `;
        
      post.attachments.forEach((file, index) => {
            // Strapi 파일인지 로컬 파일인지 확인
            if (file.url) {  // Strapi 파일
                attachmentHTML += `<div class="attachment-item" onclick="window.open('http://localhost:1337${file.url}', '_blank')">📄 ${file.name}</div>`;
                
                // 이미지인 경우 바로 표시
                if (file.mime && file.mime.startsWith('image/')) {
                    attachmentHTML += `<img src="http://localhost:1337${file.url}" style="max-width: 100%; margin-top: 10px; border-radius: 8px;">`;
                }
            } else if (file.type && file.type.startsWith('image/')) {
                // FileReader를 사용해서 로컬 이미지 표시
                const reader = new FileReader();
                reader.onload = function(e) {
                    const imgHTML = `<img src="${e.target.result}" style="max-width: 100%; margin-top: 10px; border-radius: 8px;">`;
                    document.querySelector('.attachment-list').insertAdjacentHTML('beforeend', imgHTML);
                };
                reader.readAsDataURL(file);
                
                attachmentHTML += `<div class="attachment-item">🖼️ ${file.name}</div>`;
            } else {
                attachmentHTML += `<div class="attachment-item">📄 ${file.name || '파일'}</div>`;
            }
        });
        
        attachmentHTML += '</div></div>';
        document.getElementById('postViewContent').insertAdjacentHTML('afterend', attachmentHTML);
    }    
    // 좋아요/싫어요 표시
    document.getElementById('postLikeCount').textContent = post.likes || 0;
    document.getElementById('postDislikeCount').textContent = post.dislikes || 0;
    
    // 투표 버튼 상태 업데이트
    updateVoteButtons();
    
    // 댓글 영역 설정
    updateCommentSection();
    
    // 댓글 렌더링
    renderPageComments();

// 수정/삭제 버튼 추가 (작성자 또는 관리자만)
    const postActionsDiv = document.querySelector('.post-view-actions');
    if (postActionsDiv && (post.author === currentUser || isAdmin)) {
        const existingActions = postActionsDiv.querySelector('.post-actions');
        if (existingActions) existingActions.remove();
        
        const actionsHTML = `
            <div class="post-actions">
                ${post.author === currentUser ? `<button class="edit-btn" onclick="openEditModal('${postType}', ${postId})">수정</button>` : ''}
                ${(post.author === currentUser || isAdmin) ? `<button class="btn btn-secondary" onclick="deletePostWithConfirm('${postType}', ${postId})">삭제</button>` : ''}
            </div>
        `;
        
        postActionsDiv.insertAdjacentHTML('afterbegin', actionsHTML);
    }

}

// 목록으로 돌아가기
function goBackToList() {
    if (window.currentPost) {
        showPage(window.currentPost.type === 'notice' ? 'notice' : window.currentPost.type);
        window.currentPost = null;
    }
}
// 투표 버튼 업데이트
function updateVoteButtons() {
    if (!window.currentPost) return;
    const post = window.currentPost.post;
    
    const likeBtn = document.getElementById('postLikeBtn');
    const dislikeBtn = document.getElementById('postDislikeBtn');
    
    likeBtn.classList.toggle('active', post.userVote === 'like');
    dislikeBtn.classList.toggle('active', post.userVote === 'dislike');
}

// 게시글 투표
function votePost(voteType) {
    if (!window.currentPost) return;
    const post = window.currentPost.post;
    
    // 이전 투표 취소
    if (post.userVote === 'like') {
        post.likes--;
    } else if (post.userVote === 'dislike') {
        post.dislikes--;
    }
    
    // 새 투표 적용
    if (post.userVote === voteType) {
        post.userVote = null;
    } else {
        post.userVote = voteType;
        if (voteType === 'like') {
            post.likes++;
        } else {
            post.dislikes++;
        }
    }
    
    // 화면 업데이트
    document.getElementById('postLikeCount').textContent = post.likes || 0;
    document.getElementById('postDislikeCount').textContent = post.dislikes || 0;
    updateVoteButtons();
}
// 댓글 섹션 업데이트
function updateCommentSection() {
    const commentBox = document.getElementById('commentWriteBox');
    
    if (currentUser) {
        commentBox.innerHTML = `
            <div class="comment-write-box">
                <textarea class="comment-textarea" id="newCommentContent" placeholder="댓글을 입력하세요..."></textarea>
                <button class="comment-submit-btn" onclick="submitPageComment()">댓글 등록</button>
            </div>
        `;
    } else {
        commentBox.innerHTML = `
            <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 8px; margin-bottom: 20px;">
                로그인 후 댓글을 작성할 수 있습니다.
            </div>
        `;
    }
}

// 페이지 방식 댓글 렌더링
function renderPageComments() {
    if (!window.currentPost) return;
    
    const { type, id } = window.currentPost;
    const comments = commentsData[type][id] || [];
    const container = document.getElementById('commentsList');
    
    // 댓글 수 업데이트
    document.getElementById('commentCount').textContent = comments.length;
    
    if (comments.length === 0) {
        container.innerHTML = '<div class="comments-empty">첫 댓글을 남겨주세요!</div>';
        return;
    }
    
    // 부모 댓글만 필터링
    const parentComments = comments.filter(c => !c.parentId);
    let html = '';
    
    parentComments.forEach(comment => {
        html += createPageCommentHTML(comment, comments);
    });
    
    container.innerHTML = html;
}

// 페이지용 댓글 HTML 생성
function createPageCommentHTML(comment, allComments) {
    comment.postType = window.currentPost.type;
    comment.postId = window.currentPost.id;
    return createCommentHTML(comment, allComments);
}

// 페이지에서 댓글 작성
function submitPageComment() {
    if (!window.currentPost) return;
    
    const textarea = document.getElementById('newCommentContent');
    const content = textarea.value.trim();
    
    if (content) {
        const { type, id } = window.currentPost;
        const comment = addComment(type, id, content);
        
        if (comment) {
            renderPageComments();
            textarea.value = '';
        }
    }
}

// 게시글 투표 버튼에 이벤트 추가
document.addEventListener('DOMContentLoaded', function() {
    const likeBtn = document.getElementById('postLikeBtn');
    const dislikeBtn = document.getElementById('postDislikeBtn');
    
    if (likeBtn) {
        likeBtn.onclick = () => votePost('like');
    }
    if (dislikeBtn) {
        dislikeBtn.onclick = () => votePost('dislike');
    }
});

// 모달 닫기
function closePostDetail() {
    const modal = document.getElementById('postDetailModal');
    if (modal) {
        modal.remove();
        document.removeEventListener('keydown', handleEscKey);
    }
}

// ESC 키 핸들러
function handleEscKey(e) {
    if (e.key === 'Escape') {
        closePostDetail();
    }
}

// 새 댓글 작성
function submitNewComment(postType, postId) {
    const textarea = document.getElementById('newCommentContent');
    const content = textarea.value.trim();
    
    if (content) {
        const comment = addComment(postType, postId, content);
        if (comment) {
            comment.postType = postType;
            comment.postId = postId;
            renderComments(postType, postId);
            textarea.value = '';
            
            // 댓글 수 업데이트
            const countElement = document.querySelector('.comments-title');
            if (countElement) {
                const count = commentsData[postType][postId]?.length || 0;
                countElement.textContent = `💬 댓글 ${count}개`;
            }
        }
    }
}

const suits = ['♠', '♥', '♦', '♣'];
        const values = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
        
        function createDeck() {
            let deck = [];
            for (let suit of suits) {
                for (let value of values) {
                    let cardValue = value === 'A' ? 1 : (value === 'J' || value === 'Q' || value === 'K') ? 10 : parseInt(value);
                    deck.push({
                        suit: suit,
                        value: value,
                        numValue: cardValue,
                        color: (suit === '♥' || suit === '♦') ? 'red' : 'black'
                    });
                }
            }
            return shuffle(deck);
        }

        function shuffle(deck) {
            for (let i = deck.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [deck[i], deck[j]] = [deck[j], deck[i]];
            }
            return deck;
        }

        // 바카라 점수 계산
        function calculateBaccaratScore(cards) {
            let total = cards.reduce((sum, card) => sum + card.numValue, 0);
            return total % 10;
        }

        // 칩 선택
        function selectChip(amount) {
            gameState.selectedChip = amount;
            document.querySelectorAll('.bet-chip').forEach(chip => {
                chip.classList.remove('selected');
            });
            document.querySelector(`[data-amount="${amount}"]`).classList.add('selected');
        }

        // 배팅 선택
        function selectBet(betType) {
            if (gameState.gameInProgress) return;
            
            gameState.selectedBet = betType;
            
            // 현재 선택된 칩으로 배팅 추가
            if (gameState.userPoints >= gameState.selectedChip) {
                gameState.bets[betType] += gameState.selectedChip;
                gameState.userPoints -= gameState.selectedChip;
                
                updateDisplay();
                
                // 배팅 시 랜덤 포인트 지급 (글 작성 보상 시뮬레이션)
                if (Math.random() < 0.3) { // 30% 확률
                    const bonusPoints = Math.floor(Math.random() * 50) + 10;
                    gameState.userPoints += bonusPoints;
                    showFloatingText(`+${bonusPoints}P 보너스!`, '#ffd700');

// 포인트 알림 생성
createNotification(NOTIFICATION_TYPES.POINT, {
    points: bonusPoints,
    reason: '배팅 보너스'
});

                }
            } else {
                alert('포인트가 부족합니다!');
            }
        }

        // 배팅 초기화
        function clearBets() {
            if (gameState.gameInProgress) return;
            
            // 배팅한 포인트 반환
            gameState.userPoints += gameState.bets.player + gameState.bets.banker + gameState.bets.tie;
            gameState.bets = { player: 0, banker: 0, tie: 0 };
            
            updateDisplay();
        }

      // 카드 딜
        function dealCards() {
            if (gameState.bets.player === 0 && gameState.bets.banker === 0 && gameState.bets.tie === 0) {
                alert('배팅을 먼저 해주세요!');
                return;
            }
            
            gameState.gameInProgress = true;
            document.getElementById('dealBtn').disabled = true;
            document.getElementById('gameResult').style.display = 'none';
            
            // 덱 생성 및 초기 2장씩 딜
            const deck = createDeck();
            const playerCards = [deck.pop(), deck.pop()];
            const bankerCards = [deck.pop(), deck.pop()];
            
            // 초기 카드 표시
            setTimeout(() => {
                displayCards('player', playerCards);
                displayCards('banker', bankerCards);
                
                // 초기 점수 계산
                let playerScore = calculateBaccaratScore(playerCards);
                let bankerScore = calculateBaccaratScore(bankerCards);
                
                document.getElementById('playerTotal').textContent = playerScore;
                document.getElementById('bankerTotal').textContent = bankerScore;
                
                // 내추럴 체크 (8 또는 9)
                if (playerScore >= 8 || bankerScore >= 8) {
                    setTimeout(() => {
                        determineWinner(playerScore, bankerScore);
                    }, 1000);
                    return;
                }
                
                // 세 번째 카드 규칙
                setTimeout(() => {
                    let playerThirdCard = null;
                    
                    // 플레이어 세 번째 카드
                    if (playerScore <= 5) {
                        playerThirdCard = deck.pop();
                        playerCards.push(playerThirdCard);
                        displayCards('player', playerCards);
                        playerScore = calculateBaccaratScore(playerCards);
                        document.getElementById('playerTotal').textContent = playerScore;
                    }
                    
                    // 뱅커 세 번째 카드 규칙
                    setTimeout(() => {
                        let drawBankerCard = false;
                        
                        if (!playerThirdCard) {
                            // 플레이어가 스탠드한 경우
                            drawBankerCard = bankerScore <= 5;
                        } else {
                            // 플레이어가 세 번째 카드를 받은 경우
                            const thirdValue = playerThirdCard.numValue;
                            
                            if (bankerScore <= 2) {
                                drawBankerCard = true;
                            } else if (bankerScore === 3) {
                                drawBankerCard = thirdValue !== 8;
                            } else if (bankerScore === 4) {
                                drawBankerCard = [2,3,4,5,6,7].includes(thirdValue);
                            } else if (bankerScore === 5) {
                                drawBankerCard = [4,5,6,7].includes(thirdValue);
                            } else if (bankerScore === 6) {
                                drawBankerCard = [6,7].includes(thirdValue);
                            }
                        }
                        
                        if (drawBankerCard) {
                            bankerCards.push(deck.pop());
                            displayCards('banker', bankerCards);
                            bankerScore = calculateBaccaratScore(bankerCards);
                            document.getElementById('bankerTotal').textContent = bankerScore;
                        }
                        
                        // 최종 승부 결정
                        setTimeout(() => {
                            determineWinner(playerScore, bankerScore);
                        }, 1000);
                        
                    }, 1000);
                }, 1000);
                
            }, 500);
        }

        // 카드 표시
        function displayCards(side, cards) {
            const container = document.getElementById(side + 'Cards');
            container.innerHTML = '';
            
            cards.forEach((card, index) => {
                setTimeout(() => {
                    const cardElement = document.createElement('div');
                    cardElement.className = `card ${card.color}`;
                    cardElement.textContent = card.value + card.suit;
                    container.appendChild(cardElement);
                }, index * 200);
            });
        }

        // 승부 결정
        function determineWinner(playerScore, bankerScore) {
            let result, resultClass;
            let winnings = 0;
            
            if (playerScore > bankerScore) {
                result = 'PLAYER 승리!';
                resultClass = 'result-win';
                winnings += gameState.bets.player * 2; // 1:1 배당
                updateGameHistory('P');
            } else if (bankerScore > playerScore) {
                result = 'BANKER 승리!';
                resultClass = 'result-win';
                winnings += Math.floor(gameState.bets.banker * 1.95); // 1:1 배당 - 5% 수수료
                updateGameHistory('B');
            } else {
                result = 'TIE (무승부)!';
                resultClass = 'result-tie';
                winnings += gameState.bets.tie * 9; // 8:1 배당
                // 플레이어, 뱅커 배팅은 무승부시 반환
                winnings += gameState.bets.player + gameState.bets.banker;
                updateGameHistory('T');
            }
            
            // 승리 포인트 지급
            gameState.userPoints += winnings;
            
            // 결과 표시
            const resultElement = document.getElementById('gameResult');
            resultElement.textContent = `${result} 획득 포인트: +${winnings}P`;
            resultElement.className = `game-result ${resultClass}`;
            resultElement.style.display = 'block';
            
            // 배팅 초기화
            gameState.bets = { player: 0, banker: 0, tie: 0 };
            gameState.gameInProgress = false;
            
            // 버튼 상태 변경
            document.getElementById('dealBtn').disabled = false;
            document.getElementById('newGameBtn').style.display = 'inline-block';
            
            updateDisplay();
            
         // 포인트 부족 시 자동 충전 (하루 1번)
            if (gameState.userPoints < 10) {
                const today = new Date().toDateString();
                
                if (gameState.lastAutoChargeDate !== today) {
                    setTimeout(() => {
                        gameState.userPoints += 500;
                        gameState.lastAutoChargeDate = today;
                        updateDisplay();
                        showFloatingText('+500P 일일 자동 충전!', '#22c55e');

                        // 포인트 알림 생성
                        createNotification(NOTIFICATION_TYPES.POINT, {
                            points: 500,
                            reason: '일일 자동 충전'
                        });
                    }, 2000);
                } else {
                    setTimeout(() => {
                        alert('오늘의 자동 충전을 이미 받으셨습니다.\n내일 다시 이용해주세요!');
                    }, 2000);
                }
            }
        }

        // 게임 히스토리 업데이트
        function updateGameHistory(result) {
            gameState.gameHistory.unshift(result);
            if (gameState.gameHistory.length > 10) {
                gameState.gameHistory.pop();
            }
            
            const historyContainer = document.getElementById('gameHistory');
            historyContainer.innerHTML = '';
            
            gameState.gameHistory.forEach(item => {
                const span = document.createElement('span');
                span.className = `history-item history-${item === 'P' ? 'player' : item === 'B' ? 'banker' : 'tie'}`;
                span.textContent = item;
                historyContainer.appendChild(span);
            });
        }

        // 새 게임
        function newGame() {
            // 카드 초기화
            document.getElementById('playerCards').innerHTML = `
                <div class="card card-back">🂠</div>
                <div class="card card-back">🂠</div>
            `;
            document.getElementById('bankerCards').innerHTML = `
                <div class="card card-back">🂠</div>
                <div class="card card-back">🂠</div>
            `;
            
            document.getElementById('playerTotal').textContent = '?';
            document.getElementById('bankerTotal').textContent = '?';
            document.getElementById('gameResult').style.display = 'none';
            document.getElementById('newGameBtn').style.display = 'none';
            
            updateDisplay();
        }

        // 화면 업데이트
        function updateDisplay() {
            document.getElementById('userPoints').textContent = gameState.userPoints;

// Strapi 포인트 동기화 (너무 자주 호출되지 않도록 디바운스)
    if (currentUser && !updateDisplay.syncing) {
        updateDisplay.syncing = true;
        setTimeout(() => {
            syncUserDataToStrapi();
            updateDisplay.syncing = false;
        }, 1000); // 1초 후 동기화
    }

            
            // 배팅 금액 표시
            document.getElementById('playerBetAmount').textContent = gameState.bets.player + 'P';
            document.getElementById('bankerBetAmount').textContent = gameState.bets.banker + 'P';
            document.getElementById('tieBetAmount').textContent = gameState.bets.tie + 'P';
            
            // 배팅 옵션 스타일 업데이트
            document.querySelectorAll('.bet-option').forEach(option => {
                const betType = option.getAttribute('data-bet');
                if (gameState.bets[betType] > 0) {
                    option.classList.add('selected');
                } else {
                    option.classList.remove('selected');
                }
            });
        

     }

        // Strapi와 사용자 데이터 동기화
        async function syncUserDataToStrapi() {
            const token = localStorage.getItem('token');
            const userStrapi = JSON.parse(localStorage.getItem('user') || '{}');
            
            if (!token || !userStrapi.id || !currentUser) return;
            
            // 현재 사용자의 로컬 데이터
            const userLocal = userData[currentUser];
            
            try {
                await fetch(`http://localhost:1337/api/users/${userStrapi.id}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({
                        points: gameState.userPoints,
                        level: userLocal?.level || 1,
                        exp: userLocal?.exp || 0
                    })
                });
            } catch (error) {
                console.error('Strapi 동기화 오류:', error);
            }
        }





  // 플로팅 텍스트 표시
function showFloatingText(text, color) {
    const floatingDiv = document.createElement('div');
    floatingDiv.textContent = text;
    floatingDiv.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: ${color};
        font-size: 24px;
        font-weight: bold;
        pointer-events: none;
        z-index: 10000;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        animation: floatUp 2s ease-out forwards;
    `;
    
    // CSS 애니메이션 정의
    if (!document.getElementById('floatingAnimation')) {
        const style = document.createElement('style');
        style.id = 'floatingAnimation';
        style.textContent = `
            @keyframes floatUp {
                0% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
                100% { opacity: 0; transform: translate(-50%, -150%) scale(1.2); }
            }
        `;
        document.head.appendChild(style);
    }
    
    document.body.appendChild(floatingDiv);
    
    setTimeout(() => {
        document.body.removeChild(floatingDiv);
    }, 2000);
    
    // 포인트 텍스트에서 금액 추출 및 히스토리 추가
    const match = text.match(/([+-]?\d+)P/);
    if (match) {
        const amount = parseInt(match[1]);
        const reason = text.replace(/[+-]?\d+P/, '').trim();
        addPointHistory(amount, reason);

        // Strapi에 포인트 이력 저장
        let type = 'etc';
        if (reason.includes('글 작성')) type = 'post';
        else if (reason.includes('댓글')) type = 'comment';
        else if (reason.includes('출석')) type = 'attendances';
        else if (reason.includes('레벨업')) type = 'levelup';
        else if (reason.includes('충전')) type = 'admin';
        
        savePointHistory(amount, type, reason);
    }
}


// 배너 렌더링 함수
function renderBanners() {
    // 메인 배너 렌더링
    const mainContainer = document.getElementById('mainBanners');
    if (mainContainer) {
        let mainHTML = '';
        bannerData.main.forEach(banner => {
            if (banner.active) {
                if (banner.image) {
                    // 이미지가 있으면 이미지 배너로 표시
                    mainHTML += `
                        <div class="banner-ad" onclick="if('${banner.link}' !== '#') window.open('${banner.link}', '_blank')" style="padding: 0; overflow: hidden;">
                            <img src="${banner.image}" alt="${banner.title}" style="width: 100%; height: 100%; object-fit: cover;">
                        </div>
                    `;
                } else {
                    // 이미지가 없으면 기존 텍스트 배너로 표시
                    mainHTML += `
                        <div class="banner-ad" onclick="if('${banner.link}' !== '#') window.open('${banner.link}', '_blank')">
                            <div class="banner-title">${banner.title}</div>
                            <div class="banner-bonus">${banner.bonus}</div>
                            <div class="banner-code">${banner.code}</div>
                        </div>
                    `;
                }
            }
        });
        mainContainer.innerHTML = mainHTML;
    }

 const bottomContainer = document.getElementById('bottomBanners');
    if (bottomContainer && mainContainer) {
        bottomContainer.innerHTML = mainContainer.innerHTML;
    }
    
    // 사이드바 배너 렌더링
    const sidebarContainer = document.getElementById('sidebarBanners');
    if (sidebarContainer) {
        let sidebarHTML = '';
        bannerData.sidebar.forEach(banner => {
            if (banner.active) {
                if (banner.image) {
                    // 이미지가 있으면 이미지 배너로 표시
                    sidebarHTML += `
                        <div style="margin-bottom: 12px; cursor: pointer; overflow: hidden; border-radius: 8px;" 
                             onclick="if('${banner.link}' !== '#') window.open('${banner.link}', '_blank')">
                            <img src="${banner.image}" alt="${banner.title}" style="width: 100%; height: auto; display: block;">
                        </div>
                    `;
                } else {
                    // 이미지가 없으면 기존 텍스트 배너로 표시
                    sidebarHTML += `
                        <div style="background: #f8f9fa; border-radius: 8px; padding: 16px; text-align: center; margin-bottom: 12px; cursor: pointer; transition: all 0.2s ease;" 
                             onclick="if('${banner.link}' !== '#') window.open('${banner.link}', '_blank')" 
                             onmouseover="this.style.transform='translateY(-2px)'" 
                             onmouseout="this.style.transform='translateY(0)'">
                            <div style="font-size: 16px; font-weight: 600; color: #212529; margin-bottom: 4px;">${banner.title}</div>
                            <div style="font-size: 20px; color: #dc2626; font-weight: 700; margin-bottom: 8px;">${banner.bonus}</div>
                            <div style="background: #e9ecef; padding: 4px 12px; border-radius: 4px; font-size: 12px; color: #495057; display: inline-block;">${banner.code}</div>
                        </div>
                    `;
                }
            }
        });
        sidebarContainer.innerHTML = sidebarHTML;
    }
}    
    

        // 자유게시판 글 작성 시 포인트 지급
        function submitPost(type) {
            // 차단된 사용자 체크
            if (blockedUsers.includes(currentUser || "익명회원")) {
                alert('차단된 사용자는 글을 작성할 수 없습니다.');
                return;
            }

            let title, content;
            
            if (type === 'freeboard') {
                title = document.getElementById('freeboardTitle').value;
                content = document.getElementById('freeboardContent').value;
                const category = document.getElementById('freeboardCategory').value;
                
                if (!title || !content || !category) {
                    alert('제목, 카테고리, 내용을 모두 입력해주세요.');
                    return;
                }
                
                // 글 작성 시 새 게시글 추가
                const newPost = {
                    id: postsData[type].length > 0 ? Math.max(...postsData[type].map(p => p.id)) + 1 : 1,
                    title: title,
                    author: currentUser || "익명회원",
                    date: new Date().toLocaleDateString('ko-KR', {
                        year: 'numeric',
                        month: '2-digit',
                        day: '2-digit'
                    }).replace(/\//g, '.'),
                    content: content,
                    likes: 0,
                    dislikes: 0,
                    userVote: null,
                    category: category,
                    attachments: uploadedFiles[type] || []

                };

                // 배열 맨 앞에 추가
                postsData[type].unshift(newPost);
                
                // 글 작성 시 랜덤 포인트 지급
                const earnedPoints = Math.floor(Math.random() * 100) + 50; // 50-149 포인트
                gameState.userPoints += earnedPoints;
                updateDisplay();
                showFloatingText(`+${earnedPoints}P 글 작성 보상!`, '#22c55e');

// 경험치 추가
if (currentUser) {
    addExp(30, '게시글 작성');
}


// 포인트 알림 생성
createNotification(NOTIFICATION_TYPES.POINT, {
    points: earnedPoints,
    reason: '글 작성 보상'
});

                
                alert(`글이 성공적으로 등록되었습니다!\n포인트 ${earnedPoints}P를 획득하셨습니다!`);
                cancelWrite(type);
		// 파일 업로드 초기화
                uploadedFiles[type] = [];


		// 새 글 작성 시 첫 페이지로 이동
		currentPages[type] = 1;  


const contentToSave = newPost.content;
const titleToSave = newPost.title;

// Strapi API 연동
(async () => {
    try {
        const token = localStorage.getItem('token');
	 const userData = JSON.parse(localStorage.getItem('user') || '{}');
        
         if (token && userData.id) { 
            // 파일 업로드 먼저 처리
            let uploadedFileIds = [];
            
            if (uploadedFiles[type] && uploadedFiles[type].length > 0) {
                console.log('📎 파일 업로드 시작...');
                
                for (const file of uploadedFiles[type]) {
                    const formData = new FormData();
                    formData.append('files', file);
                    
                    try {
                        const uploadResponse = await fetch('http://localhost:1337/api/upload', {
                            method: 'POST',
                            headers: {
                                'Authorization': `Bearer ${token}`
                            },
                            body: formData
                        });
                        
                        if (uploadResponse.ok) {
                            const uploadedFile = await uploadResponse.json();
                            uploadedFileIds.push(uploadedFile[0].id);
                            console.log('✅ 파일 업로드 성공:', uploadedFile[0].name);
                        } else {
                            console.error('❌ 파일 업로드 실패');
                        }
                    } catch (error) {
                        console.error('파일 업로드 오류:', error);
                    }
                }
            }
            
            const boardResponse = await fetch(`http://localhost:1337/api/boards?filters[slug][$eq]=${type}`);
            const boardData = await boardResponse.json();
            const boardId = boardData.data[0]?.id;

            if (boardId) {               



		const postData = {
    data: {
        title: titleToSave,
        content: [
            {
                type: "paragraph",
                children: [
                    {
                        type: "text",
                        text: contentToSave
                    }
                ]
            }
        ],
        board: boardId,

	// users_permissions_user: userData.id, //
        attachments: uploadedFileIds.length > 0 ? uploadedFileIds : [],
        likes: 0,            
        dislikes: 0 
    }
};
                
                console.log('📤 보내는 데이터:', JSON.stringify(postData, null, 2));

                const response = await fetch('http://localhost:1337/api/posts', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(postData)
                });
                
                if (response.ok) {
                    console.log('✅ Strapi 게시글 저장 성공');
                } else {
                    const errorData = await response.json();
                    console.error('❌ Strapi 게시글 저장 실패:', JSON.stringify(errorData, null, 2));
                }
            }
        }
    } catch (error) {
        console.error('Strapi API 오류:', error);
    }
})();



          
             	  // 게시글 목록 새로고침
                renderPosts(type);
                return;
            }
            
            // 기존 로직...
            if (type === 'verify') {
                title = document.getElementById('verifyTitle').value;
                content = document.getElementById('verifyContent').value;
                const site = document.getElementById('verifySite').value;
                const amount = document.getElementById('verifyAmount').value;
                
                if (!title || !content || !site) {
                    alert('제목, 사이트명, 신고내용을 모두 입력해주세요.');
                    return;
                }
            } else if (type === 'onca') {
                title = document.getElementById('oncaTitle').value;
                content = document.getElementById('oncaContent').value;
                const site = document.getElementById('oncaSite').value;
                const game = document.getElementById('oncaGame').value;
                
                if (!title || !content || !site || !game) {
                    alert('제목, 사이트명, 게임종류, 후기내용을 모두 입력해주세요.');
                    return;
                }
            } else if (type === 'offca') {
                title = document.getElementById('offcaTitle').value;
                content = document.getElementById('offcaContent').value;
                const casino = document.getElementById('offcaCasino').value;
                const game = document.getElementById('offcaGame').value;
                
                if (!title || !content || !casino || !game) {
                    alert('제목, 카지노명, 게임종류, 후기내용을 모두 입력해주세요.');
                    return;
                }
            } else if (type === 'entertainment') {
                title = document.getElementById('entertainmentTitle').value;
                content = document.getElementById('entertainmentContent').value;
                const shop = document.getElementById('entertainmentShop').value;
                const theme = document.getElementById('entertainmentTheme').value;
                const area = document.getElementById('entertainmentArea').value;
                
                if (!title || !content || !shop || !theme || !area) {
                    alert('제목, 업소명, 업소테마, 지역, 후기내용을 모두 입력해주세요.');
                    return;
                }
            }

else if (type === 'generalPromo') {
    title = document.getElementById('generalPromoTitle').value;
    content = document.getElementById('generalPromoContent').value;
    const site = document.getElementById('generalPromoSite').value;
    
    if (!title || !content || !site) {
        alert('제목, 사이트명, 내용을 모두 입력해주세요.');
        return;
    }
} else if (type === 'freeMoney') {
    title = document.getElementById('freeMoneyTitle').value;
    content = document.getElementById('freeMoneyContent').value;
    const site = document.getElementById('freeMoneySite').value;
    const amount = document.getElementById('freeMoneyAmount').value;
    const condition = document.getElementById('freeMoneyCondition').value;
    
    if (!title || !content || !site || !amount) {
        alert('제목, 사이트명, 꽁머니 금액, 내용을 모두 입력해주세요.');
        return;
    }
}

            
            alert('글이 성공적으로 등록되었습니다!\n(실제 서버 연동시 DB에 저장됩니다)');
            
            // 새 게시글 추가 로직 (위의 freeboard와 동일)
            const newPost = {
                id: postsData[type].length > 0 ? Math.max(...postsData[type].map(p => p.id)) + 1 : 1,
                title: title,
                

author: currentUser || "익명회원",
                date: new Date().toLocaleDateString('ko-KR', {
                    year: 'numeric',
                    month: '2-digit',
                    day: '2-digit'
                }).replace(/\//g, '.'),
                content: content,
                likes: 0,
                dislikes: 0,
                userVote: null
            };

            if (type === 'verify') {
                newPost.status = "검증중";
            } else if (type === 'entertainment') {
                newPost.area = document.getElementById('entertainmentArea').value;
                newPost.theme = document.getElementById('entertainmentTheme').value;
            }

else if (type === 'generalPromo') {
    newPost.site = document.getElementById('generalPromoSite').value;
} else if (type === 'freeMoney') {
    newPost.site = document.getElementById('freeMoneySite').value;
    newPost.amount = document.getElementById('freeMoneyAmount').value;
    newPost.condition = document.getElementById('freeMoneyCondition').value;
}



	newPost.attachments = uploadedFiles[type] || [];

         postsData[type].unshift(newPost);

// content를 미리 저장
const contentToSave = newPost.content;
const titleToSave = newPost.title;

// 폼 초기화 (이제 해도 됨)
cancelWrite(type);

// submitPost 함수 내의 Strapi API 연동 부분
(async () => {
    try {
        const token = localStorage.getItem('token');
        const userData = JSON.parse(localStorage.getItem('user') || '{}');
        
        if (token && userData.id) { 
          // 파일 업로드 먼저 처리
let uploadedFileIds = [];

if (uploadedFiles[type] && uploadedFiles[type].length > 0) {
    console.log('📎 파일 업로드 시작...');
    
    for (const file of uploadedFiles[type]) {
        const formData = new FormData();
        formData.append('files', file);
        
        try {
            const uploadResponse = await fetch('http://localhost:1337/api/upload', {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${token}`
                },
                body: formData
            });
            
            if (uploadResponse.ok) {
                const uploadedFile = await uploadResponse.json();
                uploadedFileIds.push(uploadedFile[0].id);
                console.log('✅ 파일 업로드 성공:', uploadedFile[0].name);
            } else {
                console.error('❌ 파일 업로드 실패');
            }
        } catch (error) {
            console.error('파일 업로드 오류:', error);
        }
    }
}
            
            const boardResponse = await fetch(`http://localhost:1337/api/boards?filters[slug][$eq]=${type}`);
            const boardData = await boardResponse.json();
            const boardId = boardData.data[0]?.id;

            if (boardId) {               
           const postData = {
    data: {
        title: titleToSave,
        content: [
            {
                type: "paragraph",
                children: [
                    {
                        type: "text",
                        text: contentToSave
                    }
                ]
            }
        ],
        board: boardId,
	// users_permissions_user: userData.id, //
        attachments: uploadedFileIds.length > 0 ? uploadedFileIds : [],
        likes: 0,            
        dislikes: 0 
    }
};
                
                console.log('📤 보내는 데이터:', JSON.stringify(postData, null, 2));

                const response = await fetch('http://localhost:1337/api/posts', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify(postData)
                });
                
               if (!response.ok) {
    const errorData = await response.json();
    console.error('❌ Strapi 게시글 저장 실패');
    console.error('전체 에러:', JSON.stringify(errorData, null, 2));  // JSON.stringify 추가
    console.error('보낸 데이터:', JSON.stringify(postData, null, 2));  // JSON.stringify 추가
    console.error('userData:', userData);
    
    // 구체적인 에러 메시지 표시
    if (errorData.error?.details?.errors) {
        errorData.error.details.errors.forEach(err => {
            console.error(`문제 필드: ${err.path.join('.')}, 메시지: ${err.message}`);
        });
    }
}
            }
        }
    } catch (error) {
        console.error('Strapi API 오류:', error);
    }
})();

renderPosts(type);
}




// 블랙리스트 등록 함수
function submitBlacklist() {
    if (!isAdmin) {
        alert('관리자만 블랙리스트를 등록할 수 있습니다.');
        return;
    }
    
    const nickname = document.getElementById('blacklistNickname').value.trim();
    const reason = document.getElementById('blacklistReason').value.trim();
    
    if (!nickname || !reason) {
        alert('닉네임과 사유를 모두 입력해주세요.');
        return;
    }
    
    // 이미 등록된 회원인지 확인
    const existingBlacklist = postsData.blacklist.find(item => item.nickname === nickname);
    if (existingBlacklist) {
        alert('이미 블랙리스트에 등록된 회원입니다.');
        return;
    }
    
    // 새 블랙리스트 항목 생성
    const newBlacklist = {
        id: postsData.blacklist.length > 0 ? Math.max(...postsData.blacklist.map(b => b.id)) + 1 : 1,
        nickname: nickname,
        reason: reason,
        registeredBy: currentUser,
        date: new Date().toLocaleDateString('ko-KR', {
            year: 'numeric',
            month: '2-digit',
            day: '2-digit'
        }).replace(/\//g, '.')
    };
    
    postsData.blacklist.unshift(newBlacklist);
    
    // blockedUsers 배열에도 추가
    if (!blockedUsers.includes(nickname)) {
        blockedUsers.push(nickname);
    }
    
    alert(`${nickname}님이 블랙리스트에 등록되었습니다.`);
    cancelWrite('blacklist');
    renderBlacklist();
}

// 블랙리스트 렌더링 함수
function renderBlacklist() {
    const tbody = document.getElementById('blacklist-tbody');
    if (!tbody) return;
    
    let html = '';
    
    if (postsData.blacklist.length === 0) {
        html = `
            <tr>
                <td colspan="5" style="text-align: center; padding: 40px; color: #6c757d;">
                    등록된 블랙리스트가 없습니다.
                </td>
            </tr>
        `;
    } else {
        postsData.blacklist.forEach((item, index) => {
            html += `
                <tr>
                    <td>${postsData.blacklist.length - index}</td>
                    <td><strong>${item.nickname}</strong></td>
                    <td>${item.reason}</td>
                    <td>${item.date}</td>
                    <td>
                        ${isAdmin ? `<button onclick="removeFromBlacklist('${item.nickname}')" class="btn btn-secondary" style="padding: 4px 12px; font-size: 12px;">해제</button>` : '-'}
                    </td>
                </tr>
            `;
        });
    }
    
    tbody.innerHTML = html;
    
    // 관리자인 경우 작성 버튼 표시
    const writeBtn = document.getElementById('blacklistWriteBtn');
    if (writeBtn) {
        writeBtn.style.display = isAdmin ? 'inline-block' : 'none';
    }
}

// 블랙리스트 해제 함수
function removeFromBlacklist(nickname) {
    if (!isAdmin) {
        alert('관리자만 블랙리스트를 해제할 수 있습니다.');
        return;
    }
    
    if (confirm(`${nickname}님을 블랙리스트에서 해제하시겠습니까?`)) {
        // postsData에서 제거
        postsData.blacklist = postsData.blacklist.filter(item => item.nickname !== nickname);
        
        // blockedUsers에서도 제거
        const index = blockedUsers.indexOf(nickname);
        if (index > -1) {
            blockedUsers.splice(index, 1);
        }
        
        alert(`${nickname}님이 블랙리스트에서 해제되었습니다.`);
        renderBlacklist();
    }
}

   
// 회원 랭킹 렌더링 함수
async function renderUserRanking() {
    try {
        // Strapi에서 사용자 목록 가져오기
        const response = await fetch('http://localhost:1337/api/users?sort=points:desc&pagination[limit]=10');
        
        if (response.ok) {
            const data = await response.json();
            
            // 상위 10명만 표시 (관리자 제외)
            const rankedUsers = data.filter(user => user.role?.type !== 'admin').slice(0, 10);
            
            const rankingHTML = rankedUsers.map((user, index) => {
                const rank = index + 1;
                let rankColor = '#6c757d';
                let rankIcon = '';
                
                // 순위별 색상과 아이콘
                if (rank === 1) {
                    rankColor = '#ffd700';
                    rankIcon = '🥇';
                } else if (rank === 2) {
                    rankColor = '#c0c0c0';
                    rankIcon = '🥈';
                } else if (rank === 3) {
                    rankColor = '#cd7f32';
                    rankIcon = '🥉';
                } else if (rank <= 5) {
                    rankColor = '#dc2626';
                }
                
                // 레벨별 별 표시
                let stars = '';
                const starCount = Math.min(Math.floor((user.level || 1) / 2), 5);
                for (let i = 0; i < starCount; i++) {
                    stars += '⭐';
                }
                
                return `
                    <li style="padding: 8px 0; border-bottom: 1px solid #f1f3f5;">
                        <a href="#" style="display: flex; align-items: center; justify-content: space-between;">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <span style="color: ${rankColor}; font-weight: 600; font-size: 16px; min-width: 20px;">
                                    ${rankIcon || rank}
                                </span>
                                <span style="font-weight: 500;">${user.nickname || user.username}</span>
                                ${stars ? `<span style="font-size: 10px;">${stars}</span>` : ''}
                            </div>
                            <span style="color: #6c757d; font-size: 13px;">${(user.points || 0).toLocaleString()}P</span>
                        </a>
                    </li>
                `;
            }).join('');
            
            // 사이드바의 랭킹 섹션 찾아서 업데이트
            const rankingSection = document.querySelector('.sidebar-section .sidebar-title');
            if (rankingSection && rankingSection.textContent.includes('회원 랭킹')) {
                const contentDiv = rankingSection.nextElementSibling;
                if (contentDiv && contentDiv.classList.contains('sidebar-content')) {
                    contentDiv.innerHTML = `<ul class="sidebar-list">${rankingHTML}</ul>`;
                }
            }
        } else {
            // Strapi 연결 실패시 로컬 데이터 사용
            console.log('Strapi 연결 실패, 로컬 데이터 사용');
            // 기존 로컬 로직 유지...
        }
    } catch (error) {
        console.error('랭킹 조회 오류:', error);
    }
}

 // 페이지 로드시 바카라 게임 초기화
    document.addEventListener('DOMContentLoaded', function() {
        // 첫 번째 칩 선택
        selectChip(10);
        updateDisplay();

// 배너 초기화
        renderBanners();
        
// 회원 랭킹 렌더링 (Strapi 연동)
setTimeout(() => {
    renderUserRanking();
}, 1000); // 1초 후 실행

// 1분마다 랭킹 업데이트 (실시간성 강화)
setInterval(() => {
    renderUserRanking();
}, 60000); // 1분

        // 실시간 인기글 초기화
        renderPopularPosts();
        
        // 5초마다 인기글 업데이트
        setInterval(() => {
            renderPopularPosts();
        }, 5000);
        
        // 댓글 시스템 초기화
        // 모든 게시글에 대해 빈 댓글 배열 생성
    Object.keys(postsData).forEach(postType => {
        postsData[postType].forEach(post => {
            if (!commentsData[postType]) {
                commentsData[postType] = {};
            }
            if (!commentsData[postType][post.id]) {
                commentsData[postType][post.id] = [];
            }
        });
    });

            // 초기 게시글 렌더링
            renderPosts('verify');
            renderPosts('onca');
            renderPosts('offca');
            renderPosts('freeboard');
            renderPosts('entertainment');
        });

 window.showPage = function(pageId, event) {
    const pages = document.querySelectorAll('.page');
    pages.forEach(page => page.classList.remove('active'));
    document.getElementById(pageId).classList.add('active');
    
    // 스크롤을 확실하게 최상단으로 이동
    window.scrollTo(0, 0);
    document.documentElement.scrollTop = 0;
    document.body.scrollTop = 0;

    const bottomBanner = document.getElementById('bottomBannerSection');
    if (bottomBanner) {
        if (pageId === 'home') {
            bottomBanner.style.display = 'none'; // 홈에서는 숨김
        } else {
            bottomBanner.style.display = 'block'; // 다른 페이지에서는 표시
            renderBanners(); // 배너 다시 그리기
        }
    }
    
    const navLinks = document.querySelectorAll('.nav-menu a');
    navLinks.forEach(link => link.classList.remove('active'));

    if (event && event.target && event.target.tagName === 'A') {
        event.target.classList.add('active');
    }
    
    // 해당 페이지의 게시글 렌더링
    if (['verify', 'onca', 'offca', 'freeboard', 'entertainment', 'generalPromo', 'freeMoney'].includes(pageId)) {
        renderPosts(pageId);
    }

    // 블랙리스트 페이지 렌더링 추가!
    if (pageId === 'blacklist') {
        renderBlacklist();
    }
    
    // 1:1 문의 페이지 렌더링
    if (pageId === 'inquiry') {
        renderInquiryPage();
    }

    // 보증사이트 페이지 렌더링 추가!
    if (pageId === 'guarantee') {
        renderGuaranteeSites();
    }
    
    // 마이페이지 렌더링 추가!
    if (pageId === 'mypage') {
        renderMyPage();
    }
    
    // 관리자 페이지 렌더링 추가!
    if (pageId === 'admin') {
        renderAdminPage();
    }

    // 공지사항 페이지 렌더링 추가!
    if (pageId === 'notice') {
        if (isAdmin) {
            createNoticeWriteForm();
        }
        renderNotices();
    }

    setTimeout(() => {
        window.scrollTo(0, 0);
        document.documentElement.scrollTop = 0;
        document.body.scrollTop = 0;
    }, 0);
}

    


        function showPost(postId) {
            alert('게시글 상세보기 - 데모용');
        }

        // 글쓰기 폼 토글
        function toggleWriteForm(type) {
            const form = document.getElementById(`writeForm-${type}`);
            if (form.style.display === 'none') {
                form.style.display = 'block';
                form.scrollIntoView({ behavior: 'smooth', block: 'start' });
            } else {
                form.style.display = 'none';
            }
        }

        // 글쓰기 취소
        function cancelWrite(type) {
            const form = document.getElementById(`writeForm-${type}`);
            form.style.display = 'none';
            
// 파일 업로드 초기화
    if (uploadedFiles[type]) {
        uploadedFiles[type] = [];
    }
       



     // 폼 초기화
            const inputs = form.querySelectorAll('input, textarea, select');          
	    inputs.forEach(input => {
                input.value = '';
            });
        }

        // 페이지 로드시 부드러운 애니메이션
        window.addEventListener('load', function() {
            document.body.style.opacity = '0';
            setTimeout(() => {
                document.body.style.transition = 'opacity 0.3s ease';
                document.body.style.opacity = '1';
            }, 100);
        });

// 공지사항 작성 폼 HTML 생성 함수
function createNoticeWriteForm() {
    const noticeDiv = document.getElementById('notice');
    if (!noticeDiv) return;
    
    // 제목 부분에 글쓰기 버튼 추가
    const titleDiv = noticeDiv.querySelector('.section-title');
    if (titleDiv && isAdmin) {

 if (!titleDiv.querySelector('.btn-write')) {
        const writeBtn = document.createElement('button');
        writeBtn.className = 'btn-write';
        writeBtn.innerHTML = '📝 공지사항 작성';
        writeBtn.onclick = () => toggleWriteForm('notice');
        writeBtn.style.marginLeft = 'auto';
        
        titleDiv.style.display = 'flex';
        titleDiv.style.justifyContent = 'space-between';
        titleDiv.style.alignItems = 'center';
        titleDiv.appendChild(writeBtn);
    }
}
    
    // 작성 폼 HTML 추가
    const formHTML = `
        <div id="writeForm-notice" class="write-form" style="display: none;">
            <h3 style="margin-bottom: 20px;">공지사항 작성</h3>
            
            <div class="form-group">
                <label class="form-label">제목</label>
                <input type="text" class="form-control" id="noticeTitle" placeholder="공지사항 제목을 입력하세요">
            </div>
            
            <div class="form-group">
                <label class="form-label">중요도</label>
                <select class="form-control" id="noticeImportance">
    <option value="normal">일반</option>
    <option value="important">중요</option>
    <option value="event">이벤트</option>
</select>
            </div>
            
            <div class="form-group">
                <label class="form-label">내용</label>
                <textarea class="form-control" id="noticeContent" rows="8" placeholder="공지사항 내용을 입력하세요"></textarea>
            </div>


            
            <div class="form-group">
                <label class="form-label">파일 첨부</label>
                <input type="file" class="form-control" id="noticeFiles" multiple accept="image/*,.pdf,.doc,.docx" onchange="previewFiles('notice')">
                <small style="color: #6c757d; font-size: 12px;">최대 5개, 각 10MB 이하</small>
                <div id="noticeFilePreview" class="file-preview"></div>
		</div>
            
            <div style="text-align: right;">
                <button onclick="cancelWrite('notice')" class="btn btn-secondary" style="margin-right: 8px;">취소</button>
                <button onclick="submitNotice()" class="btn btn-primary">등록</button>
            </div>
        </div>
    `;
    
    // 테이블 앞에 폼 삽입
    const table = noticeDiv.querySelector('.board-table');
    if (table) {
        table.insertAdjacentHTML('beforebegin', formHTML);
    }
}

// 공지사항 데이터 추가 (postsData 객체에 추가)
if (!postsData.notice) {
    postsData.notice = [ 
{

id: 1,
            title: '[필독] 5 Dragons 이용 규칙 및 가이드',
            author: '관리자',
            date: '2025.06.01',
            content: `안녕하세요. 5 Dragons 입니다.

1. 사이트 이용 규칙
- 욕설, 비방, 도배 금지
- 광고성 글 작성 금지
- 타인의 개인정보 유출 금지

2. 포인트 시스템
- 글 작성: 50~149P
- 댓글 작성: 10~30P
- 출석체크: 100P + 연속보너스

3. 보증사이트 이용안내
- 5 Dragons 가입코드 사용 필수
- 문제 발생시 100% 보상

위 규칙을 위반시 경고없이 차단될 수 있습니다.`,
            views: 12345,
            importance: 'important',
            isNotice: true,
            isPinned: true
        },
        {
            id: 2,
            title: '보증사이트 신청 방법 안내',
            author: '관리자',
            date: '2025.05.15',
            content: `보증사이트 등록을 원하시는 업체는 아래 절차를 따라주세요.

1. 보증금 예치 
2. 운영 기간 증명 (최소 1년)
3. 회원 피해 이력 확인


문의: admin@5dragons.com`,
            views: 8234,
            importance: 'normal',
            isNotice: true,
            isPinned: false
        }
    ];
}


// 공지사항 제출 함수
function submitNotice() {
    if (!isAdmin) {
        alert('관리자만 공지사항을 작성할 수 있습니다.');
        return;
    }
    
    const title = document.getElementById('noticeTitle').value;
    const content = document.getElementById('noticeContent').value;
    const importance = document.getElementById('noticeImportance').value;
    
    if (!title || !content) {
        alert('제목과 내용을 모두 입력해주세요.');
        return;
    }
    
    // 새 공지사항 생성
    const newNotice = {
        id: postsData.notice.length > 0 ? Math.max(...postsData.notice.map(n => n.id)) + 1 : 1,
        title: title,
        author: '관리자',
        date: new Date().toLocaleDateString('ko-KR', {
            year: 'numeric',
            month: '2-digit',
            day: '2-digit'
        }).replace(/\//g, '.'),
        content: content,
        views: 0,
        importance: importance,
        isNotice: true,
	isPinned: false,  // 고정 상태 추가
	attachments: uploadedFiles.notice || []
    };
    
    // 공지사항 추가
    postsData.notice.unshift(newNotice);
    
// 전체 사용자에게 공지사항 알림
createNotification(NOTIFICATION_TYPES.NOTICE, {
    title: title
});

    alert('공지사항이 등록되었습니다!');
    cancelWrite('notice');
    renderNotices();
}


// 공지사항 렌더링 함수
function renderNotices() {
    const noticeTable = document.querySelector('#notice .board-table tbody');
    if (!noticeTable) return;
    
    // 고정된 공지사항을 먼저 표시하도록 정렬
    const sortedNotices = [...postsData.notice].sort((a, b) => {
        if (a.isPinned && !b.isPinned) return -1;
        if (!a.isPinned && b.isPinned) return 1;
        return 0;
    });
    
    // 페이지네이션 적용
    const currentPage = currentPages.notice;
    const start = (currentPage - 1) * POSTS_PER_PAGE;
    const end = start + POSTS_PER_PAGE;
    const pagedNotices = sortedNotices.slice(start, end);
    
    let tableHTML = '';
    
    // 공지사항 표시
    pagedNotices.forEach(notice => {
        tableHTML += `
            <tr>
                <td>${notice.isPinned ? '📌' : '공지'}</td>
                <td class="title">
                    ${notice.importance === 'important' ? '<span class="badge badge-hot">중요</span>' : ''}
                    ${notice.importance === 'event' ? '<span class="badge badge-new" style="background: #fff3cd; color: #856404;">이벤트</span>' : ''}
                    <a href="#" onclick="showNoticeDetail(${notice.id})">${notice.title}</a>
                    ${isAdmin ? `
                        <div style="display: inline-block; margin-left: 10px;">
                            <button onclick="togglePinNotice(${notice.id})" style="font-size: 11px; padding: 2px 6px; background: #f59e0b; color: white; border: none; border-radius: 3px;">${notice.isPinned ? '고정해제' : '고정'}</button>
                            <button onclick="deleteNotice(${notice.id})" style="font-size: 11px; padding: 2px 6px; background: #dc2626; color: white; border: none; border-radius: 3px;">삭제</button>
                        </div>
                    ` : ''}
                </td>
                <td>${notice.author}</td>
                <td>${notice.date}</td>
                <td>${notice.views}</td>
            </tr>
        `;
    });
    
    noticeTable.innerHTML = tableHTML;
    
    // 페이지네이션 추가
    const tableContainer = document.querySelector('#notice .board-table');
    if (tableContainer) {
        // 기존 페이지네이션 제거
        const existingPagination = tableContainer.parentElement.querySelector('.pagination');
        if (existingPagination) {
            existingPagination.remove();
        }
        
        // 새 페이지네이션 추가
        const paginationHTML = createPagination('notice', sortedNotices.length);
        tableContainer.insertAdjacentHTML('afterend', paginationHTML);
    }
}

// 보증사이트 렌더링 함수
function renderGuaranteeSites() {
    // 헤더 렌더링 (관리자만 등록 버튼 보임)
    const headerContainer = document.getElementById('guaranteeHeader');
    if (headerContainer) {
        headerContainer.innerHTML = `
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <div class="section-title">
                    <span>🛡️</span> 보증사이트 목록
                </div>
                ${isAdmin ? '<button onclick="toggleWriteForm(\'guarantee\')" class="btn-write">📝 보증사이트 등록</button>' : ''}
            </div>
        `;
    }
    
    const container = document.getElementById('guaranteeList');
    if (!container) return;
    
    let html = '';
    
    // 기존 하드코딩된 보증사이트들 (나중에 제거 가능)
    html += `
        <div class="guarantee-card">
            <div class="guarantee-logo">베팅왕 LOGO</div>
            <div class="guarantee-info">
                <h3>베팅왕 - 피징 보상제 - 15억</h3>
                <p>안녕하세요. 구조대장입니다. 한때는 먹튀가 걱정이었는데 이제는 먹튀보다 피징 험박 당률이 많아 불만한 회원분들이 많은 것 같습니다...</p>
                <div class="guarantee-actions">
                    <button class="btn btn-primary">가입하기</button>
                    <button class="btn btn-secondary">상세보기</button>
                </div>
            </div>
        </div>
        
        <div class="guarantee-card">
            <div class="guarantee-logo">OB카지노 LOGO</div>
            <div class="guarantee-info">
                <h3>OB카지노 15억원 (보증금 10억) + (자체보증금 5억)</h3>
                <p>보증금 15억원 (보증금 10억) + (자체보증금 5억) 주소 http://오비율r01.com...</p>
                <div class="guarantee-actions">
                    <button class="btn btn-primary">가입하기</button>
                    <button class="btn btn-secondary">상세보기</button>
                </div>
            </div>
        </div>
    `;
    
    // 동적으로 추가된 보증사이트들
postsData.guarantee.forEach(site => {
    html += `
        <div class="guarantee-card">
            <div class="guarantee-logo">
                ${site.logoUrl ? 
                    `<img src="${site.logoUrl}" alt="${site.name}" style="width: 100%; height: 100%; object-fit: contain;">` : 
                    `${site.name} LOGO`
                }
            </div>
            <div class="guarantee-info">
                <h3>${site.name} - ${site.deposit}</h3>
                <p>${site.description}</p>
                <div class="guarantee-actions">
                    <button class="btn btn-primary" onclick="window.open('${site.siteUrl || '#'}', '_blank')">가입하기</button>
                    <button class="btn btn-secondary" onclick="showGuaranteeDetail(${site.id})">상세보기</button>
                    ${isAdmin ? `<button class="btn btn-secondary" onclick="deleteGuarantee(${site.id})">삭제</button>` : ''}
                </div>
            </div>
        </div>
    `;
});
    
    container.innerHTML = html;
}

// 보증사이트 등록 함수
function submitGuarantee() {
    if (!isAdmin) {
        alert('관리자만 보증사이트를 등록할 수 있습니다.');
        return;
    }
    
    const name = document.getElementById('guaranteeName').value.trim();
    const deposit = document.getElementById('guaranteeDeposit').value.trim();
    const code = document.getElementById('guaranteeCode').value.trim();
    const bonus = document.getElementById('guaranteeBonus').value.trim();
    const description = document.getElementById('guaranteeDescription').value.trim();
    const logoUrl = document.getElementById('guaranteeLogoUrl').value.trim(); // 추가
    const landingImage = document.getElementById('guaranteeLandingImage').value.trim(); // 추가
    const siteUrl = document.getElementById('guaranteeSiteUrl').value.trim(); // 추가
    
    if (!name || !deposit || !description) {
        alert('사이트명, 보증금, 설명은 필수입니다.');
        return;
    }
    
    const newGuarantee = {
        id: postsData.guarantee.length > 0 ? Math.max(...postsData.guarantee.map(g => g.id)) + 1 : 1,
        name: name,
        deposit: deposit,
        joinCode: code || '없음',
        bonus: bonus || '없음',
        description: description,
        logoUrl: logoUrl || '', // GIF URL
        landingImage: landingImage || '', // 랜딩 이미지 URL
        siteUrl: siteUrl || '#',
        author: currentUser,
        date: new Date().toLocaleDateString('ko-KR', {
            year: 'numeric',
            month: '2-digit',
            day: '2-digit'
        }).replace(/\//g, '.'),
        views: 0
    };
    
    postsData.guarantee.unshift(newGuarantee);
    
    alert('보증사이트가 등록되었습니다!');
    cancelWrite('guarantee');
    renderGuaranteeSites();
}

// 보증사이트 삭제 함수
function deleteGuarantee(siteId) {
    if (!isAdmin) {
        alert('관리자만 삭제할 수 있습니다.');
        return;
    }
    
    if (confirm('정말로 이 보증사이트를 삭제하시겠습니까?')) {
        postsData.guarantee = postsData.guarantee.filter(site => site.id !== siteId);
        renderGuaranteeSites();
        alert('보증사이트가 삭제되었습니다.');
    }
}

// 보증사이트 상세보기
function showGuaranteeDetail(siteId) {
   const site = postsData.guarantee.find(s => s.id === siteId);
   if (!site) return;
   
   // 조회수 증가
   if (!site.views) site.views = 0;
   site.views++;
   
   // 상세보기 페이지 HTML
   const detailHTML = `
       <div style="max-width: 1200px; margin: 0 auto; padding: 20px;">
           <button onclick="showPage('guarantee')" class="btn btn-secondary" style="margin-bottom: 20px;">
               ← 목록으로
           </button>
           
           <div style="background: white; border: 1px solid #e9ecef; border-radius: 12px; padding: 30px;">
               <h1 style="font-size: 32px; margin-bottom: 20px; color: #212529;">
                   ${site.name}
               </h1>
               
               <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
                   <div>
                       <p><strong>보증금:</strong> ${site.deposit}</p>
                       <p><strong>가입코드:</strong> <span style="background: #ffd700; padding: 4px 8px; border-radius: 4px; font-weight: bold;">${site.joinCode}</span></p>
                       <p><strong>보너스:</strong> ${site.bonus}</p>
                       <p><strong>조회수:</strong> ${site.views}</p>
                   </div>
                   <div style="text-align: center;">
                       ${site.logoUrl ? 
                           `<img src="${site.logoUrl}" alt="${site.name}" style="max-width: 300px; height: auto;">` : 
                           `<div style="background: #f8f9fa; padding: 40px; border-radius: 8px;">${site.name} LOGO</div>`
                       }
                   </div>
               </div>
               
               <div style="margin-bottom: 30px;">
                   <h3 style="margin-bottom: 15px;">사이트 소개</h3>
                   <p style="line-height: 1.8; color: #495057;">${site.description}</p>
               </div>
               
               ${site.landingImage ? `
                   <div style="margin-bottom: 30px;">
                       <h3 style="margin-bottom: 15px;">상세 이미지</h3>
                       <img src="${site.landingImage}" alt="${site.name} 상세" style="width: 100%; height: auto; border-radius: 8px;">
                   </div>
               ` : ''}
               
               <div style="text-align: center; margin-top: 40px;">
                   <button class="btn btn-primary" onclick="window.open('${site.siteUrl || '#'}', '_blank')" style="padding: 15px 40px; font-size: 18px;">
                       🎯 ${site.name} 바로가기
                   </button>
               </div>
           </div>
       </div>
   `;
   
   // guarantee 페이지의 내용을 상세보기로 교체
   document.getElementById('guaranteeList').innerHTML = detailHTML;
}



// 공지사항 상세보기
function showNoticeDetail(noticeId) {
    const notice = postsData.notice.find(n => n.id === noticeId);
    if (!notice) return;
    
    // 조회수 증가
    notice.views++;
    renderNotices();
    
    // 다른 게시판과 동일하게 상세보기 페이지로 이동
    window.currentPost = {
        type: 'notice',
        id: noticeId,
        post: notice
    };
    
    showPage('postView');
    
    // 게시글 정보 표시
    document.getElementById('postViewTitle').textContent = notice.title;
    document.getElementById('postViewAuthor').textContent = notice.author;
    document.getElementById('postViewDate').textContent = notice.date;
    document.getElementById('postViewCount').textContent = notice.views;
    document.getElementById('postViewContent').innerHTML = notice.content.replace(/\n/g, '<br>');
    
    // 좋아요/싫어요 숨기기 (공지사항은 투표 불가)
    document.querySelector('.post-view-actions').style.display = 'none';
    
    // 댓글 영역 설정
    updateCommentSection();
    
    // 댓글 렌더링
    renderPageComments();
}
// 공지사항 삭제
function deleteNotice(noticeId) {
    if (!isAdmin) {
        alert('관리자만 삭제할 수 있습니다.');
        return;
    }
    
    if (confirm('정말로 이 공지사항을 삭제하시겠습니까?')) {
        postsData.notice = postsData.notice.filter(n => n.id !== noticeId);
        renderNotices();
        alert('공지사항이 삭제되었습니다.');
    }
}

// 공지사항 고정/해제
function togglePinNotice(noticeId) {
    if (!isAdmin) {
        alert('관리자만 고정할 수 있습니다.');
        return;
    }
    
    const notice = postsData.notice.find(n => n.id === noticeId);
    if (notice) {
        notice.isPinned = !notice.isPinned;
        
        // 고정된 공지를 맨 위로 이동
        if (notice.isPinned) {
            postsData.notice = postsData.notice.filter(n => n.id !== noticeId);
            postsData.notice.unshift(notice);
        }
        
        renderNotices();
        showFloatingText(notice.isPinned ? '공지사항이 고정되었습니다!' : '고정이 해제되었습니다!', '#22c55e');
    }
}



// 포인트 내역 저장을 위한 배열
let pointHistory = [];

// 페이지네이션 설정
const POSTS_PER_PAGE = 10; // 한 페이지당 게시글 수
let currentPages = {
    verify: 1,
    onca: 1,
    offca: 1,
    entertainment: 1,
    freeboard: 1,
    notice: 1,
    generalPromo: 1,    
    freeMoney: 1 
};

// 현재 수정 중인 게시글 정보
let editingPost = {
    type: null,
    id: null
};

// 포인트 내역 추가 함수
function addPointHistory(amount, reason) {
    pointHistory.unshift({
        id: Date.now(),
        amount: amount,
        reason: reason,
        date: new Date(),
        balance: gameState.userPoints
    });
    
    // 최대 100개까지만 보관
    if (pointHistory.length > 100) {
        pointHistory = pointHistory.slice(0, 100);
    }
}

// 관리자 페이지 렌더링
function renderAdminPage() {
    const container = document.getElementById('adminContent');
    
    if (!isAdmin) {
        container.innerHTML = `
            <div style="text-align: center; padding: 60px;">
                <h3>접근 권한이 없습니다</h3>
                <p>관리자만 접근 가능한 페이지입니다.</p>
            </div>
        `;
        return;
    }
    
    // 통계 계산
    const totalUsers = usersDB.length;
    const totalPosts = Object.values(postsData).reduce((sum, posts) => sum + posts.length, 0);
    const totalComments = Object.values(commentsData).reduce((sum, boardComments) => {
        return sum + Object.values(boardComments).reduce((boardSum, comments) => boardSum + comments.length, 0);
    }, 0);
    const totalPoints = usersDB.reduce((sum, user) => sum + (user.points || 0), 0);
    
    container.innerHTML = `
        <style>
            .admin-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 20px;
                margin-bottom: 30px;
            }
            .stat-card {
                background: #f8f9fa;
                padding: 20px;
                border-radius: 12px;
                text-align: center;
                border: 1px solid #e9ecef;
            }
            .stat-number {
                font-size: 32px;
                font-weight: 700;
                color: #dc2626;
                margin: 10px 0;
            }
            .stat-label {
                color: #6c757d;
                font-size: 14px;
            }
            .admin-section {
                background: white;
                border: 1px solid #e9ecef;
                border-radius: 12px;
                padding: 20px;
                margin-bottom: 20px;
            }
            .admin-section-title {
                font-size: 18px;
                font-weight: 600;
                margin-bottom: 15px;
                padding-bottom: 10px;
                border-bottom: 2px solid #e9ecef;
            }
            .user-table {
                width: 100%;
                border-collapse: collapse;
            }
            .user-table th {
                background: #f8f9fa;
                padding: 10px;
                text-align: left;
                font-weight: 600;
                border-bottom: 2px solid #e9ecef;
            }
            .user-table td {
                padding: 10px;
                border-bottom: 1px solid #f1f3f5;
            }
            .user-actions {
                display: flex;
                gap: 5px;
            }
            .admin-btn {
                padding: 4px 8px;
                font-size: 12px;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                transition: all 0.2s;
            }
            .btn-primary {
                background: #dc2626;
                color: white;
            }
            .btn-secondary {
                background: #6c757d;
                color: white;
            }
            .btn-success {
                background: #28a745;
                color: white;
            }
        </style>
        
        <!-- 통계 카드 -->
        <div class="admin-grid">
            <div class="stat-card">
                <div class="stat-label">총 회원수</div>
                <div class="stat-number">${totalUsers}</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">총 게시글</div>
                <div class="stat-number">${totalPosts}</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">총 댓글</div>
                <div class="stat-number">${totalComments}</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">총 포인트</div>
                <div class="stat-number">${totalPoints.toLocaleString()}</div>
            </div>
        </div>
        
        <!-- 회원 관리 -->
        <div class="admin-section">
            <h3 class="admin-section-title">회원 관리</h3>
            <table class="user-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>닉네임</th>
                        <th>포인트</th>
                        <th>가입일</th>
                        <th>레벨</th>
                        <th>상태</th>
                        <th>관리</th>
                    </tr>
                </thead>
                <tbody>
                    ${usersDB.map(user => `
                        <tr>
                            <td>${user.id}</td>
                            <td>${getUserDisplay(user.nickname)}</td>
                            <td>${user.points.toLocaleString()}P</td>
                            <td>${user.joinDate}</td>
                            <td>Lv.${user.level || 1}</td>
                            <td>${user.isAdmin ? '<span style="color: #dc2626;">관리자</span>' : 
                                   blockedUsers.includes(user.nickname) ? '<span style="color: #6c757d;">차단됨</span>' : 
                                   '<span style="color: #28a745;">정상</span>'}</td>
                            <td>
                                <div class="user-actions">
                                    <button class="admin-btn btn-primary" onclick="givePoints('${user.nickname}')">포인트</button>
                                    <button class="admin-btn btn-secondary" onclick="toggleBlock('${user.nickname}')">${blockedUsers.includes(user.nickname) ? '차단해제' : '차단'}</button>
                                    ${!user.isAdmin ? `<button class="admin-btn btn-success" onclick="toggleAdmin('${user.nickname}')">관리자</button>` : ''}
                                </div>
                            </td>
                        </tr>
                    `).join('')}
                </tbody>
            </table>
        </div>
        
        <!-- 게시판별 통계 -->
        <div class="admin-section">
            <h3 class="admin-section-title">게시판별 통계</h3>
            <table class="user-table">
                <thead>
                    <tr>
                        <th>게시판</th>
                        <th>게시글 수</th>
                        <th>총 좋아요</th>
                        <th>총 싫어요</th>
                        <th>총 조회수</th>
                    </tr>
                </thead>
                <tbody>
                    ${Object.keys(postsData).map(board => {
                        const posts = postsData[board];
                        const stats = posts.reduce((acc, post) => ({
                            likes: acc.likes + (post.likes || 0),
                            dislikes: acc.dislikes + (post.dislikes || 0),
                            views: acc.views + (post.views || 0)
                        }), { likes: 0, dislikes: 0, views: 0 });
                        
                        return `
                            <tr>
                                <td>${getBoardName(board)}</td>
                                <td>${posts.length}</td>
                                <td>${stats.likes}</td>
                                <td>${stats.dislikes}</td>
                                <td>${stats.views}</td>
                            </tr>
                        `;
                    }).join('')}
                </tbody>
            </table>
        </div>

<!-- 배너 관리 -->
        <div class="admin-section">
            <h3 class="admin-section-title">배너 관리</h3>
            
            <h4 style="margin: 20px 0 10px 0;">메인 배너</h4>
            <table class="user-table">
              <thead>
                    <tr>
                        <th>ID</th>
                        <th>사이트명</th>
                        <th>보너스</th>
                        <th>코드</th>
                        <th>링크</th>
                        <th>이미지 URL</th>
                        <th>상태</th>
                        <th>관리</th>
                    </tr>
                </thead>
                <tbody>
                  ${bannerData.main.map(banner => `
                        <tr>
                            <td>${banner.id}</td>
                            <td><input type="text" value="${banner.title}" id="main-title-${banner.id}" style="width: 100px;"></td>
                            <td><input type="text" value="${banner.bonus}" id="main-bonus-${banner.id}" style="width: 80px;"></td>
                            <td><input type="text" value="${banner.code}" id="main-code-${banner.id}" style="width: 80px;"></td>
                            <td><input type="text" value="${banner.link}" id="main-link-${banner.id}" style="width: 120px;"></td>
                            <td><input type="text" value="${banner.image || ''}" id="main-image-${banner.id}" style="width: 200px;" placeholder="이미지 URL 입력"></td>
                            <td>${banner.active ? '<span style="color: #28a745;">활성</span>' : '<span style="color: #6c757d;">비활성</span>'}</td>
                            <td>
                                <button class="admin-btn btn-primary" onclick="saveBanner('main', ${banner.id})">저장</button>
                                <button class="admin-btn btn-secondary" onclick="toggleBanner('main', ${banner.id})">${banner.active ? '비활성화' : '활성화'}</button>
                            </td>
                        </tr>
                    `).join('')}
                </tbody>
            </table>
            
            <h4 style="margin: 20px 0 10px 0;">사이드바 배너</h4>
            <table class="user-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>사이트명</th>
                        <th>보너스</th>
                        <th>코드</th>
                        <th>링크</th>
                        <th>이미지 URL</th>
                        <th>상태</th>
                        <th>관리</th>
                    </tr>
                </thead>
                <tbody>
${bannerData.sidebar.map(banner => `
                        <tr>
                            <td>${banner.id}</td>
                            <td><input type="text" value="${banner.title}" id="sidebar-title-${banner.id}" style="width: 100px;"></td>
                            <td><input type="text" value="${banner.bonus}" id="sidebar-bonus-${banner.id}" style="width: 80px;"></td>
                            <td><input type="text" value="${banner.code}" id="sidebar-code-${banner.id}" style="width: 80px;"></td>
                            <td><input type="text" value="${banner.link}" id="sidebar-link-${banner.id}" style="width: 120px;"></td>
                            <td><input type="text" value="${banner.image || ''}" id="sidebar-image-${banner.id}" style="width: 200px;" placeholder="이미지 URL 입력"></td>
                            <td>${banner.active ? '<span style="color: #28a745;">활성</span>' : '<span style="color: #6c757d;">비활성</span>'}</td>
                            <td>
                                <button class="admin-btn btn-primary" onclick="saveBanner('sidebar', ${banner.id})">저장</button>
                                <button class="admin-btn btn-secondary" onclick="toggleBanner('sidebar', ${banner.id})">${banner.active ? '비활성화' : '활성화'}</button>
                            </td>
                        </tr>
                    `).join('')}                </tbody>
            </table>
            
            <div style="margin-top: 20px;">
                <button class="btn btn-success" onclick="addBanner('main')">메인 배너 추가</button>
                <button class="btn btn-success" onclick="addBanner('sidebar')">사이드바 배너 추가</button>
            </div>
        </div>

    `;
}

// 포인트 지급 함수
function givePoints(nickname) {
    const amount = prompt(`${nickname}님에게 지급할 포인트를 입력하세요:`, '1000');
    if (!amount || isNaN(amount)) return;
    
    const points = parseInt(amount);
    const user = usersDB.find(u => u.nickname === nickname);
    
    if (user) {
        user.points += points;
        if (nickname === currentUser) {
            gameState.userPoints = user.points;
            updateDisplay();
        }
        
        alert(`${nickname}님에게 ${points}P를 지급했습니다.`);
        renderAdminPage();
    }
}

// 차단 토글
function toggleBlock(nickname) {
    const index = blockedUsers.indexOf(nickname);
    if (index > -1) {
        blockedUsers.splice(index, 1);
        alert(`${nickname}님의 차단을 해제했습니다.`);
    } else {
        blockedUsers.push(nickname);
        alert(`${nickname}님을 차단했습니다.`);
    }
    renderAdminPage();
}

// 관리자 권한 토글
function toggleAdmin(nickname) {
    const user = usersDB.find(u => u.nickname === nickname);
    if (user) {
        user.isAdmin = !user.isAdmin;
        alert(`${nickname}님의 관리자 권한을 ${user.isAdmin ? '부여' : '제거'}했습니다.`);
        renderAdminPage();
    }
}

// 배너 저장 함수
function saveBanner(type, id) {
    const banner = bannerData[type].find(b => b.id === id);
    if (!banner) return;
    
    banner.title = document.getElementById(`${type}-title-${id}`).value;
    banner.bonus = document.getElementById(`${type}-bonus-${id}`).value;
    banner.code = document.getElementById(`${type}-code-${id}`).value;
    banner.link = document.getElementById(`${type}-link-${id}`).value;
    banner.image = document.getElementById(`${type}-image-${id}`).value;
    
    renderBanners();
    alert('배너가 저장되었습니다.');
}

// 배너 활성/비활성 토글
function toggleBanner(type, id) {
    const banner = bannerData[type].find(b => b.id === id);
    if (!banner) return;
    
    banner.active = !banner.active;
    renderBanners();
    renderAdminPage();
}

// 배너 추가
function addBanner(type) {
    const newId = Math.max(...bannerData[type].map(b => b.id)) + 1;
    const newBanner = {
        id: newId,
        title: '새 배너',
        bonus: '보너스',
        code: 'CODE',
        link: '#',
        image: '',
        active: true
    };
    
    bannerData[type].push(newBanner);
    renderBanners();
    renderAdminPage();
}


// 마이페이지 렌더링
function renderMyPage() {
    const container = document.getElementById('mypageContent');
    
    if (!currentUser) {
        container.innerHTML = `
            <div style="text-align: center; padding: 60px;">
                <h3 style="margin-bottom: 20px;">로그인이 필요합니다</h3>
                <button onclick="openLoginModal()" class="btn btn-primary">로그인하기</button>
            </div>
        `;
        return;
    }
    
    // 사용자 통계 계산
    const myPosts = [];
    const myComments = [];
    
    Object.keys(postsData).forEach(postType => {
        postsData[postType].forEach(post => {
            if (post.author === currentUser) {
                myPosts.push({ ...post, postType });
            }
        });
        
     // 이 부분을 교체!
        if (commentsData[postType]) {
            Object.keys(commentsData[postType]).forEach(postId => {
                if (commentsData[postType][postId]) {
                    commentsData[postType][postId].forEach(comment => {
                        if (comment.author === currentUser && !comment.isDeleted) {
                            myComments.push({ ...comment, postType, postId });
                        }
                    });
                }
            });
        }
    });
    
    const totalLikes = myPosts.reduce((sum, post) => sum + (post.likes || 0), 0);

    container.innerHTML = `
        <div class="mypage-container">
            <div class="mypage-header">
                <div class="mypage-user-info">
                    <div class="mypage-avatar">${currentUser.charAt(0).toUpperCase()}</div>
                    <div class="mypage-user-details">
                        <h2>${currentUser}${isAdmin ? ' (관리자)' : ''}</h2>
                        <p>가입일: ${usersDB.find(u => u.nickname === currentUser)?.joinDate || '2025.06.01'}</p>
                    </div>
                </div>
                <div class="mypage-stats">
                    <div class="stat-box">
                        <div class="stat-value">${gameState.userPoints}P</div>
                        <div class="stat-label">보유 포인트</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">${myPosts.length}</div>
                        <div class="stat-label">작성한 글</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">${myComments.length}</div>
                        <div class="stat-label">작성한 댓글</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value">${totalLikes}</div>
                        <div class="stat-label">받은 좋아요</div>
                    </div>
                </div>
            </div>

            <div class="mypage-tabs">
                <button class="mypage-tab active" onclick="switchMypageTab('posts')">내가 쓴 글</button>
                <button class="mypage-tab" onclick="switchMypageTab('comments')">내가 쓴 댓글</button>
                <button class="mypage-tab" onclick="switchMypageTab('points')">포인트 내역</button>
            </div>
            
            <div id="mypage-posts" class="mypage-tab-content active">
                ${myPosts.length > 0 ? myPosts.map(post => `
                    <div class="mypage-post-item" onclick="showPostDetail('${post.postType}', ${post.id})">
                        <div class="mypage-post-header">
                            <div class="mypage-post-title">${post.title}</div>
                            <div class="mypage-post-meta">${post.date}</div>
                        </div>
                        <div class="mypage-post-stats">
                            <span>👍 ${post.likes || 0}</span>
                            <span>👎 ${post.dislikes || 0}</span>
                            <span>💬 ${commentsData[post.postType][post.id]?.length || 0}</span>
                            <span>조회 ${post.views || 0}</span>
                        </div>
                    </div>
                `).join('') : '<div class="mypage-empty">작성한 글이 없습니다</div>'}
            </div>

            <div id="mypage-comments" class="mypage-tab-content">
                ${myComments.length > 0 ? myComments.map(comment => {
                    const post = postsData[comment.postType].find(p => p.id === parseInt(comment.postId));
                    return `
                        <div class="mypage-comment-item">
                            <div class="mypage-comment-post" onclick="showPostDetail('${comment.postType}', ${comment.postId})">
                                📄 ${post?.title || '삭제된 게시글'}
                            </div>
                            <div class="mypage-comment-content">${comment.content}</div>
                            <div class="mypage-comment-meta">
                                <span>${comment.date} ${comment.time}</span>
                                <span>👍 ${comment.likes} 👎 ${comment.dislikes}</span>
                            </div>
                        </div>
                    `;
                }).join('') : '<div class="mypage-empty">작성한 댓글이 없습니다</div>'}
            </div>
            
            <div id="mypage-points" class="mypage-tab-content">
                ${pointHistory.length > 0 ? pointHistory.map(item => `
                    <div class="point-history-item">
                        <div class="point-history-info">
                            <div class="point-history-reason">${item.reason}</div>
                            <div class="point-history-date">${item.date.toLocaleString('ko-KR')}</div>
                        </div>
                        <div class="point-history-amount ${item.amount > 0 ? 'plus' : 'minus'}">
                            ${item.amount > 0 ? '+' : ''}${item.amount}P
                        </div>
                    </div>
                `).join('') : '<div class="mypage-empty">포인트 내역이 없습니다</div>'}
            </div>
        </div>
    `;
}

// 마이페이지 탭 전환
function switchMypageTab(tab) {
    document.querySelectorAll('.mypage-tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.mypage-tab-content').forEach(c => c.classList.remove('active'));
    
    event.target.classList.add('active');
    document.getElementById(`mypage-${tab}`).classList.add('active');
}



// 수정 모달 열기
function openEditModal(postType, postId) {
    const post = postsData[postType].find(p => p.id === postId);
    if (!post || post.author !== currentUser) {
        alert('수정 권한이 없습니다.');
        return;
    }
    
    editingPost = { type: postType, id: postId };
    
    document.getElementById('editTitle').value = post.title;
    document.getElementById('editContent').value = post.content;
    document.getElementById('editModal').style.display = 'block';
}

// 수정 취소
function cancelEdit() {
    editingPost = { type: null, id: null };
    document.getElementById('editModal').style.display = 'none';
    document.getElementById('editTitle').value = '';
    document.getElementById('editContent').value = '';
}

// 수정 저장
async function saveEdit() {
    if (!editingPost.type || !editingPost.id) return;
    
    const newTitle = document.getElementById('editTitle').value.trim();
    const newContent = document.getElementById('editContent').value.trim();
    
    if (!newTitle || !newContent) {
        alert('제목과 내용을 모두 입력해주세요.');
        return;
    }
    
    const post = postsData[editingPost.type].find(p => p.id === editingPost.id);
    if (post) {
        // 로컬 데이터 업데이트
        post.title = newTitle;
        post.content = newContent;
        post.edited = true;
        post.editDate = new Date().toLocaleDateString('ko-KR', {
            year: 'numeric',
            month: '2-digit',
            day: '2-digit'
        }).replace(/\//g, '.');
        
      // Strapi 업데이트
        try {
            const token = localStorage.getItem('token');
            if (token) {
                // 1. 게시글 검색하여 documentId 찾기
                const searchResponse = await fetch(
                    `http://localhost:1337/api/posts?filters[id][$eq]=${parseInt(editingPost.id) || editingPost.id}`,
                    {
                        headers: {
                            'Authorization': `Bearer ${token}`
                        }
                    }
                );
                
                if (searchResponse.ok) {
                    const searchData = await searchResponse.json();
                    
                    if (searchData.data && searchData.data.length > 0) {
                        const documentId = searchData.data[0].documentId;
                        
                        // 2. documentId로 업데이트
                        const updateData = {
                            data: {
                                title: newTitle,
                                content: {
                                    type: "doc",
                                    content: [
                                        {
                                            type: "paragraph",
                                            content: [
                                                {
                                                    type: "text",
                                                    text: newContent
                                                }
                                            ]
                                        }
                                    ]
                                }
                            }
                        };
                        
                        const updateResponse = await fetch(
                            `http://localhost:1337/api/posts/${documentId}`,
                            {
                                method: 'PUT',
                                headers: {
                                    'Content-Type': 'application/json',
                                    'Authorization': `Bearer ${token}`
                                },
                                body: JSON.stringify(updateData)
                            }
                        );
                        
                        if (updateResponse.ok) {
                            console.log('✅ Strapi 게시글 수정 성공');
                        } else {
                            console.error('❌ Strapi 게시글 수정 실패');
                        }
                    }
                }
            }
        } catch (error) {
            console.error('게시글 수정 API 오류:', error);
        }
        
        // 현재 보고 있는 게시글이면 화면 업데이트
        if (window.currentPost && window.currentPost.id === editingPost.id) {
            showPostDetail(editingPost.type, editingPost.id);
        }
        
        // 목록 새로고침
        renderPosts(editingPost.type);
        
        alert('게시글이 수정되었습니다.');
        cancelEdit();
    }
}


// 게시글 삭제 확인
async function deletePostWithConfirm(postType, postId) {
    const post = postsData[postType].find(p => p.id === postId);
    if (!post) return;
    
    if (post.author !== currentUser && !isAdmin) {
        alert('삭제 권한이 없습니다.');
        return;
    }
    
    if (confirm('정말로 이 게시글을 삭제하시겠습니까?')) {
      // Strapi에서 삭제
        try {
            const token = localStorage.getItem('token');
            if (token) {
                // 1. 게시글 검색하여 documentId 찾기
                const searchResponse = await fetch(
                    `http://localhost:1337/api/posts?filters[id][$eq]=${parseInt(postId) || postId}`,
                    {
                        headers: {
                            'Authorization': `Bearer ${token}`
                        }
                    }
                );
                
                if (searchResponse.ok) {
                    const searchData = await searchResponse.json();
                    
                    if (searchData.data && searchData.data.length > 0) {
                        const documentId = searchData.data[0].documentId;
                        
                        // 2. documentId로 삭제
                        const deleteResponse = await fetch(
                            `http://localhost:1337/api/posts/${documentId}`,
                            {
                                method: 'DELETE',
                                headers: {
                                    'Authorization': `Bearer ${token}`
                                }
                            }
                        );
                        
                        if (deleteResponse.ok) {
                            console.log('✅ Strapi 게시글 삭제 성공');
                        } else {
                            console.error('❌ Strapi 게시글 삭제 실패');
                        }
                    }
                }
            }
        } catch (error) {
            console.error('게시글 삭제 API 오류:', error);
        }
        
        // 로컬 데이터에서 삭제
        const index = postsData[postType].findIndex(p => p.id === postId);
        if (index !== -1) {
            postsData[postType].splice(index, 1);
            
            // 목록으로 돌아가기
            goBackToList();
            alert('게시글이 삭제되었습니다.');
        }
    }
}


// 검색 모달 열기
function openSearchModal() {
    const headerInput = document.getElementById('headerSearchInput');
    const searchInput = document.getElementById('searchInput');
    
    // 헤더 검색창의 값을 모달로 전달
    if (headerInput && headerInput.value) {
        searchInput.value = headerInput.value;
    }
    
    document.getElementById('searchModal').style.display = 'block';
    searchInput.focus();
    
    // 자동으로 검색 실행
    if (searchInput.value) {
        performSearch();
    }
}

// 검색 실행
  async function performSearch() {  
  const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
    const searchType = document.getElementById('searchType').value;
    const searchBoard = document.getElementById('searchBoard').value;
    
    if (!searchTerm) {
        alert('검색어를 입력해주세요.');
        return;
    }
    
  // Strapi에서 먼저 검색
    try {
        const searchUrl = `http://localhost:1337/api/posts?filters[title][$containsi]=${searchTerm}&populate=board`;
        const response = await fetch(searchUrl);
        
        if (response.ok) {
            const data = await response.json();
            console.log('✅ Strapi 검색 결과:', data.data.length, '개');
        }
    } catch (error) {
        console.error('Strapi 검색 오류:', error);
    }
    
    // 기존 로컬 검색 계속 진행


  let results = [];
 
  const boardsToSearch = searchBoard === 'all' ? 
        ['verify', 'onca', 'offca', 'entertainment', 'freeboard'] : 
        [searchBoard];
    
    // 각 게시판에서 검색
    boardsToSearch.forEach(board => {
        if (postsData[board]) {
            postsData[board].forEach(post => {
                let isMatch = false;
                
                switch(searchType) {
                    case 'title':
                        isMatch = post.title.toLowerCase().includes(searchTerm);
                        break;
                    case 'content':
                        isMatch = post.content.toLowerCase().includes(searchTerm);
                        break;
                    case 'author':
                        isMatch = post.author.toLowerCase().includes(searchTerm);
                        break;
                    case 'all':
                        isMatch = post.title.toLowerCase().includes(searchTerm) ||
                                 post.content.toLowerCase().includes(searchTerm) ||
                                 post.author.toLowerCase().includes(searchTerm);
                        break;
                }
                
                if (isMatch) {
                    results.push({
                        ...post,
                        boardType: board,
                        boardName: getBoardName(board)
                    });
                }
            });
        }
    });
    
    // 검색 결과 표시
    displaySearchResults(results, searchTerm);
}

// 게시판 이름 반환
function getBoardName(board) {
    const boardNames = {
        verify: '먹튀검증',
        onca: '온카후기',
        offca: '오프후기',
        entertainment: '유흥후기',
        freeboard: '자유게시판',
        generalPromo: '일반홍보',    
        freeMoney: '꽁머니홍보'        
    };
    return boardNames[board] || board;
}

// 검색 결과 표시
function displaySearchResults(results, searchTerm) {
    const resultsContainer = document.getElementById('searchResults');
    
    if (results.length === 0) {
        resultsContainer.innerHTML = '<div class="search-empty">검색 결과가 없습니다.</div>';
        return;
    }
    
    let html = `<div class="search-stats">총 ${results.length}개의 검색 결과</div>`;
    
    results.forEach(result => {
        // 하이라이트 처리
        const highlightedTitle = highlightText(result.title, searchTerm);
        const highlightedContent = highlightText(result.content, searchTerm);
        
        html += `
            <div class="search-result-item" onclick="goToPost('${result.boardType}', ${result.id})">
                <div class="search-result-header">
                    <div class="search-result-title">${highlightedTitle}</div>
                    <div class="search-result-board">${result.boardName}</div>
                </div>
                <div class="search-result-content">${highlightedContent}</div>
                <div class="search-result-meta">
                    <span>작성자: ${result.author}</span>
                    <span>작성일: ${result.date}</span>
                    <span>👍 ${result.likes || 0}</span>
                    <span>💬 ${getCommentCount(result.boardType, result.id)}</span>
                </div>
            </div>
        `;
    });
    
    resultsContainer.innerHTML = html;
}

// 텍스트 하이라이트
function highlightText(text, searchTerm) {
    if (!searchTerm) return text;
    
    const regex = new RegExp(`(${searchTerm})`, 'gi');
    return text.replace(regex, '<span class="search-highlight">$1</span>');
}

// 댓글 수 가져오기
function getCommentCount(boardType, postId) {
    return commentsData[boardType] && commentsData[boardType][postId] ? 
        commentsData[boardType][postId].length : 0;
}

// 검색 결과에서 게시글로 이동
function goToPost(boardType, postId) {
    closeSearchModal();
    showPage('postView');
    showPostDetail(boardType, postId);
}

// ESC 키로 모달 닫기
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        if (document.getElementById('searchModal').style.display === 'block') {
            closeSearchModal();
        } else if (document.getElementById('editModal').style.display === 'block') {
            cancelEdit();
        }
    }
});

// 페이지네이션 HTML 생성
function createPagination(postType, totalPosts) {
    const totalPages = Math.ceil(totalPosts / POSTS_PER_PAGE);
    const currentPage = currentPages[postType];
    
    if (totalPages <= 1) return '';
    
    let html = '<div class="pagination">';
    
    // 이전 버튼
    html += `<button class="pagination-btn" onclick="changePage('${postType}', ${currentPage - 1})" ${currentPage === 1 ? 'disabled' : ''}>‹</button>`;
    
    // 페이지 번호
    const maxButtons = 5;
    let startPage = Math.max(1, currentPage - Math.floor(maxButtons / 2));
    let endPage = Math.min(totalPages, startPage + maxButtons - 1);
    
    if (endPage - startPage < maxButtons - 1) {
        startPage = Math.max(1, endPage - maxButtons + 1);
    }
    
    if (startPage > 1) {
        html += `<button class="pagination-btn" onclick="changePage('${postType}', 1)">1</button>`;
        if (startPage > 2) {
            html += '<span class="pagination-dots">...</span>';
        }
    }
    
    for (let i = startPage; i <= endPage; i++) {
        html += `<button class="pagination-btn ${i === currentPage ? 'active' : ''}" onclick="changePage('${postType}', ${i})">${i}</button>`;
    }
    
    if (endPage < totalPages) {
        if (endPage < totalPages - 1) {
            html += '<span class="pagination-dots">...</span>';
        }
        html += `<button class="pagination-btn" onclick="changePage('${postType}', ${totalPages})">${totalPages}</button>`;
    }
    
    // 다음 버튼
    html += `<button class="pagination-btn" onclick="changePage('${postType}', ${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''}>›</button>`;
    
    // 페이지 정보
    html += `<span class="pagination-info">${currentPage} / ${totalPages} 페이지</span>`;
    
    html += '</div>';
    return html;
}

// 페이지 변경
function changePage(postType, page) {
    const totalPosts = postsData[postType].length;
    const totalPages = Math.ceil(totalPosts / POSTS_PER_PAGE);
    
    if (page < 1 || page > totalPages) return;
    
    currentPages[postType] = page;
    renderPosts(postType);
    
    // 스크롤을 테이블 상단으로 이동
    const table = document.querySelector(`#${postType} .board-table`);
    if (table) {
        table.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
}

// 페이지네이션을 고려한 게시글 가져오기
function getPagedPosts(postType) {
    const allPosts = postsData[postType];
    const currentPage = currentPages[postType];
    const start = (currentPage - 1) * POSTS_PER_PAGE;
    const end = start + POSTS_PER_PAGE;
    
    return allPosts.slice(start, end);
}

// 검색 입력창에서 엔터키 처리
document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('searchInput');
    if (searchInput) {
        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performSearch();
            }
        });
    }
});

// 검색 모달 닫기
function closeSearchModal() {
    document.getElementById('searchModal').style.display = 'none';
    document.getElementById('searchResults').innerHTML = '';
    document.getElementById('searchInput').value = '';
    document.getElementById('headerSearchInput').value = '';
}

   


 </script>

<!-- 검색 모달 -->
<div id="searchModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 9999;">
    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 12px; width: 800px; max-width: 90%; max-height: 80vh; overflow-y: auto; box-shadow: 0 10px 40px rgba(0,0,0,0.2);">
        <h2 style="margin-bottom: 20px; color: #212529;">통합 검색</h2>
        
        <div style="margin-bottom: 20px;">
            <input type="text" id="searchInput" placeholder="검색어를 입력하세요" style="width: 100%; padding: 12px; border: 1px solid #dee2e6; border-radius: 6px; font-size: 16px;">
        </div>
        
        <div style="display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap;">
            <select id="searchType" style="padding: 8px 12px; border: 1px solid #dee2e6; border-radius: 6px;">
                <option value="all">전체</option>
                <option value="title">제목</option>
                <option value="content">내용</option>
                <option value="author">작성자</option>
            </select>
            
            <select id="searchBoard" style="padding: 8px 12px; border: 1px solid #dee2e6; border-radius: 6px;">
                <option value="all">모든 게시판</option>
                <option value="verify">먹튀검증</option>
                <option value="onca">온카후기</option>
                <option value="offca">오프후기</option>
                <option value="entertainment">유흥후기</option>
                <option value="freeboard">자유게시판</option>
            </select>
            
            <button onclick="performSearch()" style="padding: 8px 20px; background: #dc2626; color: white; border: none; border-radius: 6px; cursor: pointer;">검색</button>
            <button onclick="closeSearchModal()" style="padding: 8px 20px; background: #e9ecef; color: #495057; border: none; border-radius: 6px; cursor: pointer;">닫기</button>
        </div>
        
        <div id="searchResults" style="margin-top: 20px;">
            <!-- 검색 결과가 여기에 표시됩니다 -->
        </div>
    </div>
</div>

<!-- 게시글 수정 모달 -->
<div id="editModal" class="edit-modal">
    <div class="edit-modal-content">
        <div class="edit-modal-header">
            <h3>게시글 수정</h3>
        </div>
        
        <div class="edit-form-group">
            <label class="edit-form-label">제목</label>
            <input type="text" id="editTitle" class="edit-form-control">
        </div>
        
        <div class="edit-form-group">
            <label class="edit-form-label">내용</label>
            <textarea id="editContent" class="edit-form-control edit-form-textarea"></textarea>
        </div>
        
        <div class="edit-modal-actions">
            <button onclick="cancelEdit()" class="btn btn-secondary">취소</button>
            <button onclick="saveEdit()" class="btn btn-primary">저장</button>
        </div>
    </div>
</div>

<!-- 출석체크 모달 -->
<div class="attendances-modal" id="attendancesModal">
    <div class="attendances-content">
        <div class="attendances-header">
            <h2 class="attendances-title">📅 출석체크</h2>
            <p class="attendances-subtitle">매일 출석하고 포인트를 받아가세요!</p>
        </div>
        
        <div class="attendances-streak">
            <div class="streak-number" id="streakCount">0</div>
            <div>연속 출석일</div>
        </div>
        
        <div class="attendances-calendar" id="attendancesCalendar">
            <!-- 달력이 여기에 생성됨 -->
        </div>
        
        <div class="attendances-reward" id="attendancesReward" style="display: none;">
            <!-- 보상 메시지가 여기에 표시됨 -->
        </div>
        
        <div style="text-align: center;">
            <button onclick="closeattendances()" class="btn btn-secondary">닫기</button>
        </div>
    </div>
</div>

<!-- 포인트 상점 모달 -->
<div class="shop-modal" id="shopModal">
    <div class="shop-content">
        <div class="shop-header">
            <h2 class="shop-title">🛍️ 포인트 상점</h2>
            <div class="shop-balance">💰 <span id="shopPoints">0</span>P</div>
        </div>
        
        <div class="shop-tabs">
            <button class="shop-tab active" onclick="switchShopTab('badges')">뱃지</button>
            <button class="shop-tab" onclick="switchShopTab('effects')">효과</button>
            <button class="shop-tab" onclick="switchShopTab('titles')">칭호</button>
        </div>
        
        <div id="shop-badges" class="shop-items">
            <!-- 뱃지 아이템들 -->
        </div>
        
        <div id="shop-effects" class="shop-items" style="display: none;">
            <!-- 효과 아이템들 -->
        </div>
        
        <div id="shop-titles" class="shop-items" style="display: none;">
            <!-- 칭호 아이템들 -->
        </div>
        
        <div style="text-align: center; margin-top: 20px;">
            <button onclick="closeShop()" class="btn btn-secondary">닫기</button>
        </div>
    </div>
</div>



<script>

</script>

</body>
</html>

